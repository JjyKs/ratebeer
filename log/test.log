  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.0ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.2ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 15:44:13.706419"], ["password_digest", "$2a$04$CuYHW7QEORLNcjUMjsCsaOww3jvNrezzngFjQEREP0UGe3FRI3W6u"], ["updated_at", "2015-02-07 15:44:13.706419"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 15:44:13.724627"], ["password_digest", "$2a$04$gN/koOL4c2RG5ZM2HeUkieGcrEsYocnhZwFGVzbWN3veikz/UMq9G"], ["updated_at", "2015-02-07 15:44:13.724627"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 15:44:13.745647"], ["score", 10], ["updated_at", "2015-02-07 15:44:13.745647"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 15:44:13.746648"], ["score", 20], ["updated_at", "2015-02-07 15:44:13.746648"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 15:47:00.143243"], ["password_digest", "$2a$04$mF8G96mWeA9YGnMw8L6V7.8ar1g1uXxll5M.CSV.wreHLfpZjeEdm"], ["updated_at", "2015-02-07 15:47:00.143243"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (13.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 15:47:00.158257"], ["password_digest", "$2a$04$BjlPsLBrss5/YtQB4CR18eXLKxjnl.kjgmV5Xj7Bz6CcxVbHWpnp6"], ["updated_at", "2015-02-07 15:47:00.158257"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 15:47:00.186277"], ["score", 10], ["updated_at", "2015-02-07 15:47:00.186277"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 15:47:00.187278"], ["score", 20], ["updated_at", "2015-02-07 15:47:00.187278"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 15:52:06.049850"], ["password_digest", "$2a$04$3HdzDINtvsyU4y4hsJ.0kOIjkGK5aAcBQf5g40IWPnJ2u9SSvXfzi"], ["updated_at", "2015-02-07 15:52:06.049850"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 15:52:06.068868"], ["password_digest", "$2a$04$KEow2x97uqJTjfjUQQksG.MeoTeykuKcq6V5wvOvn1AIQ3j5l3x06"], ["updated_at", "2015-02-07 15:52:06.068868"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 15:52:06.084745"], ["score", 10], ["updated_at", "2015-02-07 15:52:06.084745"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 15:52:06.085746"], ["score", 20], ["updated_at", "2015-02-07 15:52:06.085746"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (12.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:32:36.707665"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 16:32:36.707665"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:32:36.819772"], ["password_digest", "$2a$04$ogIbNI.DLRsyWmJJHJRzE.upNu7UELwugUTmaUfT.JKgMyHxmlQ6i"], ["updated_at", "2015-02-07 16:32:36.819772"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:32:36.828780"], ["password_digest", "$2a$04$0t3bPjm4jiNfiUk6n3a7R.A8.xyplPtvGkEImuvcJk6qtxZS1WdnW"], ["updated_at", "2015-02-07 16:32:36.828780"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:32:36.898847"], ["score", 10], ["updated_at", "2015-02-07 16:32:36.898847"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:32:36.900849"], ["score", 20], ["updated_at", "2015-02-07 16:32:36.900849"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:33:19.538119"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 16:33:19.538119"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:33:19.584163"], ["password_digest", "$2a$04$zs7Fikdmho6CuQFZiTpc6utv9GHQdzcodGFz.3jSro4bXfMKLt/zu"], ["updated_at", "2015-02-07 16:33:19.584163"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:33:19.594173"], ["password_digest", "$2a$04$XgawhoA5fv9sBr/DBNDprO8aDBkKngE0F6V0ShzZcg3UGv/ExFJra"], ["updated_at", "2015-02-07 16:33:19.594173"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:33:19.612190"], ["score", 10], ["updated_at", "2015-02-07 16:33:19.612190"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:33:19.613191"], ["score", 20], ["updated_at", "2015-02-07 16:33:19.613191"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:34:19.068653"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 16:34:19.068653"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:34:19.111694"], ["password_digest", "$2a$04$HFGDZ5n6q.bFuK12tbI7m.zSEJY/p8aIY3KcEslH/HcW8kA2ylu/u"], ["updated_at", "2015-02-07 16:34:19.111694"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:34:19.120703"], ["password_digest", "$2a$04$4b/8226Q8XfELNohaF61S.GOlPGDjfj/lvPeFw1533/zZQFSr5pMi"], ["updated_at", "2015-02-07 16:34:19.120703"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:34:19.136719"], ["score", 10], ["updated_at", "2015-02-07 16:34:19.136719"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:34:19.141723"], ["score", 20], ["updated_at", "2015-02-07 16:34:19.141723"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:35:04.377524"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 16:35:04.377524"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 16:35:04.392539"], ["name", "Test"], ["updated_at", "2015-02-07 16:35:04.392539"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:35:04.420565"], ["password_digest", "$2a$04$Hd9gYws6WesHGpGroru/IO3d5iWQ5v7ecFFc0OG8Di/qwPGBjgjbi"], ["updated_at", "2015-02-07 16:35:04.420565"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:35:04.433578"], ["password_digest", "$2a$04$f6tTTEw1Sae8i/a8bqgRjerUfu9kL682Y6kKmPx7muVkjX5UnkKT2"], ["updated_at", "2015-02-07 16:35:04.433578"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:35:04.448592"], ["score", 10], ["updated_at", "2015-02-07 16:35:04.448592"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:35:04.450594"], ["score", 20], ["updated_at", "2015-02-07 16:35:04.450594"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:37:20.308952"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 16:37:20.308952"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:37:20.350992"], ["password_digest", "$2a$04$54RTc1LtgVANkMDrjnG2bu8Qs5wuxVo1nET.gfRUf4kU8tJYeJnLu"], ["updated_at", "2015-02-07 16:37:20.350992"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:37:20.360001"], ["password_digest", "$2a$04$wBHpmDr2ckeb19zoNeNhOe78OaHWrj2Z5CbGYpNavgn7ECPBolHDW"], ["updated_at", "2015-02-07 16:37:20.360001"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:37:20.375015"], ["score", 10], ["updated_at", "2015-02-07 16:37:20.375015"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:37:20.378018"], ["score", 20], ["updated_at", "2015-02-07 16:37:20.378018"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:46:25.937024"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 16:46:25.937024"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:46:25.976061"], ["password_digest", "$2a$04$MKuscjAuROWVqUCY0ht9DeeL//xaDfUb/aXdkkdMaQThLppO2YA02"], ["updated_at", "2015-02-07 16:46:25.976061"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:46:25.981065"], ["password_digest", "$2a$04$qOxzzgHBp87b8eiQapCZaOehLfOcz1DhOHYBznVJEQalwOkmyaWuW"], ["updated_at", "2015-02-07 16:46:25.981065"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 16:46:25.994078"], ["score", 10], ["updated_at", "2015-02-07 16:46:25.994078"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 16:46:26.000084"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 16:46:26.002086"], ["score", 20], ["updated_at", "2015-02-07 16:46:26.002086"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:46:57.749236"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 16:46:57.749236"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:46:57.790276"], ["password_digest", "$2a$04$GW.VoZ0XJQlGrSRdhMoQZe0eDaboBByG9x0SNYOE8NpAU9ULiO2uO"], ["updated_at", "2015-02-07 16:46:57.790276"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:46:57.795280"], ["password_digest", "$2a$04$ZjWeGLZdICgeTkF6vcnGOuc1iWCM8/qeogg1ZDql7Brvn8zpGUUc."], ["updated_at", "2015-02-07 16:46:57.795280"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 16:46:57.808293"], ["score", 10], ["updated_at", "2015-02-07 16:46:57.808293"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 16:46:57.814298"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 16:46:57.816301"], ["score", 20], ["updated_at", "2015-02-07 16:46:57.816301"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:52:02.669079"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 16:52:02.669079"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:52:02.710118"], ["password_digest", "$2a$04$WYOBoTdyJSixmMoJA7Hyu..ROW82R7S0.m3r1q1bASsQOTqwgRpfG"], ["updated_at", "2015-02-07 16:52:02.710118"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:52:02.735142"], ["password_digest", "$2a$04$a9OINBdo8fgYWEixXJjHm.RhWw21mZAWvQSG8oopA.b7MmxqokDPa"], ["updated_at", "2015-02-07 16:52:02.735142"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:52:02.740147"], ["password_digest", "$2a$04$VYBGG3Al.SscS/qhBvj3zOLQl//9Yi6BWCkTcpuHrEhsSnWzjHzzG"], ["updated_at", "2015-02-07 16:52:02.740147"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 16:52:02.754160"], ["score", 10], ["updated_at", "2015-02-07 16:52:02.754160"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 16:52:02.761167"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 16:52:02.762168"], ["score", 20], ["updated_at", "2015-02-07 16:52:02.762168"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 16:52:02.763169"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:57:43.858463"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 16:57:43.858463"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:57:43.900502"], ["password_digest", "$2a$04$POAsl3z/UKe4c92OHxxqEOWXqwNTGPXkNle5iD3LyruTs.xx0KyDq"], ["updated_at", "2015-02-07 16:57:43.900502"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:57:43.906509"], ["password_digest", "$2a$04$VSIY8MNBMEQhm64Nnbscfue.eRHl/q.t4ylxyUKyGDXj2axuDgXp."], ["updated_at", "2015-02-07 16:57:43.906509"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 16:57:43.920521"], ["score", 10], ["updated_at", "2015-02-07 16:57:43.920521"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 16:57:43.928528"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 16:57:43.929530"], ["score", 20], ["updated_at", "2015-02-07 16:57:43.929530"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 16:57:43.930530"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:57:43.935536"], ["password_digest", "$2a$04$LghYZ9jatSuiaoe13axtiu7EqzeY2Qy9Lh02EnLkefAwa0MKxtTCS"], ["updated_at", "2015-02-07 16:57:43.935536"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:57:43.941541"], ["password_digest", "$2a$04$I676k5.toKDr.fzQcH2oteKLMg0/Bc2yUG3euIwf5HHLpQO0oE65K"], ["updated_at", "2015-02-07 16:57:43.941541"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:57:43.949549"], ["name", "anonymous"], ["updated_at", "2015-02-07 16:57:43.949549"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 16:57:43.951551"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 16:57:43.951551"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:57:43.955556"], ["password_digest", "$2a$04$DCIsRdLRwRQHbZchr2A8a.fhCPdZVgX7meFWL8LkWabNWpbXLGOVi"], ["updated_at", "2015-02-07 16:57:43.955556"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 16:57:43.957556"], ["score", 10], ["updated_at", "2015-02-07 16:57:43.957556"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:59:44.424886"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 16:59:44.424886"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:59:44.467927"], ["password_digest", "$2a$04$FQXdttEKGca9NH.pntTP8uQCSs49wJLt1AJYj7yIB2OhbXnk2I3Uq"], ["updated_at", "2015-02-07 16:59:44.467927"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:59:44.472932"], ["password_digest", "$2a$04$y3yv0SHdSJkIpzwmHzLgDeXZsliKM4OTwFXe5BPrRiixwqoijeYu."], ["updated_at", "2015-02-07 16:59:44.472932"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 16:59:44.487946"], ["score", 10], ["updated_at", "2015-02-07 16:59:44.487946"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 16:59:44.494953"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 16:59:44.495954"], ["score", 20], ["updated_at", "2015-02-07 16:59:44.495954"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 16:59:44.496955"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:59:44.501959"], ["password_digest", "$2a$04$TYd0maW4ebtBLaXRVoRaXeSfM4VICZ1a1M2YWTRTcknn4H18D0FNS"], ["updated_at", "2015-02-07 16:59:44.501959"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:59:44.506964"], ["password_digest", "$2a$04$ljd5uVvwhh7wBu52ahmZ/.MCSrgO/gR6ILFQ7neBGq69DcLYVIWQ2"], ["updated_at", "2015-02-07 16:59:44.506964"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:59:44.515973"], ["name", "anonymous"], ["updated_at", "2015-02-07 16:59:44.515973"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 16:59:44.517975"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 16:59:44.517975"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:59:44.520977"], ["password_digest", "$2a$04$5bOoEIEM4GiBUESzYkJ9QuCxYM7bsg7ApyJpf.Q1XbAqeDOtJRtnq"], ["updated_at", "2015-02-07 16:59:44.520977"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 16:59:44.522979"], ["score", 10], ["updated_at", "2015-02-07 16:59:44.522979"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:59:44.525982"], ["name", "anonymous"], ["updated_at", "2015-02-07 16:59:44.525982"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 16:59:44.528986"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 16:59:44.528986"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:59:44.529986"], ["name", "anonymous"], ["updated_at", "2015-02-07 16:59:44.529986"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 16:59:44.530987"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 16:59:44.530987"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 16:59:44.531988"], ["name", "anonymous"], ["updated_at", "2015-02-07 16:59:44.531988"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 16:59:44.532989"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 16:59:44.532989"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 16:59:44.534991"], ["password_digest", "$2a$04$787436/ufw0lx7JGAo58Q.nGBy.uTMCCKYyNdm6.t/bzD4kQgmSuu"], ["updated_at", "2015-02-07 16:59:44.534991"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 16:59:44.535992"], ["score", 10], ["updated_at", "2015-02-07 16:59:44.535992"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 16:59:44.536993"], ["score", 25], ["updated_at", "2015-02-07 16:59:44.536993"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 16:59:44.537994"], ["score", 9], ["updated_at", "2015-02-07 16:59:44.537994"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."id" ASC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 17:03:53.469402"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 17:03:53.469402"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 17:03:53.510441"], ["password_digest", "$2a$04$LEGo4PvNWgWtksleLvQUnucgYZqoKmFc.PO.ZNXlAKvwAXILwqhqC"], ["updated_at", "2015-02-07 17:03:53.510441"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 17:03:53.516446"], ["password_digest", "$2a$04$CgFGSaXfmEF.LhxasgilF.qON73qqDiWZJV.DpOo582bvNPLeqvi."], ["updated_at", "2015-02-07 17:03:53.516446"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 17:03:53.530460"], ["score", 10], ["updated_at", "2015-02-07 17:03:53.530460"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 17:03:53.537467"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 17:03:53.539469"], ["score", 20], ["updated_at", "2015-02-07 17:03:53.539469"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 17:03:53.545475"], ["password_digest", "$2a$04$YG4Plf8n9dw257FHWHG5BOxN81F9z.ta/sTFAAL0Jnt3w5D7FMapO"], ["updated_at", "2015-02-07 17:03:53.545475"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 17:03:53.550479"], ["password_digest", "$2a$04$c8qVzC/A.PIM1MKJnTtLbe4DP08haFFEi3COHxyCeZp7kxSwnosZK"], ["updated_at", "2015-02-07 17:03:53.550479"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 17:03:53.558487"], ["name", "anonymous"], ["updated_at", "2015-02-07 17:03:53.558487"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 17:03:53.561490"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 17:03:53.561490"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 17:03:53.565494"], ["password_digest", "$2a$04$1gJNow94tnY4yly/nzR0FOKaR7aehBkcT3pANUX9wauO7aoL/Ex7K"], ["updated_at", "2015-02-07 17:03:53.565494"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 17:03:53.567495"], ["score", 10], ["updated_at", "2015-02-07 17:03:53.567495"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 17:03:53.571499"], ["password_digest", "$2a$04$7nokab1FHcZgPqe0c7qX1ugbiYAR7ILb09pzLmti57b7R8d3wDp9S"], ["updated_at", "2015-02-07 17:03:53.571499"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 17:03:53.574502"], ["name", "anonymous"], ["updated_at", "2015-02-07 17:03:53.574502"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 17:03:53.575503"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 17:03:53.575503"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 17:03:53.576504"], ["score", 10], ["updated_at", "2015-02-07 17:03:53.576504"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 17:03:53.577505"], ["name", "anonymous"], ["updated_at", "2015-02-07 17:03:53.577505"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 17:03:53.578506"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 17:03:53.578506"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 17:03:53.579507"], ["score", 25], ["updated_at", "2015-02-07 17:03:53.579507"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 17:03:53.580508"], ["name", "anonymous"], ["updated_at", "2015-02-07 17:03:53.580508"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 17:03:53.580508"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 17:03:53.580508"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 17:03:53.581509"], ["score", 7], ["updated_at", "2015-02-07 17:03:53.581509"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.549798"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:09:31.549798"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.630876"], ["password_digest", "$2a$04$0iLiZM9C5wYlQUX3eSKu9ev6nE6yPoEFtgjsGDlnwdfzFkGNEiqZS"], ["updated_at", "2015-02-07 20:09:31.630876"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.637882"], ["password_digest", "$2a$04$WOFpQm7B5br1nYlpt.pMn.hX3dLMmNxaQGt.ou.9yWtDTQalWVN5e"], ["updated_at", "2015-02-07 20:09:31.637882"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:09:31.652897"], ["score", 10], ["updated_at", "2015-02-07 20:09:31.652897"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:09:31.657902"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:09:31.659904"], ["score", 20], ["updated_at", "2015-02-07 20:09:31.659904"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 20:09:31.660904"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.666910"], ["password_digest", "$2a$04$k3FQuc4XjThGXKl2w4QWVeZPHVjVPkXsGuh86NLj1bqf72er0mWRO"], ["updated_at", "2015-02-07 20:09:31.666910"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.689932"], ["password_digest", "$2a$04$sp.DNAles5htBWawRg7ajeVoQcLARGtDZgd9djryz.wqOGk/Hv2pu"], ["updated_at", "2015-02-07 20:09:31.689932"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:09:31.695938"], ["password_digest", "$2a$04$a/ZadaC2baF2mgpLabSU..wfANsvvw2VYnl4NfvoXWkynZ0IG8TdK"], ["updated_at", "2015-02-07 20:09:31.695938"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.701944"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:09:31.701944"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:09:31.703945"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:09:31.703945"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:09:31.706949"], ["score", 10], ["updated_at", "2015-02-07 20:09:31.706949"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:09:31.716958"], ["password_digest", "$2a$04$hBAKIgTUMM1LLRswPPNIPeYl2j.fndzUzRE3y7OPBX8akZrr8ts1e"], ["updated_at", "2015-02-07 20:09:31.716958"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.718960"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:09:31.718960"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:09:31.719961"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:09:31.719961"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:09:31.720966"], ["score", 10], ["updated_at", "2015-02-07 20:09:31.720966"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:09:31.721962"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:09:31.721962"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:09:31.722963"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:09:31.722963"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:09:31.723965"], ["score", 20], ["updated_at", "2015-02-07 20:09:31.723965"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.724965"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:09:31.724965"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:09:31.724965"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:09:31.724965"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:09:31.725966"], ["score", 15], ["updated_at", "2015-02-07 20:09:31.725966"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:09:31.726967"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:09:31.726967"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:09:31.727968"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:09:31.727968"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:09:31.727968"], ["score", 7], ["updated_at", "2015-02-07 20:09:31.727968"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.728969"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:09:31.728969"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:09:31.729970"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:09:31.729970"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:09:31.730971"], ["score", 9], ["updated_at", "2015-02-07 20:09:31.730971"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:09:31.731972"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:09:31.731972"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:09:31.732973"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:09:31.732973"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:09:31.732973"], ["score", 25], ["updated_at", "2015-02-07 20:09:31.732973"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.740981"], ["password_digest", "$2a$04$ejmtCvd5J50Jq7VqnrKXVefGzjGgbgI3swZfRymtW/YwxARYIuZXa"], ["updated_at", "2015-02-07 20:09:31.740981"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (19.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.763002"], ["password_digest", "$2a$04$E9YYfcX9Py/7RSVoGrNJMOG4KU2bXYpT6lpL6aUH9LPDhE1BS3AXm"], ["updated_at", "2015-02-07 20:09:31.763002"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:09:31.770008"], ["password_digest", "$2a$04$9Xj/5RlBQgFqT.CssTSeDujSNfHDIVQ7iVoF5OjrOZ7Nqe2wNb9C."], ["updated_at", "2015-02-07 20:09:31.770008"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:09:31.771015"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:09:31.771015"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:09:31.773011"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:09:31.773011"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:09:31.774012"], ["score", 10], ["updated_at", "2015-02-07 20:09:31.774012"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:16.039858"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:10:16.039858"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:16.081898"], ["password_digest", "$2a$04$0VIFzc8TCEYTdbWK6dBfPua5KRiyi6IOOeWUSOCJzzlEKYkAPvQ8W"], ["updated_at", "2015-02-07 20:10:16.081898"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:16.087904"], ["password_digest", "$2a$04$dxG1QsGJ/3IyhHb0Fbcaxu.GIqHcrcZ/Q9cAa7UizaILaHfgLtHam"], ["updated_at", "2015-02-07 20:10:16.087904"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (141.1ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:10:16.102919"], ["score", 10], ["updated_at", "2015-02-07 20:10:16.102919"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:10:16.249057"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:10:16.250058"], ["score", 20], ["updated_at", "2015-02-07 20:10:16.250058"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 20:10:16.251059"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (24.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:16.258066"], ["password_digest", "$2a$04$LVfr.0hBq7o8byhtUqTKyezMGt/TWD2ymSct/zuIZRAq9WZABrLci"], ["updated_at", "2015-02-07 20:10:16.258066"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (26.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:16.288095"], ["password_digest", "$2a$04$68Qho1OgM9v/TqWyj.QoXufh3ZHsnb1k/tGigNS2OLRHXMVgz05MG"], ["updated_at", "2015-02-07 20:10:16.288095"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (27.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:10:16.322127"], ["password_digest", "$2a$04$93b0TOF/9/DbF7P85gZP/ehwlIEbinV5IikIi/hUQ0v54pBGXr7HG"], ["updated_at", "2015-02-07 20:10:16.322127"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (6.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:16.354157"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:10:16.354157"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:10:16.361164"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:10:16.361164"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:10:16.364167"], ["score", 10], ["updated_at", "2015-02-07 20:10:16.364167"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:10:16.370173"], ["password_digest", "$2a$04$iHAzV6OvRLIAmV9fDJir6uh4f55HCzf6cUNci99OdH9zYyvmFJBcC"], ["updated_at", "2015-02-07 20:10:16.370173"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:16.373176"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:10:16.373176"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:10:16.374177"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:10:16.374177"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:10:16.375178"], ["score", 10], ["updated_at", "2015-02-07 20:10:16.375178"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:10:16.376179"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:10:16.376179"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:10:16.377179"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:10:16.377179"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:10:16.378181"], ["score", 20], ["updated_at", "2015-02-07 20:10:16.378181"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:16.379181"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:10:16.379181"], ["year", 1900]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:10:16.380182"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:10:16.380182"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:10:16.381183"], ["score", 15], ["updated_at", "2015-02-07 20:10:16.381183"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:10:16.382184"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:10:16.382184"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:10:16.382184"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:10:16.382184"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:10:16.383186"], ["score", 7], ["updated_at", "2015-02-07 20:10:16.383186"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:16.384186"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:10:16.384186"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:10:16.385187"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:10:16.385187"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:10:16.386188"], ["score", 9], ["updated_at", "2015-02-07 20:10:16.386188"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:10:16.386188"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:10:16.386188"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:10:16.387189"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:10:16.387189"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:10:16.388190"], ["score", 25], ["updated_at", "2015-02-07 20:10:16.388190"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:16.395197"], ["password_digest", "$2a$04$pTD9kG7lRWq2Jpg6SBithOQlFiD1u0xm.jytspQ4ifOmfLNMit.h6"], ["updated_at", "2015-02-07 20:10:16.395197"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:22.928960"], ["password_digest", "$2a$04$zN36IChfifvXgNY2p/yaQO2jA9YnexfnfBtWQA8gJA9cE6eBEAkVS"], ["updated_at", "2015-02-07 20:10:22.928960"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:10:36.050343"], ["password_digest", "$2a$04$yQezSEEk/R7TCqAgey8WaeTXjsRAxMVR13VykQVo3vjfsBQ3z4sIm"], ["updated_at", "2015-02-07 20:10:36.050343"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:10:36.059352"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:10:36.059352"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 20:10:36.065358"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:10:36.065358"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 20:10:36.072365"], ["score", 10], ["updated_at", "2015-02-07 20:10:36.072365"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.110471"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:02.110471"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.155514"], ["password_digest", "$2a$04$bfCjOm91PtE/lxktWs.fAu5YPksE6HVp.JhfyaY/2Ezwve50UgZgu"], ["updated_at", "2015-02-07 20:11:02.155514"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.162521"], ["password_digest", "$2a$04$gyLa9LiIPDj9vNTtmvQHAOJEA/yzguYuPg7T5c0Xzdc0phP1TOBnK"], ["updated_at", "2015-02-07 20:11:02.162521"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:02.178536"], ["score", 10], ["updated_at", "2015-02-07 20:11:02.178536"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:11:02.187544"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:02.188545"], ["score", 20], ["updated_at", "2015-02-07 20:11:02.188545"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 20:11:02.189546"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (6.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.201558"], ["password_digest", "$2a$04$1CU1r3nwgUGSUg7JfR9QG.V8QO4hYstxiinDHEo5nGZ.EMwib9DdK"], ["updated_at", "2015-02-07 20:11:02.201558"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.207563"], ["password_digest", "$2a$04$t/DoLbNEOvDMvjRDNHjITe061hs6LerqTdwoGP/1QRa7MCOH/nLPy"], ["updated_at", "2015-02-07 20:11:02.207563"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:02.214570"], ["password_digest", "$2a$04$zTPKyzpiT4PdCfUHrKDPhOMLa1r.6XnsseAIacpOU9dy/oa6/..4S"], ["updated_at", "2015-02-07 20:11:02.214570"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.220576"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:02.220576"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:11:02.222577"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:02.222577"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:11:02.224580"], ["score", 10], ["updated_at", "2015-02-07 20:11:02.224580"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:02.231586"], ["password_digest", "$2a$04$8PiPhxYo5odRspWbGhlzIOl4/t75O457.fPC6D6Xj.3ybYU/7LoX6"], ["updated_at", "2015-02-07 20:11:02.231586"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.233588"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:02.233588"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:11:02.234589"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:02.234589"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:11:02.235590"], ["score", 10], ["updated_at", "2015-02-07 20:11:02.235590"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:02.236591"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:02.236591"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:11:02.237592"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:02.237592"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:11:02.237592"], ["score", 20], ["updated_at", "2015-02-07 20:11:02.237592"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.238593"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:02.238593"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:11:02.239593"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:02.239593"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:11:02.240595"], ["score", 15], ["updated_at", "2015-02-07 20:11:02.240595"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:02.241596"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:02.241596"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:11:02.241596"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:02.241596"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:11:02.242597"], ["score", 7], ["updated_at", "2015-02-07 20:11:02.242597"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.243598"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:02.243598"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:11:02.244599"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:02.244599"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:11:02.245600"], ["score", 9], ["updated_at", "2015-02-07 20:11:02.245600"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:02.246601"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:02.246601"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:11:02.247602"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:02.247602"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:11:02.248603"], ["score", 25], ["updated_at", "2015-02-07 20:11:02.248603"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.254608"], ["password_digest", "$2a$04$mir4CSVRmCvmRrkDFOzMvecbvO7A5Z59IQa9r0tgGRFQh6.7RXYWK"], ["updated_at", "2015-02-07 20:11:02.254608"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.260614"], ["password_digest", "$2a$04$pefaPlMHHaE8CrGurdPbf.5D9oxlCF/rWSnexpvRPJvJIGs7EbWXW"], ["updated_at", "2015-02-07 20:11:02.260614"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:02.266620"], ["password_digest", "$2a$04$OJB4GQLpYDTpay/NvvSn1On8WOzLI44Iizj7BxstuIgLFP6YKijEu"], ["updated_at", "2015-02-07 20:11:02.266620"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:02.268621"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:02.268621"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:11:02.269622"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:02.269622"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:11:02.270624"], ["score", 10], ["updated_at", "2015-02-07 20:11:02.270624"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.116756"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:41.116756"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (22.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.167805"], ["password_digest", "$2a$04$XWfE7iM94dPCUGWK6KdR6u3b8Xh7UkpKkz2.7iJhqgDS0D0o8e61y"], ["updated_at", "2015-02-07 20:11:41.167805"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (26.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.198834"], ["password_digest", "$2a$04$uAe/s.Dbu4UsoGFwpLYD6eSUxbVvh4qoDmtQBFBFyVVR3mzveZhdm"], ["updated_at", "2015-02-07 20:11:41.198834"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (14.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:41.240875"], ["score", 10], ["updated_at", "2015-02-07 20:11:41.240875"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:11:41.259893"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:41.260894"], ["score", 20], ["updated_at", "2015-02-07 20:11:41.260894"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 20:11:41.261895"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (16.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.269902"], ["password_digest", "$2a$04$MAXGVslSs3i3qAwP/VEs4eU4R4wp7Hmmu.ghmdyOyeaDqEWN8E5rG"], ["updated_at", "2015-02-07 20:11:41.269902"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.291923"], ["password_digest", "$2a$04$ZKxmhcOm9COTgzm2FV8H/.UCQPBh9bp/9S0kJiizP9xUb5Z6xQ/EW"], ["updated_at", "2015-02-07 20:11:41.291923"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:41.299931"], ["password_digest", "$2a$04$o8l3jOLeBhfeZCoFAOn6UuPINAOyEPaVlLkPY9Cb57obhF9qF/OD6"], ["updated_at", "2015-02-07 20:11:41.299931"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.306937"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:41.306937"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:11:41.308939"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:41.308939"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:11:41.310941"], ["score", 10], ["updated_at", "2015-02-07 20:11:41.310941"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (7.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:41.322953"], ["password_digest", "$2a$04$/ISAnpaipKMpWtjtvewMfOv3//ndIgG1hXWH9O4xKV4Xukh.6qixG"], ["updated_at", "2015-02-07 20:11:41.322953"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.324955"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:41.324955"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:11:41.325956"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:41.325956"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:11:41.326957"], ["score", 10], ["updated_at", "2015-02-07 20:11:41.326957"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:41.327958"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:41.327958"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:11:41.328959"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:41.328959"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:11:41.329959"], ["score", 20], ["updated_at", "2015-02-07 20:11:41.329959"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.331962"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:41.331962"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:11:41.332962"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:41.332962"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:11:41.334965"], ["score", 15], ["updated_at", "2015-02-07 20:11:41.334965"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:41.335965"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:41.335965"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:11:41.335965"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:41.335965"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:11:41.337967"], ["score", 7], ["updated_at", "2015-02-07 20:11:41.337967"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.338968"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:41.338968"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:11:41.338968"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:41.338968"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:11:41.339969"], ["score", 9], ["updated_at", "2015-02-07 20:11:41.339969"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:41.340970"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:41.340970"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:11:41.341971"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:41.341971"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:11:41.342972"], ["score", 25], ["updated_at", "2015-02-07 20:11:41.342972"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.349979"], ["password_digest", "$2a$04$BhgEPPG30sRSwA0pW8V.KeJp7zIWJwhZ./ltsGgdE0JrThyAWUxQm"], ["updated_at", "2015-02-07 20:11:41.349979"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.356985"], ["password_digest", "$2a$04$ZbbGGW5j8xQORbyl55WXO.uI4IyU.AlIGXIXaFsnhJBtqPavV0Wim"], ["updated_at", "2015-02-07 20:11:41.356985"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:11:41.362991"], ["password_digest", "$2a$04$9BvGJB9G.Eu7aseFmE8lAOljTqe1YPqq0UhgYa3AsKQlJkgeeg8Vi"], ["updated_at", "2015-02-07 20:11:41.362991"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:11:41.364993"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:11:41.364993"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:11:41.366995"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:11:41.366995"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:11:41.368997"], ["score", 10], ["updated_at", "2015-02-07 20:11:41.368997"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:12:43.132600"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:12:43.132600"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:12:43.179643"], ["password_digest", "$2a$04$IGTGi9akc8t18DCyvjNfsuxIf3OahPi6esUb5YGqEKhgwi9lntnyi"], ["updated_at", "2015-02-07 20:12:43.179643"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:12:43.186650"], ["password_digest", "$2a$04$xh0bKflrTVaXOGghEE/CZOag6lFRxAykKzR2kK5tHSD1rXS4lz.x6"], ["updated_at", "2015-02-07 20:12:43.186650"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:12:43.202666"], ["score", 10], ["updated_at", "2015-02-07 20:12:43.202666"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:12:43.209674"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:12:43.212675"], ["score", 20], ["updated_at", "2015-02-07 20:12:43.212675"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:12:43.219681"], ["password_digest", "$2a$04$f6TZ2432/DiQwReW7AGUcOZwkbNMMs/1Emebc6lVmTdYLwNT0DQ3K"], ["updated_at", "2015-02-07 20:12:43.219681"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:12:43.226688"], ["password_digest", "$2a$04$NMEh9WbUieqa0dzaRM0Du.bBS7j.Uh0yz30fOQumHVm9BlZ7HaRnC"], ["updated_at", "2015-02-07 20:12:43.226688"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:12:43.235697"], ["password_digest", "$2a$04$5DpgGHlScp9I0bB..8BJqe20od3Mkwp9b.E0Ya8q0rbrp6RiqrTnu"], ["updated_at", "2015-02-07 20:12:43.235697"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:12:43.242704"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:12:43.242704"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:12:43.245706"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:12:43.245706"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:12:43.247708"], ["score", 10], ["updated_at", "2015-02-07 20:12:43.247708"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:12:43.253714"], ["password_digest", "$2a$04$w2bKDpm7whlsQ9rUz0Tup.S/0wTnEAGxy.rvcm6hiFIk5Hd2Kvm5W"], ["updated_at", "2015-02-07 20:12:43.253714"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:12:43.255717"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:12:43.255717"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:12:43.256717"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:12:43.256717"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:12:43.257718"], ["score", 10], ["updated_at", "2015-02-07 20:12:43.257718"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:12:43.258719"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:12:43.258719"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:12:43.259720"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:12:43.259720"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:12:43.260721"], ["score", 20], ["updated_at", "2015-02-07 20:12:43.260721"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:12:43.261722"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:12:43.261722"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:12:43.261722"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:12:43.261722"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:12:43.262723"], ["score", 15], ["updated_at", "2015-02-07 20:12:43.262723"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:12:43.263723"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:12:43.263723"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:12:43.264724"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:12:43.264724"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:12:43.265725"], ["score", 7], ["updated_at", "2015-02-07 20:12:43.265725"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:12:43.266726"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:12:43.266726"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:12:43.266726"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:12:43.266726"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:12:43.267727"], ["score", 9], ["updated_at", "2015-02-07 20:12:43.267727"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:12:43.268729"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:12:43.268729"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:12:43.269729"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:12:43.269729"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:12:43.270730"], ["score", 25], ["updated_at", "2015-02-07 20:12:43.270730"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:12:43.276736"], ["password_digest", "$2a$04$FSzGpo8udBFQpLzkzGn8r.ekdDABIH68m8nSy7nxvNXRJj5euWwRi"], ["updated_at", "2015-02-07 20:12:43.276736"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (14.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:12:48.567490"], ["password_digest", "$2a$04$oo4hYeuUSrtWbT/Z7L/XeuJ.IqnpolmSQ5wCCvbxp1bPWtxSMQB5W"], ["updated_at", "2015-02-07 20:12:48.567490"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:09.751102"], ["password_digest", "$2a$04$hnVpGYtt4QKw1iRqwfainORREkEfw.0.eNOpkE8T34kmCkzlzxoDS"], ["updated_at", "2015-02-07 20:18:09.751102"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:18:09.760111"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:18:09.760111"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 20:18:09.766117"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:18:09.766117"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 20:18:09.775125"], ["score", 10], ["updated_at", "2015-02-07 20:18:09.775125"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:21.153311"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:18:21.153311"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:21.197352"], ["password_digest", "$2a$04$5pCEbz06j5b0j1byop8WoOF6X4Gb4zpNCcR5pXaKf.dsjLSWrOdhm"], ["updated_at", "2015-02-07 20:18:21.197352"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:21.204359"], ["password_digest", "$2a$04$zaK9EHOiSxaBaSF3wG61AOriXENDBS4NSzymtJcUecwemj1zAdETi"], ["updated_at", "2015-02-07 20:18:21.204359"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:18:21.218373"], ["score", 10], ["updated_at", "2015-02-07 20:18:21.218373"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:18:21.224378"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:18:21.225379"], ["score", 20], ["updated_at", "2015-02-07 20:18:21.225379"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 20:18:21.226380"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:21.232386"], ["password_digest", "$2a$04$7uA3yUFmQCf1DCkCWOTbz.S2OsnTpcJdrF9uSj8ECkiQi5bB85qG6"], ["updated_at", "2015-02-07 20:18:21.232386"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:21.239392"], ["password_digest", "$2a$04$xo31T6vRTNhzO8mvqAgPeO76EmUzvIKIB/3hWASPE6FC1v4CDhUPW"], ["updated_at", "2015-02-07 20:18:21.239392"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:18:21.249402"], ["password_digest", "$2a$04$jNjFcGRQAb6Y3hZ/dzXJWu67Lj/iYHopy1jYebK7c0dOlBxgSRvKa"], ["updated_at", "2015-02-07 20:18:21.249402"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:21.255408"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:18:21.255408"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:18:21.259411"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:18:21.259411"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:18:21.261413"], ["score", 10], ["updated_at", "2015-02-07 20:18:21.261413"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (5.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:18:21.270422"], ["password_digest", "$2a$04$0TN0zbyvuuF4TNVDYpRzpO4Na2eq3wAbgXH546eJ2vMIpg5YkV3.2"], ["updated_at", "2015-02-07 20:18:21.270422"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:21.275427"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:18:21.275427"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:18:21.276428"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:18:21.276428"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:18:21.277429"], ["score", 10], ["updated_at", "2015-02-07 20:18:21.277429"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:18:21.278430"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:18:21.278430"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:18:21.279430"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:18:21.279430"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:18:21.280432"], ["score", 20], ["updated_at", "2015-02-07 20:18:21.280432"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:21.281433"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:18:21.281433"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:18:21.281433"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:18:21.281433"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:18:21.282433"], ["score", 15], ["updated_at", "2015-02-07 20:18:21.282433"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:18:21.283434"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:18:21.283434"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:18:21.284435"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:18:21.284435"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:18:21.285436"], ["score", 7], ["updated_at", "2015-02-07 20:18:21.285436"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:21.286437"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:18:21.286437"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:18:21.286437"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:18:21.286437"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:18:21.287438"], ["score", 9], ["updated_at", "2015-02-07 20:18:21.287438"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:18:21.288439"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:18:21.288439"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:18:21.289440"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:18:21.289440"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:18:21.290441"], ["score", 25], ["updated_at", "2015-02-07 20:18:21.290441"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:21.296447"], ["password_digest", "$2a$04$C3sH.fbHfrG4IN0bEInM0OvUHpjbdGMGi92Y1YAo3ZmZ0mj4cKqNm"], ["updated_at", "2015-02-07 20:18:21.296447"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:21.302452"], ["password_digest", "$2a$04$XBhaUU1V.4YibsUXXNC6cuWGR7R6/whFGLGOoGjRBtEvj3Fd3FvNG"], ["updated_at", "2015-02-07 20:18:21.302452"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:18:45.076329"], ["password_digest", "$2a$04$lzop4TUHbrz.UxCinqnqp.M0C4S0eUtF0mBthgISQo/dZDOgk1Chu"], ["updated_at", "2015-02-07 20:18:45.076329"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:18:45.085338"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:18:45.085338"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:18:45.091343"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:18:45.091343"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:18:45.097349"], ["score", 10], ["updated_at", "2015-02-07 20:18:45.097349"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:12.252440"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:19:12.252440"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:12.294480"], ["password_digest", "$2a$04$tbEfQj3rVzQevHOzTQn85eemPzbkXRhu7fQWs4SRuFFW82xkhzOam"], ["updated_at", "2015-02-07 20:19:12.294480"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:12.300486"], ["password_digest", "$2a$04$xA7WebC55hIMpPK8bhb14.PqItBvEU5AjuaRef9x.dSa8mVCCaSaK"], ["updated_at", "2015-02-07 20:19:12.300486"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:19:12.315500"], ["score", 10], ["updated_at", "2015-02-07 20:19:12.315500"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:19:12.321506"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:19:12.322507"], ["score", 20], ["updated_at", "2015-02-07 20:19:12.322507"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 20:19:12.323508"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:12.329514"], ["password_digest", "$2a$04$OAk8RAw.49izp.DsWzJcP.GT5W0ELTbVU/t8BAayONKu9lVWZBv4q"], ["updated_at", "2015-02-07 20:19:12.329514"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:12.336520"], ["password_digest", "$2a$04$5V.OI97uU8UuozpPywyPE.65EOxzp7A6Egqh1wC71Pr3ohNqdAQNy"], ["updated_at", "2015-02-07 20:19:12.336520"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:19:12.343527"], ["password_digest", "$2a$04$CyyRH6vHku/igyAxdNiUBOgYN8MOxXhwgRf3FdG7rB2m9X3cxLIN6"], ["updated_at", "2015-02-07 20:19:12.343527"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:12.349533"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:19:12.349533"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:19:12.351535"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:19:12.351535"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:19:12.353537"], ["score", 10], ["updated_at", "2015-02-07 20:19:12.353537"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:19:12.360543"], ["password_digest", "$2a$04$CBb.BDwNFF91yrjaMTtg3ulrf49JD.nuaVIAlNtlB0HmhnhsZxlaO"], ["updated_at", "2015-02-07 20:19:12.360543"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:12.362545"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:19:12.362545"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:19:12.364547"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:19:12.364547"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:19:12.365548"], ["score", 10], ["updated_at", "2015-02-07 20:19:12.365548"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:19:12.365548"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:19:12.365548"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:19:12.366549"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:19:12.366549"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:19:12.367550"], ["score", 20], ["updated_at", "2015-02-07 20:19:12.367550"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:12.368551"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:19:12.368551"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:19:12.369552"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:19:12.369552"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:19:12.370553"], ["score", 15], ["updated_at", "2015-02-07 20:19:12.370553"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:19:12.370553"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:19:12.370553"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:19:12.371554"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:19:12.371554"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:19:12.372555"], ["score", 7], ["updated_at", "2015-02-07 20:19:12.372555"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:12.373556"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:19:12.373556"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:19:12.374556"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:19:12.374556"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:19:12.374556"], ["score", 9], ["updated_at", "2015-02-07 20:19:12.374556"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:19:12.375558"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:19:12.375558"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:19:12.376558"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:19:12.376558"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:19:12.377560"], ["score", 25], ["updated_at", "2015-02-07 20:19:12.377560"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:12.383565"], ["password_digest", "$2a$04$aPdrtu.NkIyareai9V9Yg.Zmr9b0sA7Z3vqmRA.bAxZrgHx8gLVYi"], ["updated_at", "2015-02-07 20:19:12.383565"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:12.388570"], ["password_digest", "$2a$04$lrKYqE5hAprJ5RdvwLznI.iGLhfp.mZEa3UVCcad.oVds0l9WTX3O"], ["updated_at", "2015-02-07 20:19:12.388570"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:19:14.553462"], ["password_digest", "$2a$04$Ot77xHMW4VDm4.g1ZLZrku6WxO4nFzNBzDDXgCRWnuxH1A/0liW0W"], ["updated_at", "2015-02-07 20:19:14.553462"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:19:14.561470"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:19:14.561470"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:19:14.566474"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:19:14.566474"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:19:14.573481"], ["score", 10], ["updated_at", "2015-02-07 20:19:14.573481"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:23:12.198349"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:23:12.198349"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:23:12.241389"], ["password_digest", "$2a$04$9rei.bxNBPkjgrPu4ltJ1uauiFcrQBd5jwOS6oJ87UpOdaY1Vc5T2"], ["updated_at", "2015-02-07 20:23:12.241389"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:23:12.248396"], ["password_digest", "$2a$04$CfYvYa1FoQxEt7yVJJB0..KU6pt565xJqdQiVDEmX85/LVubUC9dC"], ["updated_at", "2015-02-07 20:23:12.248396"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:23:12.264412"], ["score", 10], ["updated_at", "2015-02-07 20:23:12.264412"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:23:12.274421"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:23:12.276423"], ["score", 20], ["updated_at", "2015-02-07 20:23:12.276423"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:23:23.529238"], ["password_digest", "$2a$04$xtclVoZr5M.eFvszMkn9k.zLnuD2orkKOQe86/lGXgHnVMLpN0afG"], ["updated_at", "2015-02-07 20:23:23.529238"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (30.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:23:23.566273"], ["password_digest", "$2a$04$NLXMmoRKdAD.7jDs3GXTKO8Eed8K3NdI56eD./uRukfi8XcxQ0z32"], ["updated_at", "2015-02-07 20:23:23.566273"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:23:23.573280"], ["password_digest", "$2a$04$l07lQV4RNt3HWBWtnhAIQeC3vkjaHyhy7BP8uM6J9AA8/6PsBOiWS"], ["updated_at", "2015-02-07 20:23:23.573280"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:23:23.579285"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:23:23.579285"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:23:23.583289"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:23:23.583289"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:23:23.584290"], ["score", 10], ["updated_at", "2015-02-07 20:23:23.584290"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (1.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:23:23.591297"], ["password_digest", "$2a$04$DtBU84yZy0lp5HP1ScVclOPinl7njKDLpSN7k5dyIXxX3aD9/XS7u"], ["updated_at", "2015-02-07 20:23:23.591297"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:23:23.593299"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:23:23.593299"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:23:23.594300"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:23:23.594300"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:23:23.595301"], ["score", 10], ["updated_at", "2015-02-07 20:23:23.595301"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:23:23.596302"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:23:23.596302"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:23:23.597302"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:23:23.597302"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:23:23.598303"], ["score", 20], ["updated_at", "2015-02-07 20:23:23.598303"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:23:23.599305"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:23:23.599305"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:23:23.599305"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:23:23.599305"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:23:23.600306"], ["score", 15], ["updated_at", "2015-02-07 20:23:23.600306"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:23:23.601307"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:23:23.601307"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:23:23.602308"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:23:23.602308"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:23:23.603308"], ["score", 7], ["updated_at", "2015-02-07 20:23:23.603308"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:23:23.604310"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:23:23.604310"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:23:23.605310"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:23:23.605310"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:23:23.606311"], ["score", 9], ["updated_at", "2015-02-07 20:23:23.606311"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:23:23.607312"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:23:23.607312"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:23:23.607312"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:23:23.607312"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:23:23.608313"], ["score", 25], ["updated_at", "2015-02-07 20:23:23.608313"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:23:23.615319"], ["password_digest", "$2a$04$gznuxy8quyGbjQ1KV8v09.r3KtXucCjYeU8ZCPfQDgNlD6N56W.zu"], ["updated_at", "2015-02-07 20:23:23.615319"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:23:23.619324"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:23:23.619324"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:23:32.411362"], ["password_digest", "$2a$04$dRj2T5JCKUjk4piezND2ueJhQTNRKPoVxPZbo.fBqj81.9rMkRWDK"], ["updated_at", "2015-02-07 20:23:32.411362"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:23:59.774846"], ["password_digest", "$2a$04$OF2aI5IaTLEsTS9hIRuBh.lLanZyZ43aeZgm5X/VtzigvycQZHhCi"], ["updated_at", "2015-02-07 20:23:59.774846"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:23:59.783855"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:23:59.783855"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:23:59.789861"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:23:59.789861"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:23:59.795866"], ["score", 10], ["updated_at", "2015-02-07 20:23:59.795866"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:24:14.057191"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:24:14.057191"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:24:14.099231"], ["password_digest", "$2a$04$RyTzddxFA0yGHwPOYtB5suDbK.aettiGnh0q01NgOgDCvwHr6WRpG"], ["updated_at", "2015-02-07 20:24:14.099231"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:24:14.107239"], ["password_digest", "$2a$04$c6.T07TUJXCmfqEmAePpm.YwMiAkmvAlzq7UAQrSDFJXKPFMwSpbG"], ["updated_at", "2015-02-07 20:24:14.107239"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:24:14.122253"], ["score", 10], ["updated_at", "2015-02-07 20:24:14.122253"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:24:14.128259"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:24:14.129260"], ["score", 20], ["updated_at", "2015-02-07 20:24:14.129260"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 20:24:14.130260"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:24:14.136266"], ["password_digest", "$2a$04$oGsK4WTbvOrdO0f9pY3iGeFB1YIHOrnc6c35q58B7fJoJQIA3QSEe"], ["updated_at", "2015-02-07 20:24:14.136266"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:24:14.143273"], ["password_digest", "$2a$04$tjZP5meRFn2r8.MQmsq7xeU.DxVpvjPSD7mDCHNhe8zd0z6EK7FX6"], ["updated_at", "2015-02-07 20:24:14.143273"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:24:14.150280"], ["password_digest", "$2a$04$S7yFwPtOae8jDb07p/DvVOBWrYx1zkuHYLzGSwiysb7hnZwjObkxi"], ["updated_at", "2015-02-07 20:24:14.150280"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:24:14.156286"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:24:14.156286"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:24:14.159288"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:24:14.159288"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:24:14.161290"], ["score", 10], ["updated_at", "2015-02-07 20:24:14.161290"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:24:14.167296"], ["password_digest", "$2a$04$RNsvjA43QtATJazMXdH2VO9HTXXpITo8zyLCyedqt/7RfOFPRF0mG"], ["updated_at", "2015-02-07 20:24:14.167296"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:24:14.169298"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:24:14.169298"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:24:14.170299"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:24:14.170299"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:24:14.171300"], ["score", 10], ["updated_at", "2015-02-07 20:24:14.171300"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:24:14.172301"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:24:14.172301"], ["year", 1900]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:24:14.173302"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:24:14.173302"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:24:14.174303"], ["score", 20], ["updated_at", "2015-02-07 20:24:14.174303"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:24:14.175303"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:24:14.175303"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:24:14.175303"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:24:14.175303"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:24:14.176304"], ["score", 15], ["updated_at", "2015-02-07 20:24:14.176304"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:24:14.177305"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:24:14.177305"], ["year", 1900]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:24:14.178307"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:24:14.178307"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:24:14.179307"], ["score", 7], ["updated_at", "2015-02-07 20:24:14.179307"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:24:14.180308"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:24:14.180308"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:24:14.180308"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:24:14.180308"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:24:14.181309"], ["score", 9], ["updated_at", "2015-02-07 20:24:14.181309"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:24:14.182310"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:24:14.182310"], ["year", 1900]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:24:14.183311"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:24:14.183311"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:24:14.184312"], ["score", 25], ["updated_at", "2015-02-07 20:24:14.184312"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:24:14.192320"], ["password_digest", "$2a$04$lVVfDV56Ir3Sr7LSnG9pwe0vzP.eiVPxAdfIlWW7MXayuQpVKbt2C"], ["updated_at", "2015-02-07 20:24:14.192320"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:24:14.196324"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:24:14.196324"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:24:17.820839"], ["password_digest", "$2a$04$0/TTYsLVJRVNbWh/78NGa.Z677.Ansp3r2lc8LDHryoVFX.fJYus6"], ["updated_at", "2015-02-07 20:24:17.820839"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:24:17.847865"], ["password_digest", "$2a$04$R7t7.xNKnGw/kB.AIt.AjOknUz2QprijWQHNQQM3GK5y543q6XBe."], ["updated_at", "2015-02-07 20:24:17.847865"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:24:17.858876"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:24:17.858876"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:24:17.864881"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:24:17.864881"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:24:17.870886"], ["score", 10], ["updated_at", "2015-02-07 20:24:17.870886"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.079308"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:27:25.079308"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (40.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.122349"], ["password_digest", "$2a$04$Kv4KN72SOkk3BinlpWze4eXlESqlNox.FQ4RN1IClwuiDvpJnj49m"], ["updated_at", "2015-02-07 20:27:25.122349"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (25.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.169394"], ["password_digest", "$2a$04$2LN57RCjesVpgvNuSo4pA.Jp84w3Moh0gTNCDgOJ9kqcdDosvwG.C"], ["updated_at", "2015-02-07 20:27:25.169394"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (15.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:27:25.208432"], ["score", 10], ["updated_at", "2015-02-07 20:27:25.208432"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:27:25.229452"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:27:25.231453"], ["score", 20], ["updated_at", "2015-02-07 20:27:25.231453"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (15.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.238460"], ["password_digest", "$2a$04$QBG3vquEpm4JrWJukTuZ9uZge2fURUwb5kywdcwIzUIw5ey/UAdlu"], ["updated_at", "2015-02-07 20:27:25.238460"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.260481"], ["password_digest", "$2a$04$MXYcCUGCyQY9.ZwWIesTeedpM5Xf3aIiSvA0dn4s/gtAP99Cm4lAO"], ["updated_at", "2015-02-07 20:27:25.260481"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:27:25.267488"], ["password_digest", "$2a$04$4b8GQFye6QBPwnHANoe7luZDyGb3PxcKDqAJIkDnhF0AKYE0IBRsK"], ["updated_at", "2015-02-07 20:27:25.267488"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.272492"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:27:25.272492"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:27:25.275496"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:27:25.275496"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:27:25.277497"], ["score", 10], ["updated_at", "2015-02-07 20:27:25.277497"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:27:25.284504"], ["password_digest", "$2a$04$Jeai6T4Wk4TL2yznrvK3Y.Doh8t9cQm8qW5PFYFzYBgXos5hlsR26"], ["updated_at", "2015-02-07 20:27:25.284504"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.285505"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:27:25.285505"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:27:25.287507"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:27:25.287507"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:27:25.288508"], ["score", 10], ["updated_at", "2015-02-07 20:27:25.288508"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:27:25.289508"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:27:25.289508"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:27:25.290510"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:27:25.290510"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:27:25.290510"], ["score", 20], ["updated_at", "2015-02-07 20:27:25.290510"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.291511"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:27:25.291511"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:27:25.292512"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:27:25.292512"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:27:25.293512"], ["score", 15], ["updated_at", "2015-02-07 20:27:25.293512"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:27:25.294513"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:27:25.294513"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:27:25.295515"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:27:25.295515"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:27:25.296515"], ["score", 7], ["updated_at", "2015-02-07 20:27:25.296515"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.297516"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:27:25.297516"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:27:25.297516"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:27:25.297516"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:27:25.298517"], ["score", 9], ["updated_at", "2015-02-07 20:27:25.298517"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:27:25.299518"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:27:25.299518"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:27:25.300519"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:27:25.300519"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:27:25.301520"], ["score", 25], ["updated_at", "2015-02-07 20:27:25.301520"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.308527"], ["password_digest", "$2a$04$HMUYrv.2ZZGQumfJU94mHe3DbWXCEo2RJEbKVCxwsUlh9qwXYGsfG"], ["updated_at", "2015-02-07 20:27:25.308527"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.314533"], ["password_digest", "$2a$04$b7AkN4EeeObCyqqumMIobOwIC2r72C4E3jmu8mzzNjf9ARsO3SdcC"], ["updated_at", "2015-02-07 20:27:25.314533"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:27:25.319537"], ["password_digest", "$2a$04$4c0tLw7fhXIdeM5B5jFrsel1.I8xsoqC8nENZgZ64MXD4aW/X8HMW"], ["updated_at", "2015-02-07 20:27:25.319537"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:27:25.321539"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:27:25.321539"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 20:27:25.322540"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:27:25.322540"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 20:27:25.323541"], ["score", 10], ["updated_at", "2015-02-07 20:27:25.323541"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:27.652184"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:28:27.652184"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:27.693223"], ["password_digest", "$2a$04$KU3ckpuz21EG/wIPp9t0UearHgSlODelOrtF39d2gSD5G4ZowDk9a"], ["updated_at", "2015-02-07 20:28:27.693223"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:27.700230"], ["password_digest", "$2a$04$Db5jZunkAFKhs2s3uL8w2uEEusBvqD/FbHL70wow23I3FCPQSMKIC"], ["updated_at", "2015-02-07 20:28:27.700230"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:28:27.714243"], ["score", 10], ["updated_at", "2015-02-07 20:28:27.714243"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:28:27.720249"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:28:27.721250"], ["score", 20], ["updated_at", "2015-02-07 20:28:27.721250"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 20:28:27.722252"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:27.729258"], ["password_digest", "$2a$04$VLu2D0WhKnnxi1kGBig6KudcKgzzxPcwW./mUJbZ796EjHhrZSfJO"], ["updated_at", "2015-02-07 20:28:27.729258"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:27.735263"], ["password_digest", "$2a$04$2Ln.v2H9uuJ4huXMjFTkGO9xAy1lV2IIhdo6VSXNfCd1To44IAoKe"], ["updated_at", "2015-02-07 20:28:27.735263"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:28:27.742270"], ["password_digest", "$2a$04$jK79A12M4cqyyuD.l1v43uA//M3Ljy0yLle9FZp8m6ose8eEXVmQa"], ["updated_at", "2015-02-07 20:28:27.742270"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:27.748276"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:28:27.748276"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:28:27.750278"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:28:27.750278"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:28:27.752279"], ["score", 10], ["updated_at", "2015-02-07 20:28:27.752279"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:28:27.758285"], ["password_digest", "$2a$04$vdpIRfD6ktu7AkX2/9gRZeRds.pj34Sqp1JTbbJpdI2mCRV1jkxKy"], ["updated_at", "2015-02-07 20:28:27.758285"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:27.760287"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:28:27.760287"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:28:27.761288"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:28:27.761288"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:28:27.762289"], ["score", 10], ["updated_at", "2015-02-07 20:28:27.762289"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:28:27.764291"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:28:27.764291"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:28:27.765292"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:28:27.765292"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:28:27.766293"], ["score", 20], ["updated_at", "2015-02-07 20:28:27.766293"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:27.766293"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:28:27.766293"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:28:27.767294"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:28:27.767294"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:28:27.768295"], ["score", 15], ["updated_at", "2015-02-07 20:28:27.768295"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:28:27.769296"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:28:27.769296"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:28:27.770296"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:28:27.770296"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:28:27.770296"], ["score", 7], ["updated_at", "2015-02-07 20:28:27.770296"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:27.771298"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:28:27.771298"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:28:27.772299"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:28:27.772299"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:28:27.773300"], ["score", 9], ["updated_at", "2015-02-07 20:28:27.773300"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:28:27.774301"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:28:27.774301"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:28:27.775302"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:28:27.775302"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:28:27.776302"], ["score", 25], ["updated_at", "2015-02-07 20:28:27.776302"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:27.782308"], ["password_digest", "$2a$04$NkzqHvfY1pH6FDY0T5GybezjngqO0q4/BBP8CJf52wsjZF6It7dhu"], ["updated_at", "2015-02-07 20:28:27.782308"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:33.589863"], ["password_digest", "$2a$04$PVY8l9.sPUVXG0wbTMr9.e2yAIU8CTy2VUvsGqUlBJ1Fzah6nQRWO"], ["updated_at", "2015-02-07 20:28:33.589863"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:28:37.997060"], ["password_digest", "$2a$04$rz5QdSJvsve12KFxW5R89eowb8M6xwR0y/gP9/lIUfTta2sN/cclm"], ["updated_at", "2015-02-07 20:28:37.997060"], ["username", "Pekka"]]
  [1m[36m (7.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:28:38.013076"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:28:38.013076"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 20:28:38.020082"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:28:38.020082"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 20:28:38.030092"], ["score", 10], ["updated_at", "2015-02-07 20:28:38.030092"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:29:19.580036"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:29:19.580036"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:29:19.623078"], ["password_digest", "$2a$04$HykmjwKGC6ZXamaWZU5kluVCG3AkdbaaftG2aFD6WRjThBYfAOnDK"], ["updated_at", "2015-02-07 20:29:19.623078"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:29:19.630084"], ["password_digest", "$2a$04$FGqnrKWjzKyWD6CHa9yfAegSD/.qokx8pdWMrx7YgK9G2uXTgCiwa"], ["updated_at", "2015-02-07 20:29:19.630084"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:29:19.644098"], ["score", 10], ["updated_at", "2015-02-07 20:29:19.644098"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:29:19.650103"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:29:19.652106"], ["score", 20], ["updated_at", "2015-02-07 20:29:19.652106"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:29:19.659112"], ["password_digest", "$2a$04$YuhWbcLkmIdXfEhScYW/e.bPZndwGysHBbNx43N3QUepSSoRJdPJ."], ["updated_at", "2015-02-07 20:29:19.659112"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:29:19.665117"], ["password_digest", "$2a$04$1J5EgITPrlegyREftYTEW.mytFlgX8ex6ruwhKyyzSf.yrIBsUmvm"], ["updated_at", "2015-02-07 20:29:19.665117"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:29:19.672124"], ["password_digest", "$2a$04$OPlu9ezc3P3aYshw3Kzcg.9t9sS9WROSURJNtTgXCCba94HQeKQeW"], ["updated_at", "2015-02-07 20:29:19.672124"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:29:19.678130"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:29:19.678130"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:29:19.680132"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:29:19.680132"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:29:19.682134"], ["score", 10], ["updated_at", "2015-02-07 20:29:19.682134"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:29:19.688139"], ["password_digest", "$2a$04$a0BwevqrLUQjfZTHOTxv8OoFYQkIQnD5HgrhwGVpCPn2lfOSpvfCO"], ["updated_at", "2015-02-07 20:29:19.688139"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:29:19.690141"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:29:19.690141"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:29:19.691143"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:29:19.691143"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:29:19.692143"], ["score", 10], ["updated_at", "2015-02-07 20:29:19.692143"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:29:19.693144"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:29:19.693144"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:29:19.694145"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:29:19.694145"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:29:19.695146"], ["score", 20], ["updated_at", "2015-02-07 20:29:19.695146"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:29:19.696147"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:29:19.696147"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:29:19.697148"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:29:19.697148"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:29:19.697148"], ["score", 15], ["updated_at", "2015-02-07 20:29:19.697148"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:29:19.698149"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:29:19.698149"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:29:19.699150"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:29:19.699150"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:29:19.700151"], ["score", 7], ["updated_at", "2015-02-07 20:29:19.700151"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:29:19.701152"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:29:19.701152"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:29:19.701152"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:29:19.701152"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:29:19.702153"], ["score", 9], ["updated_at", "2015-02-07 20:29:19.702153"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:29:19.703154"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:29:19.703154"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:29:19.704155"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:29:19.704155"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:29:19.705156"], ["score", 25], ["updated_at", "2015-02-07 20:29:19.705156"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:29:19.711161"], ["password_digest", "$2a$04$/JmSHF6eRFyQXsct3AzvzuJ4Qwec1iXqmw1XQEBQ2GyVxZWesfvYG"], ["updated_at", "2015-02-07 20:29:19.711161"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:29:59.050075"], ["password_digest", "$2a$04$TD7/y4cqjIOJDOG/F90p1.jL/b7xPMWLP0snNEl.xSNIvxXPi81aW"], ["updated_at", "2015-02-07 20:29:59.050075"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:30:00.320641"], ["password_digest", "$2a$04$Rh55DSfkjLphVE/asHlfSOzPBlI3YigBbWgr726iVtT7EWuRg13Ge"], ["updated_at", "2015-02-07 20:30:00.320641"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:30:00.328648"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:30:00.328648"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 20:30:00.334654"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:30:00.334654"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 20:30:00.340659"], ["score", 10], ["updated_at", "2015-02-07 20:30:00.340659"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.813086"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:49:52.813086"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.855065"], ["password_digest", "$2a$04$/8iHPo7vHomkRP5yr5x7Gui5GNELhKYwxoZB6XrrN4S9aDee5dAL."], ["updated_at", "2015-02-07 20:49:52.855065"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.862071"], ["password_digest", "$2a$04$h1ztzIOkW1FcZaNSe/xpvOfF06Z/ymghO/xCC8kyKw5Q75KJnecwK"], ["updated_at", "2015-02-07 20:49:52.862071"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:49:52.877086"], ["score", 10], ["updated_at", "2015-02-07 20:49:52.877086"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:49:52.884092"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:49:52.886094"], ["score", 20], ["updated_at", "2015-02-07 20:49:52.886094"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.893101"], ["password_digest", "$2a$04$SRPaSo.XJ7LvvSa70Y.o3.S4TjU4rHGnVJUYBRbKw2ieyOXMrhc8C"], ["updated_at", "2015-02-07 20:49:52.893101"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.900107"], ["password_digest", "$2a$04$xVtN8sc.X1lr439sBXNB7.zZXBl9jNZO4BREz9V1IShGUnXvQb/NG"], ["updated_at", "2015-02-07 20:49:52.900107"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:49:52.906113"], ["password_digest", "$2a$04$pNruAP2NX2O9qASW9IWVHuorVwNd.FRcJL3aO4QEu6Q1fcl8200re"], ["updated_at", "2015-02-07 20:49:52.906113"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.912119"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:49:52.912119"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:49:52.915122"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:49:52.915122"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:49:52.916123"], ["score", 10], ["updated_at", "2015-02-07 20:49:52.916123"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:49:52.923129"], ["password_digest", "$2a$04$mXqNlHTneFu1Na4EQr1wyu/TzBzDe.7nXnfidTNtpI5z4HCOxZV0O"], ["updated_at", "2015-02-07 20:49:52.923129"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.925131"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:49:52.925131"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:49:52.927133"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:49:52.927133"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:49:52.927133"], ["score", 10], ["updated_at", "2015-02-07 20:49:52.927133"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:49:52.928134"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:49:52.928134"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:49:52.929135"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:49:52.929135"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:49:52.930136"], ["score", 20], ["updated_at", "2015-02-07 20:49:52.930136"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.931137"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:49:52.931137"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:49:52.932138"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:49:52.932138"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:49:52.932138"], ["score", 15], ["updated_at", "2015-02-07 20:49:52.932138"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:49:52.933139"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:49:52.933139"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:49:52.934140"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:49:52.934140"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:49:52.935141"], ["score", 7], ["updated_at", "2015-02-07 20:49:52.935141"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.936142"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:49:52.936142"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:49:52.937143"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:49:52.937143"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:49:52.938144"], ["score", 9], ["updated_at", "2015-02-07 20:49:52.938144"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:49:52.938144"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:49:52.938144"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:49:52.939145"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:49:52.939145"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:49:52.940146"], ["score", 25], ["updated_at", "2015-02-07 20:49:52.940146"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.947152"], ["password_digest", "$2a$04$KeUC5soYL9ZPFP0..HKNmuzyYbfUSJdqZdPRux1KH8XFvp5cGOcOW"], ["updated_at", "2015-02-07 20:49:52.947152"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.952157"], ["password_digest", "$2a$04$fj/dLl/54pZhmuUp0w7ILOD0QWnG3Yw1vUcZPUZQfIEBbBwlTL80."], ["updated_at", "2015-02-07 20:49:52.952157"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:49:52.958163"], ["password_digest", "$2a$04$R0dI3B3YCzuRIoty/eR.9.Iw6bBKmiRmAjueit3tVjOB3T.nQv3hW"], ["updated_at", "2015-02-07 20:49:52.958163"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.960165"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:49:52.960165"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:49:52.961166"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:49:52.961166"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:49:52.963168"], ["score", 10], ["updated_at", "2015-02-07 20:49:52.963168"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:49:52.975179"], ["password_digest", "$2a$04$u3qwZwj6llgRKX/g.tTf9Oq6HaIOjo63vnysCHYlTktFeEkb3Q2GG"], ["updated_at", "2015-02-07 20:49:52.975179"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:49:52.982186"], ["password_digest", "$2a$04$R.mALImk.bG7xa4GbjgOgO9PftdbxXGzLCPf2moxR007bLoBAlBuW"], ["updated_at", "2015-02-07 20:49:52.982186"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:49:52.988191"], ["password_digest", "$2a$04$RjE5y57L7Wq/oHLVm8N8e.B8yLAivjZeEzSTjInjOezbWMZ3yb1EG"], ["updated_at", "2015-02-07 20:49:52.988191"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:49:52.990193"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:49:52.990193"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 20:49:52.991194"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:49:52.991194"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 20:49:52.992195"], ["score", 10], ["updated_at", "2015-02-07 20:49:52.992195"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.159337"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:21.159337"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.203379"], ["password_digest", "$2a$04$Jg5lRb5ECjCC4wYqjeCXEuLEsLsl5ewaQInlI/sFabToTFtzfhbc."], ["updated_at", "2015-02-07 20:50:21.203379"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.210385"], ["password_digest", "$2a$04$F8HFH9aqwL7zp4SqZj2HS.ZG7NrJinzX3XUdbh.g8oHnyYroo2.8G"], ["updated_at", "2015-02-07 20:50:21.210385"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:21.225400"], ["score", 10], ["updated_at", "2015-02-07 20:50:21.225400"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:50:21.231406"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:21.232406"], ["score", 20], ["updated_at", "2015-02-07 20:50:21.232406"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 20:50:21.233407"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.240414"], ["password_digest", "$2a$04$LSMzlYiQoCYCeRQakATuQ.va.wD8eBqlvkSewezHrXpKf0cNx75Hy"], ["updated_at", "2015-02-07 20:50:21.240414"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.248421"], ["password_digest", "$2a$04$rxQPBmsQze7kZtn3GLNBau1SctUySc/hyUn2oNmK/ReopBTYdm2Y."], ["updated_at", "2015-02-07 20:50:21.248421"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:21.255428"], ["password_digest", "$2a$04$/c/OYJUobLLt8tjJM/lFDuX2LW0DnQm2Shqma3ZYNsNyeT9mJzWn2"], ["updated_at", "2015-02-07 20:50:21.255428"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.261434"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:21.261434"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:50:21.264437"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:21.264437"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:50:21.266439"], ["score", 10], ["updated_at", "2015-02-07 20:50:21.266439"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:21.272444"], ["password_digest", "$2a$04$nVvf/mrDv1WF1GXD7Cafbul9WN4m5Vn.y39bdAYzpUtX83X1xVGvW"], ["updated_at", "2015-02-07 20:50:21.272444"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.274446"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:21.274446"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:50:21.275447"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:21.275447"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:50:21.276448"], ["score", 10], ["updated_at", "2015-02-07 20:50:21.276448"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:21.277449"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:21.277449"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:50:21.278450"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:21.278450"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:50:21.279451"], ["score", 20], ["updated_at", "2015-02-07 20:50:21.279451"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.280452"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:21.280452"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:50:21.281453"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:21.281453"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:50:21.282454"], ["score", 15], ["updated_at", "2015-02-07 20:50:21.282454"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:21.282454"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:21.282454"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:50:21.284456"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:21.284456"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:50:21.285457"], ["score", 7], ["updated_at", "2015-02-07 20:50:21.285457"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.286458"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:21.286458"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:50:21.287459"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:21.287459"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:50:21.288460"], ["score", 9], ["updated_at", "2015-02-07 20:50:21.288460"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:21.288460"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:21.288460"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:50:21.289461"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:21.289461"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:50:21.290461"], ["score", 25], ["updated_at", "2015-02-07 20:50:21.290461"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.297468"], ["password_digest", "$2a$04$eu03x0Mkzmnh6K1fHdodIeUl5Of4yApTufNZAX0/lumbE2zBMDNyS"], ["updated_at", "2015-02-07 20:50:21.297468"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.303474"], ["password_digest", "$2a$04$KLk/TR3O1hXKV7EXoSlsne.QJZ4rffDfC9lvL9VBtocWY6o7G4i7S"], ["updated_at", "2015-02-07 20:50:21.303474"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:21.308478"], ["password_digest", "$2a$04$5CTYtETJ3UZryqoaN3fqW.qBV2tT56BhAC1FhvrkTkuwHhyibRFQG"], ["updated_at", "2015-02-07 20:50:21.308478"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.310481"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:21.310481"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:50:21.311482"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:21.311482"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:50:21.312483"], ["score", 10], ["updated_at", "2015-02-07 20:50:21.312483"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:21.325495"], ["password_digest", "$2a$04$nijHJFcHdzc36FOp6USHe.o/kET270jchIEZQMdobL84FEP7Bi/66"], ["updated_at", "2015-02-07 20:50:21.325495"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:21.330500"], ["password_digest", "$2a$04$2cNuhvHK0gPzbbxh7eGDxOrDF/QNzDkDbLy4zQT48REJQb3Fgy01i"], ["updated_at", "2015-02-07 20:50:21.330500"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:21.336505"], ["password_digest", "$2a$04$T0/l8/zYP7dcYINk0bsetu66miMeidNwhz58FE1iyIhmxUjaLiJbi"], ["updated_at", "2015-02-07 20:50:21.336505"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:21.338507"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:21.338507"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 20:50:21.339508"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:21.339508"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 20:50:21.340509"], ["score", 10], ["updated_at", "2015-02-07 20:50:21.340509"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.036109"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:54.036109"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.085155"], ["password_digest", "$2a$04$Zr.2PRixch2k8p6PMRcXXO1VICOO1uNXfqMIQO/itMVysSk3DkZQu"], ["updated_at", "2015-02-07 20:50:54.085155"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.093163"], ["password_digest", "$2a$04$//vBwX7XotHmfrsEk/AuyO9ZXDXb6VnKB0GcwUGNBBgSpcb2JfbPm"], ["updated_at", "2015-02-07 20:50:54.093163"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:54.112182"], ["score", 10], ["updated_at", "2015-02-07 20:50:54.112182"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 20:50:54.118187"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:54.120189"], ["score", 20], ["updated_at", "2015-02-07 20:50:54.120189"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 20:50:54.121190"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.129197"], ["password_digest", "$2a$04$hwdeIVUtzUtTD9FP6Y4LAOdh69VD0S3lO2HhkKBHKjVQTmVGZMg2S"], ["updated_at", "2015-02-07 20:50:54.129197"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.138207"], ["password_digest", "$2a$04$v3An1S3z4/XFTeTv6q3heOhw9tnPjmEXrGh2pAwKryEux0jdytIRy"], ["updated_at", "2015-02-07 20:50:54.138207"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:54.145213"], ["password_digest", "$2a$04$tBPGkwXqNY695jHZNVb77.A0hq4p8nrVyDycxtEf8O0xAT3O7gehm"], ["updated_at", "2015-02-07 20:50:54.145213"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.152220"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:54.152220"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:50:54.159226"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:54.159226"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:50:54.161228"], ["score", 10], ["updated_at", "2015-02-07 20:50:54.161228"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:54.168235"], ["password_digest", "$2a$04$Nw4YyIJicdKMFHmNnCqoiu5W1ZZvqx4jf40n70iPrbhEoabOtTnmi"], ["updated_at", "2015-02-07 20:50:54.168235"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.170237"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:54.170237"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:50:54.172239"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:54.172239"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:50:54.174241"], ["score", 10], ["updated_at", "2015-02-07 20:50:54.174241"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:54.175241"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:54.175241"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 20:50:54.175241"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:54.175241"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 20:50:54.176243"], ["score", 20], ["updated_at", "2015-02-07 20:50:54.176243"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.177243"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:54.177243"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 20:50:54.178244"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:54.178244"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 20:50:54.179245"], ["score", 15], ["updated_at", "2015-02-07 20:50:54.179245"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:54.180247"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:54.180247"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 20:50:54.180247"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:54.180247"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 20:50:54.181247"], ["score", 7], ["updated_at", "2015-02-07 20:50:54.181247"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.182248"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:54.182248"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 20:50:54.183249"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:54.183249"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 20:50:54.184251"], ["score", 9], ["updated_at", "2015-02-07 20:50:54.184251"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:54.185251"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:54.185251"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 20:50:54.185251"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:54.185251"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 20:50:54.186252"], ["score", 25], ["updated_at", "2015-02-07 20:50:54.186252"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.194260"], ["password_digest", "$2a$04$HPyRLS0ymA/.qMMKWL6RIO5d8RWzOIv6BTGjbdXcHqLyNu84I1qr2"], ["updated_at", "2015-02-07 20:50:54.194260"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.200266"], ["password_digest", "$2a$04$pjGgcke8R7ZeN1iNgxTbQO88FB5YivDtwy7HG26K4/.EGf7m62Hvu"], ["updated_at", "2015-02-07 20:50:54.200266"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:54.206271"], ["password_digest", "$2a$04$zKqzg2u1ABbe/ZWeJfeZT.aDeyzMZIkJZu2ZD8oFMu/1OSWyc06O2"], ["updated_at", "2015-02-07 20:50:54.206271"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.209275"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:54.209275"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 20:50:54.211276"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:54.211276"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 20:50:54.212277"], ["score", 10], ["updated_at", "2015-02-07 20:50:54.212277"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:54.225289"], ["password_digest", "$2a$04$7mx88aZKtRLTVS9mrFXHbeOmDmVXVjdVWz/r7IbiLU2zVqLpeKMhG"], ["updated_at", "2015-02-07 20:50:54.225289"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:54.231295"], ["password_digest", "$2a$04$bQ3WHAYlzL/t6YYbM2togeXN9dkgh6nNE9qqZrCd6Bpm4zqVRhwRW"], ["updated_at", "2015-02-07 20:50:54.231295"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 20:50:54.238302"], ["password_digest", "$2a$04$VVbxx831EJdB2XY5dIsS..f.NHqeSAGbO5b9H.GakraK0nbziwWAS"], ["updated_at", "2015-02-07 20:50:54.238302"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 20:50:54.240303"], ["name", "anonymous"], ["updated_at", "2015-02-07 20:50:54.240303"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 20:50:54.241304"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 20:50:54.241304"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 20:50:54.242305"], ["score", 10], ["updated_at", "2015-02-07 20:50:54.242305"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:00:33 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 1594ms (Views: 1580.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.102444"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:00:35.102444"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.146485"], ["password_digest", "$2a$04$lFuVNlLd0VI8h3o0zyg7/OcbRR/bfBlZt8t5SULCLlT2TSf7YOqXu"], ["updated_at", "2015-02-07 21:00:35.146485"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.153492"], ["password_digest", "$2a$04$jTr4ML9c6XiNRhs9MGBFKendBwRMzhoZoITMULBq7AmICOjrNuo2e"], ["updated_at", "2015-02-07 21:00:35.153492"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:00:35.166504"], ["score", 10], ["updated_at", "2015-02-07 21:00:35.166504"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 21:00:35.172510"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:00:35.174512"], ["score", 20], ["updated_at", "2015-02-07 21:00:35.174512"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.181518"], ["password_digest", "$2a$04$FcIh3ZAmj2ptfZLdL0nCNO32QMZzh3AEzLV1gPlrPet6wHupAH40K"], ["updated_at", "2015-02-07 21:00:35.181518"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.190527"], ["password_digest", "$2a$04$UivKssu7aeTWYyKWteeJ.uhS957CwuXp27P00qT2.zTTDVWNK80ci"], ["updated_at", "2015-02-07 21:00:35.190527"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:00:35.198535"], ["password_digest", "$2a$04$RCBIbkZ4Ew9O8ku/lztMiefB/PBKrTRdg1tJFsmkwPJGPQJXybE9y"], ["updated_at", "2015-02-07 21:00:35.198535"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.203540"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:00:35.203540"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:00:35.205541"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:00:35.205541"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:00:35.207543"], ["score", 10], ["updated_at", "2015-02-07 21:00:35.207543"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:00:35.214550"], ["password_digest", "$2a$04$FuwVR9QqZ2UMnXR48U8t2OtUunWlr9t96DaF7TfQ6S9Z.gKsQQuHu"], ["updated_at", "2015-02-07 21:00:35.214550"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.215551"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:00:35.215551"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:00:35.217553"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:00:35.217553"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:00:35.218554"], ["score", 10], ["updated_at", "2015-02-07 21:00:35.218554"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:00:35.219555"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:00:35.219555"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 21:00:35.219555"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:00:35.219555"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 21:00:35.220556"], ["score", 20], ["updated_at", "2015-02-07 21:00:35.220556"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.221557"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:00:35.221557"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 21:00:35.222557"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:00:35.222557"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 21:00:35.223559"], ["score", 15], ["updated_at", "2015-02-07 21:00:35.223559"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:00:35.224560"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:00:35.224560"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 21:00:35.225560"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:00:35.225560"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 21:00:35.226561"], ["score", 7], ["updated_at", "2015-02-07 21:00:35.226561"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.226561"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:00:35.226561"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 21:00:35.227562"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:00:35.227562"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 21:00:35.228563"], ["score", 9], ["updated_at", "2015-02-07 21:00:35.228563"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:00:35.229565"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:00:35.229565"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 21:00:35.230565"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:00:35.230565"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 21:00:35.230565"], ["score", 25], ["updated_at", "2015-02-07 21:00:35.230565"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.236571"], ["password_digest", "$2a$04$m2x9PMcW6xgz2Gf8EjbR4ekkhrr/UD09k5nUWEp4sGLRpLFzToNpW"], ["updated_at", "2015-02-07 21:00:35.236571"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.242577"], ["password_digest", "$2a$04$QseMI4ssGOQURTwEJiSPy.cwY.IOa4Xy3tYQMXHfIX/2zTiv21R5q"], ["updated_at", "2015-02-07 21:00:35.242577"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:00:35.248583"], ["password_digest", "$2a$04$ZEDtkJcczUFdQ6tarMCQA.lDkgSerPu68uuAE2U3T8ei.vBCken6W"], ["updated_at", "2015-02-07 21:00:35.248583"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.250584"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:00:35.250584"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:00:35.251585"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:00:35.251585"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:00:35.252586"], ["score", 10], ["updated_at", "2015-02-07 21:00:35.252586"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:00:35.264598"], ["password_digest", "$2a$04$lEddCiZgaMWLudhMDSH0z.KKquoBwTStBXTzDyVtS4a1yceltrLrq"], ["updated_at", "2015-02-07 21:00:35.264598"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:00:35.272605"], ["password_digest", "$2a$04$a3zML8YHUq9SLc52xNmzieuj576TQoXX1LhDjbsNg/aZcPbr0RjFi"], ["updated_at", "2015-02-07 21:00:35.272605"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:00:35.277610"], ["password_digest", "$2a$04$PRbDWXUpczKX/KDj04hnLuygHckU/5SQAOl/D0wDlks306trPj2fm"], ["updated_at", "2015-02-07 21:00:35.277610"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:00:35.279612"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:00:35.279612"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:00:35.280613"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:00:35.280613"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:00:35.281614"], ["score", 10], ["updated_at", "2015-02-07 21:00:35.281614"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:01:01 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 41ms (Views: 28.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.614440"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:01:01.614440"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.667490"], ["password_digest", "$2a$04$42Oxxs65LYRbZn345VdTrOjhkyBUl7b6a7kpFg0vGWDJIb1Kx8ZwO"], ["updated_at", "2015-02-07 21:01:01.667490"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (11.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.677500"], ["password_digest", "$2a$04$UN09IqiKx0rA5XPvfFZUm.byR7r7cdqLlerV7UqSSQXA3x50ZFgAW"], ["updated_at", "2015-02-07 21:01:01.677500"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:01:01.702524"], ["score", 10], ["updated_at", "2015-02-07 21:01:01.702524"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 21:01:01.709531"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:01:01.711533"], ["score", 20], ["updated_at", "2015-02-07 21:01:01.711533"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (16.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.718539"], ["password_digest", "$2a$04$ubHIS3yq/070iYg.NJrvVeqbPJKkU1kN62WwUrMeMHhvV4ddpE.4q"], ["updated_at", "2015-02-07 21:01:01.718539"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (9.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.742562"], ["password_digest", "$2a$04$W/EQMvp7wnlbVYK4KEaO7OHOBcfpG5ZIAJ23iFfZ6ylQQv3H4X/v6"], ["updated_at", "2015-02-07 21:01:01.742562"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (13.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:01:01.758577"], ["password_digest", "$2a$04$F9rdhfNmBjSAleCGraggEOg0VXX84cdTZn8wHEktBzwk9ouN/yZfK"], ["updated_at", "2015-02-07 21:01:01.758577"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (9.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.774593"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:01:01.774593"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:01:01.784602"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:01:01.784602"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:01:01.786605"], ["score", 10], ["updated_at", "2015-02-07 21:01:01.786605"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (1.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (13.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:01:01.793611"], ["password_digest", "$2a$04$89HQi7xCVVMkkUoUrmy9nuL9B5A//5iXZ.UAfq26UUNzz.8IyFEqy"], ["updated_at", "2015-02-07 21:01:01.793611"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (8.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.806623"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:01:01.806623"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:01:01.816633"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:01:01.816633"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:01:01.817634"], ["score", 10], ["updated_at", "2015-02-07 21:01:01.817634"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:01:01.819636"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:01:01.819636"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 21:01:01.820679"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:01:01.820679"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 21:01:01.821681"], ["score", 20], ["updated_at", "2015-02-07 21:01:01.821681"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.822682"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:01:01.822682"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 21:01:01.822682"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:01:01.822682"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 21:01:01.823683"], ["score", 15], ["updated_at", "2015-02-07 21:01:01.823683"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:01:01.824684"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:01:01.824684"], ["year", 1900]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 21:01:01.825708"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:01:01.825708"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 21:01:01.826709"], ["score", 7], ["updated_at", "2015-02-07 21:01:01.826709"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.827710"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:01:01.827710"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 21:01:01.827710"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:01:01.827710"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 21:01:01.828711"], ["score", 9], ["updated_at", "2015-02-07 21:01:01.828711"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:01:01.832019"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:01:01.832019"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 21:01:01.833020"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:01:01.833020"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 21:01:01.834020"], ["score", 25], ["updated_at", "2015-02-07 21:01:01.834020"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (13.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.841027"], ["password_digest", "$2a$04$ThZYn.fn3haNcY9OOzGzwOTi9wuKk.cPaNCMjQANn2qjEKiUctK6C"], ["updated_at", "2015-02-07 21:01:01.841027"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.858043"], ["password_digest", "$2a$04$gLsmoV6bKYyW4guyTF1Kvuwh7Jjsk3EfL8kLcSHLPmZ5/OCxVGuyO"], ["updated_at", "2015-02-07 21:01:01.858043"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (30.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:01:01.865051"], ["password_digest", "$2a$04$dUz7YKVNJsuBdrF4BJGWeevJs/F02g6YqCkigpG4FA1YrCcsMjgPe"], ["updated_at", "2015-02-07 21:01:01.865051"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (42.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:01.896080"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:01:01.896080"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:01:01.940122"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:01:01.940122"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:01:01.941123"], ["score", 10], ["updated_at", "2015-02-07 21:01:01.941123"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (104.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:01:01.954135"], ["password_digest", "$2a$04$BoJwYYvVT7p5hzuv2H3dI.g4petZBih5v45faHuAKFa/1/LZgsfF2"], ["updated_at", "2015-02-07 21:01:01.954135"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (41.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:01:02.062238"], ["password_digest", "$2a$04$ycREb39wOEqZ.GYVTpQJpu7rOOI2rvIcDD7EdKGhGAHVhAYCrjEm2"], ["updated_at", "2015-02-07 21:01:02.062238"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (49.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:01:02.109283"], ["password_digest", "$2a$04$FFNwoWTiM9WTM/.MRzJQUuamN07SZbx0tRxVQ4JNohrgxCgawfTrG"], ["updated_at", "2015-02-07 21:01:02.109283"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (11.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:01:02.160331"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:01:02.160331"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:01:02.172343"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:01:02.172343"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:01:02.173344"], ["score", 10], ["updated_at", "2015-02-07 21:01:02.173344"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:03:01 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 43ms (Views: 30.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:02.015645"], ["name", "Koff"], ["updated_at", "2015-02-07 21:03:02.015645"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.022652"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:03:02.022652"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:02.025655"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:03:02.025655"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:03:02 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (10.0ms)
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:03:02 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1[0m  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (33.0ms)
Completed 200 OK in 40ms (Views: 37.0ms | ActiveRecord: 1.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.085712"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:02.085712"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.113738"], ["password_digest", "$2a$04$RBf0Op.R2PCFv4juyV3cyurUT8UUfKUiYA/i2te/N3LoHA6IDQ942"], ["updated_at", "2015-02-07 21:03:02.113738"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.122747"], ["password_digest", "$2a$04$OObZBULwIiyXXzFpikaeo.eXvVGGF0uI9asJphX1WEVjCGJvcGhVu"], ["updated_at", "2015-02-07 21:03:02.122747"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:03:02.128753"], ["score", 10], ["updated_at", "2015-02-07 21:03:02.128753"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:03:02.134759"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:03:02.136760"], ["score", 20], ["updated_at", "2015-02-07 21:03:02.136760"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 21:03:02.137761"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.143767"], ["password_digest", "$2a$04$kkDrwkOq/1zNyoEIswgvzu6OPUiLryapeUCxReCE6xlMhq5XE4YZm"], ["updated_at", "2015-02-07 21:03:02.143767"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.154778"], ["password_digest", "$2a$04$r.LwRprur5N2uER0OeIVvuNq8vvUV7yH3.UraKo9.AypVBg95yOOK"], ["updated_at", "2015-02-07 21:03:02.154778"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:02.160783"], ["password_digest", "$2a$04$PKYR4pa8SlltTNOkb2ohiOeWjhB1GEXrOBONCzTpyjDQF42tYKveC"], ["updated_at", "2015-02-07 21:03:02.160783"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.161785"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:02.161785"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:03:02.164787"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:02.164787"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:03:02.165788"], ["score", 10], ["updated_at", "2015-02-07 21:03:02.165788"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:02.172795"], ["password_digest", "$2a$04$j5xgfROYK52hoBJpLLzESet3Vwdh1c4m0jWHGzzDetsYD/0zMwV.q"], ["updated_at", "2015-02-07 21:03:02.172795"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.174797"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:02.174797"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:03:02.175797"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:02.175797"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:03:02.176798"], ["score", 10], ["updated_at", "2015-02-07 21:03:02.176798"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:02.177799"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:02.177799"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 21:03:02.178800"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:02.178800"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 21:03:02.178800"], ["score", 20], ["updated_at", "2015-02-07 21:03:02.178800"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.179801"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:02.179801"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 21:03:02.180803"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:02.180803"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 21:03:02.181803"], ["score", 15], ["updated_at", "2015-02-07 21:03:02.181803"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:02.182804"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:02.182804"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 21:03:02.183805"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:02.183805"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 21:03:02.184806"], ["score", 7], ["updated_at", "2015-02-07 21:03:02.184806"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.185807"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:02.185807"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 21:03:02.185807"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:02.185807"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 21:03:02.186808"], ["score", 9], ["updated_at", "2015-02-07 21:03:02.186808"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:02.187809"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:02.187809"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 21:03:02.188810"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:02.188810"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 21:03:02.189811"], ["score", 25], ["updated_at", "2015-02-07 21:03:02.189811"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.195816"], ["password_digest", "$2a$04$Ki3vmMMrXaNu3hZlyJVt4O3W7tewqvTcGUC76/vpD/HyuKl0l0Q2u"], ["updated_at", "2015-02-07 21:03:02.195816"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.201822"], ["password_digest", "$2a$04$QxcOe4CJdBAaunD7K3cNPeBLDVBPofgC/FE5VfC3x0Zuhd2mUGo1C"], ["updated_at", "2015-02-07 21:03:02.201822"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:02.207828"], ["password_digest", "$2a$04$YvjGUnYnQo6JOtl6SiGgV.zyEh8H/39DPYHqebGHac9MiGKQPD//K"], ["updated_at", "2015-02-07 21:03:02.207828"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.210831"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:02.210831"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:03:02.211832"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:02.211832"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:03:02.212833"], ["score", 10], ["updated_at", "2015-02-07 21:03:02.212833"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:02.225845"], ["password_digest", "$2a$04$cgb34G0YTaXCfe7obj2GueZ8z4knOJiPw5eK6hXozDDTGYaczS7pG"], ["updated_at", "2015-02-07 21:03:02.225845"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:02.233853"], ["password_digest", "$2a$04$bepULTgctmpO9rhYnvDlwOEaE3m0biBJDxtXWB3zu0CXhaqRraWne"], ["updated_at", "2015-02-07 21:03:02.233853"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:02.240860"], ["password_digest", "$2a$04$pcOVvb4aXNd2W7m3oFQRGOuHX/BM7cVSJ1uSTpRbvI7eX2Va9JeV."], ["updated_at", "2015-02-07 21:03:02.240860"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:02.242862"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:02.242862"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:03:02.243862"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:02.243862"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:03:02.244863"], ["score", 10], ["updated_at", "2015-02-07 21:03:02.244863"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:03:39 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 39ms (Views: 26.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (11.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:39.835237"], ["name", "Koff"], ["updated_at", "2015-02-07 21:03:39.835237"], ["year", 1897]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:39.850251"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:03:39.850251"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:39.853254"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:03:39.853254"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:03:39 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (8.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (10.0ms)
Completed 200 OK in 10ms (Views: 2.0ms | ActiveRecord: 8.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:03:39 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1[0m  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (29.0ms)
Completed 200 OK in 33ms (Views: 32.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:39.936333"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:39.936333"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:39.976372"], ["password_digest", "$2a$04$rRg3tbQRWqP.YC33dkpCZukND93fOUnI4MfIjTUP48wDoTplIUvmu"], ["updated_at", "2015-02-07 21:03:39.976372"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:39.986381"], ["password_digest", "$2a$04$Ap2mhSfRp34QxPnpa5W0fuowSwr5CFB.0ZAMOHNGOjlGowOin50FS"], ["updated_at", "2015-02-07 21:03:39.986381"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:03:39.994388"], ["score", 10], ["updated_at", "2015-02-07 21:03:39.994388"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:03:40.003397"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:03:40.006400"], ["score", 20], ["updated_at", "2015-02-07 21:03:40.006400"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 21:03:40.007401"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:40.016410"], ["password_digest", "$2a$04$9zVot5wfBlpjnAB6emCjGe0Xi/FQQ2UTB2NdFIJUBKLeeZWnLB6KS"], ["updated_at", "2015-02-07 21:03:40.016410"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (4.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:40.026419"], ["password_digest", "$2a$04$fEEDGAAc1Y8hrBKjPOlxkOVqk1NLCVfeQsQyO6c0BVklIwdcABpBS"], ["updated_at", "2015-02-07 21:03:40.026419"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:40.034427"], ["password_digest", "$2a$04$Sw.A0Pt0sLUKj.AY8XoMUOtNPeQJJjzU8fjtBvKSMmvWl1f9cd7Ey"], ["updated_at", "2015-02-07 21:03:40.034427"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:40.036429"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:40.036429"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:03:40.038430"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:40.038430"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:03:40.040432"], ["score", 10], ["updated_at", "2015-02-07 21:03:40.040432"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:40.047439"], ["password_digest", "$2a$04$x0NC4e5kCPO5dyMihLTaB.8mUV4C76e/v0TpVbF1yjI8K76m3FGmi"], ["updated_at", "2015-02-07 21:03:40.047439"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:40.049441"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:40.049441"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:03:40.051443"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:40.051443"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:03:40.053445"], ["score", 10], ["updated_at", "2015-02-07 21:03:40.053445"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:40.054446"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:40.054446"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 21:03:40.055447"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:40.055447"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 21:03:40.058450"], ["score", 20], ["updated_at", "2015-02-07 21:03:40.058450"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:40.063455"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:40.063455"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 21:03:40.064456"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:40.064456"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 21:03:40.069460"], ["score", 15], ["updated_at", "2015-02-07 21:03:40.069460"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:40.073464"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:40.073464"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 21:03:40.075466"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:40.075466"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 21:03:40.076467"], ["score", 7], ["updated_at", "2015-02-07 21:03:40.076467"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:40.077468"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:40.077468"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 21:03:40.078512"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:40.078512"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 21:03:40.080514"], ["score", 9], ["updated_at", "2015-02-07 21:03:40.080514"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:40.081515"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:40.081515"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 21:03:40.083517"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:40.083517"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 21:03:40.085135"], ["score", 25], ["updated_at", "2015-02-07 21:03:40.085135"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:40.092256"], ["password_digest", "$2a$04$u.7fmJ5696dOu/QMbBe68OL.NhzY2DJFA7t6EaXpzPB9f7d6ysNh2"], ["updated_at", "2015-02-07 21:03:40.092256"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (9.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:40.109273"], ["password_digest", "$2a$04$UFRp/1eC3VdQeU4l1xzQpeWkELXesNscUJ.t.36OS.x4TX5RWFDR."], ["updated_at", "2015-02-07 21:03:40.109273"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:40.126289"], ["password_digest", "$2a$04$ZDfoILNES/b9Iz23Gru0xe1fr7MaLgygm/bB3.RP2FiA04ZaK2pZa"], ["updated_at", "2015-02-07 21:03:40.126289"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:40.128290"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:40.128290"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:03:40.130292"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:40.130292"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:03:40.131293"], ["score", 10], ["updated_at", "2015-02-07 21:03:40.131293"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:40.147308"], ["password_digest", "$2a$04$UU9OlKfJL7Tx20xq8O.Rt.q8HS1fRA7JF1GnL7MCUa9e7c02xzYSS"], ["updated_at", "2015-02-07 21:03:40.147308"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:40.157318"], ["password_digest", "$2a$04$.ocdzF5e73PNOiMO9KgcD.kNmJF0PjcJkQJ3Towin25yHuhD7.u9m"], ["updated_at", "2015-02-07 21:03:40.157318"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (4.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:03:40.167328"], ["password_digest", "$2a$04$6iAvH9hdFQtrmkpe4pwnouuGhvMSn7NzO6Gm4NrsZUtggENkmownS"], ["updated_at", "2015-02-07 21:03:40.167328"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:03:40.169330"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:03:40.169330"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:03:40.172334"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:03:40.172334"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:03:40.174334"], ["score", 10], ["updated_at", "2015-02-07 21:03:40.174334"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:04:11 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 40ms (Views: 28.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:11.254890"], ["name", "Koff"], ["updated_at", "2015-02-07 21:04:11.254890"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (37.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.260897"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:04:11.260897"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:11.299933"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:04:11.299933"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:04:11 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (8.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (10.0ms)
Completed 200 OK in 11ms (Views: 2.0ms | ActiveRecord: 9.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:04:11 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mBrewery Load (1.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1[0m  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (33.0ms)
Completed 200 OK in 37ms (Views: 35.0ms | ActiveRecord: 1.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.382011"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:11.382011"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.428055"], ["password_digest", "$2a$04$AYjeRl6Q9LCAVH4U8iwxqua.xxl3ianSqYKwt0u2COAcGYuWLBYzu"], ["updated_at", "2015-02-07 21:04:11.428055"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.434061"], ["password_digest", "$2a$04$QJmMjZ7X8r.M4xswp/3PG.6o/U6G/dM3H2shOEphb/EkYZErVQNly"], ["updated_at", "2015-02-07 21:04:11.434061"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:04:11.439065"], ["score", 10], ["updated_at", "2015-02-07 21:04:11.439065"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:04:11.445071"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:04:11.446072"], ["score", 20], ["updated_at", "2015-02-07 21:04:11.446072"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 21:04:11.447073"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.453079"], ["password_digest", "$2a$04$qzeBya5SiyAlBRiA2sGsAOAZO5UV420Rfvu/Mbd4gfky8vr1Qa8o6"], ["updated_at", "2015-02-07 21:04:11.453079"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.462087"], ["password_digest", "$2a$04$geQ7Q8uP7BJyOFik8MXmQeL8wHn7BZ6b363uuCaMnE3CkELPWRWVe"], ["updated_at", "2015-02-07 21:04:11.462087"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:11.467092"], ["password_digest", "$2a$04$xZxwy2eNi8NBo60PghZmF.2mlCYokDYNDsA7Cei5SzBr7B1IlRMgC"], ["updated_at", "2015-02-07 21:04:11.467092"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.470095"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:11.470095"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:04:11.472097"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:11.472097"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:04:11.474099"], ["score", 10], ["updated_at", "2015-02-07 21:04:11.474099"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:11.480104"], ["password_digest", "$2a$04$3AOP2OTYUvXR3kEExyb/FOdACPQVh8OFgkFTk6dk3ROOGeWsyRxMy"], ["updated_at", "2015-02-07 21:04:11.480104"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.483107"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:11.483107"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:04:11.484108"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:11.484108"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:04:11.485109"], ["score", 10], ["updated_at", "2015-02-07 21:04:11.485109"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:11.486110"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:11.486110"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 21:04:11.487111"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:11.487111"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 21:04:11.488112"], ["score", 20], ["updated_at", "2015-02-07 21:04:11.488112"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.488112"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:11.488112"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 21:04:11.489113"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:11.489113"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 21:04:11.490114"], ["score", 15], ["updated_at", "2015-02-07 21:04:11.490114"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:11.491115"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:11.491115"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 21:04:11.492116"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:11.492116"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 21:04:11.493117"], ["score", 7], ["updated_at", "2015-02-07 21:04:11.493117"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.493117"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:11.493117"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 21:04:11.494118"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:11.494118"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 21:04:11.495118"], ["score", 9], ["updated_at", "2015-02-07 21:04:11.495118"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:11.496120"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:11.496120"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 21:04:11.497121"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:11.497121"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 21:04:11.497121"], ["score", 25], ["updated_at", "2015-02-07 21:04:11.497121"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.504127"], ["password_digest", "$2a$04$kY21Yl8bA7arEEKtDeXP9exygGTVzvGC/uaSjxdFqBIWEaUDZXXtO"], ["updated_at", "2015-02-07 21:04:11.504127"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.511134"], ["password_digest", "$2a$04$B.aHtQBNTXEBbqXK5I/zhumm3fz5Y6e/HqHsLYpJy.7KcACql.jyi"], ["updated_at", "2015-02-07 21:04:11.511134"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:11.516139"], ["password_digest", "$2a$04$OXoUaA7sHJp6ofVxtgYD.u3snvJK//BNq9ezP8YWV1GAQ.2EdTBUi"], ["updated_at", "2015-02-07 21:04:11.516139"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.518141"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:11.518141"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:04:11.520143"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:11.520143"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:04:11.521143"], ["score", 10], ["updated_at", "2015-02-07 21:04:11.521143"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:11.534156"], ["password_digest", "$2a$04$qNnYpsQK6Bf/W.ClmSPjiOm/8CaUerJlTArybVzXNoncQpbOzBFKe"], ["updated_at", "2015-02-07 21:04:11.534156"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:11.540162"], ["password_digest", "$2a$04$TRCUZZFlONT8kk3O5qawDeHBajO6Hce7T8/0Fa48G5eXS5AvnO3G."], ["updated_at", "2015-02-07 21:04:11.540162"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:11.546167"], ["password_digest", "$2a$04$dfby8fz6KHt4DGLxYGGliOFKd8sv6Sd.6zFvLOZZHL78/sWbVu0FG"], ["updated_at", "2015-02-07 21:04:11.546167"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:11.547168"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:11.547168"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:04:11.549170"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:11.549170"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:04:11.550171"], ["score", 10], ["updated_at", "2015-02-07 21:04:11.550171"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:04:44 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 38ms (Views: 25.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:44.759840"], ["name", "Koff"], ["updated_at", "2015-02-07 21:04:44.759840"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.765845"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:04:44.765845"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:44.768848"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:04:44.768848"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:04:44 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (10.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (11.0ms)
Completed 200 OK in 13ms (Views: 2.0ms | ActiveRecord: 10.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:04:44 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mBrewery Load (1.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1[0m  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (29.0ms)
Completed 200 OK in 32ms (Views: 31.0ms | ActiveRecord: 1.0ms)
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.846922"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:44.846922"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.894968"], ["password_digest", "$2a$04$EbFVSaoKh29fI.Ucbdhfi.QS4UkC2R0SE3ZbnSdhQb54.HlicXdPC"], ["updated_at", "2015-02-07 21:04:44.894968"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.902976"], ["password_digest", "$2a$04$DQAg0A8mOufy8.V.OWwQxOR7etT/4DWFiLPAfLTeC.WiJxv.iVOHC"], ["updated_at", "2015-02-07 21:04:44.902976"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:04:44.906980"], ["score", 10], ["updated_at", "2015-02-07 21:04:44.906980"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:04:44.913987"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:04:44.915988"], ["score", 20], ["updated_at", "2015-02-07 21:04:44.915988"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.923996"], ["password_digest", "$2a$04$mXawftgE26qzrHRmtvCD5e6rkCNHLzShnq2/dU7RRY0RRoC/AEPua"], ["updated_at", "2015-02-07 21:04:44.923996"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.932004"], ["password_digest", "$2a$04$kJgoP1LxZbipUrQUGNZrnuY2awKyxzpr8jkMCUH16R7QWHFgHhMpy"], ["updated_at", "2015-02-07 21:04:44.932004"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:44.938010"], ["password_digest", "$2a$04$OGD7yieuayM5CwOOuq.eN.a.6QKbsRHHfnEPrG.pJ5RQcnFIQ28Qe"], ["updated_at", "2015-02-07 21:04:44.938010"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.941013"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:44.941013"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:04:44.945016"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:44.945016"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:04:44.947018"], ["score", 10], ["updated_at", "2015-02-07 21:04:44.947018"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:44.962032"], ["password_digest", "$2a$04$NqMG.FGBRsW1Jw3WiXKyhOLZ5jPfQ5HZ55Q9ydJCHZDi/UuC039g2"], ["updated_at", "2015-02-07 21:04:44.962032"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.964034"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:44.964034"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:04:44.966036"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:44.966036"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:04:44.967037"], ["score", 10], ["updated_at", "2015-02-07 21:04:44.967037"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:44.968038"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:44.968038"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 21:04:44.969039"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:44.969039"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 21:04:44.970040"], ["score", 20], ["updated_at", "2015-02-07 21:04:44.970040"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.971041"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:44.971041"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 21:04:44.972042"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:44.972042"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 21:04:44.973043"], ["score", 15], ["updated_at", "2015-02-07 21:04:44.973043"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:44.974044"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:44.974044"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 21:04:44.975045"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:44.975045"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 21:04:44.976046"], ["score", 7], ["updated_at", "2015-02-07 21:04:44.976046"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.977047"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:44.977047"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 21:04:44.977047"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:44.977047"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 21:04:44.978047"], ["score", 9], ["updated_at", "2015-02-07 21:04:44.978047"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:44.979049"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:44.979049"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 21:04:44.980050"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:44.980050"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 21:04:44.981050"], ["score", 25], ["updated_at", "2015-02-07 21:04:44.981050"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.988058"], ["password_digest", "$2a$04$GXG7oDfrc6SRYWTHA1BwC.m037kk9/VIeoY67Jc2lkQgSETqH2B06"], ["updated_at", "2015-02-07 21:04:44.988058"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:44.993062"], ["password_digest", "$2a$04$9hlSjzPaLfZzjGvZL/a7f.D10zkb2rgXdGUm5X38Kx6IP8tsffPdq"], ["updated_at", "2015-02-07 21:04:44.993062"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:44.999068"], ["password_digest", "$2a$04$fDWQKgALZdcfMOsdsORumugRfFqTUjevC2rp5YtNxJMgs6sE41/VO"], ["updated_at", "2015-02-07 21:04:44.999068"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:45.000068"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:45.000068"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:04:45.002070"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:45.002070"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:04:45.003071"], ["score", 10], ["updated_at", "2015-02-07 21:04:45.003071"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (4.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (11.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:45.018086"], ["password_digest", "$2a$04$KA3HsweYfznZedi0KxH9vOaFLuC8kEAy62UfXWY9zv8tXKqAUT1Fm"], ["updated_at", "2015-02-07 21:04:45.018086"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (19.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:45.034101"], ["password_digest", "$2a$04$polftwmN3SMG1oaCg7d1h.WjpjwjcWuG5/NCaft3Muf3r1aOls8s."], ["updated_at", "2015-02-07 21:04:45.034101"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (12.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:04:45.058124"], ["password_digest", "$2a$04$RfK4v/hIc7IsUacD0beJPeVn5f//lkMRdI1IKAYrn53fU5rzSbJuC"], ["updated_at", "2015-02-07 21:04:45.058124"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:04:45.071136"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:04:45.071136"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:04:45.072137"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:04:45.072137"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:04:45.074139"], ["score", 10], ["updated_at", "2015-02-07 21:04:45.074139"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:06:43 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 43ms (Views: 28.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.095527"], ["name", "Koff"], ["updated_at", "2015-02-07 21:06:43.095527"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (28.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.107538"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:06:43.107538"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.136566"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:06:43.136566"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:06:43 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 14ms (Views: 13.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (17.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.158587"], ["name", "Koff"], ["updated_at", "2015-02-07 21:06:43.158587"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (27.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.176604"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:06:43.176604"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.204654"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:06:43.204654"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:06:43 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:06:43 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (33.0ms)
Completed 200 OK in 36ms (Views: 35.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (27.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.252700"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:06:43.252700"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (16.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.308755"], ["password_digest", "$2a$04$TqnEupGkyzU.R75Lag8FMugIQSPS7lNC4wjY2ie2BIXV6uslx56rO"], ["updated_at", "2015-02-07 21:06:43.308755"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (38.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.331775"], ["password_digest", "$2a$04$YIsQ9gB8kE5.L9QRGGPJUeacJQT5h8YUoaUUyBU.PkFOpOlSUNaOe"], ["updated_at", "2015-02-07 21:06:43.331775"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (47.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.374816"], ["score", 10], ["updated_at", "2015-02-07 21:06:43.374816"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 21:06:43.427867"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.429869"], ["score", 20], ["updated_at", "2015-02-07 21:06:43.429869"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 21:06:43.430870"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (14.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.436876"], ["password_digest", "$2a$04$vPnYkPV7UC4tn0yFsTlfneMddCU6B90iREXcwPdD1xSpuBDyCJzWO"], ["updated_at", "2015-02-07 21:06:43.436876"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (33.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.458897"], ["password_digest", "$2a$04$N6cBniOx6OnsTkGjkIwRPew8LJ1raJLyg9ZYwv9jfQUxVvw.0lYQ2"], ["updated_at", "2015-02-07 21:06:43.458897"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (21.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.496933"], ["password_digest", "$2a$04$ff8veAk5fXudBwioI.Sv2.et61GR9Q6cI16AaBYoSLKGzaSiipWtq"], ["updated_at", "2015-02-07 21:06:43.496933"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (48.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.519954"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:06:43.519954"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:06:43.570002"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:06:43.570002"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:06:43.572004"], ["score", 10], ["updated_at", "2015-02-07 21:06:43.572004"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (4.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (13.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.581013"], ["password_digest", "$2a$04$v0nKyuePT9JUxAJ5Im93GOfX/S0UiC5rJ69HtQeH7ow2vrks0d7iS"], ["updated_at", "2015-02-07 21:06:43.581013"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (39.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.595026"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:06:43.595026"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:06:43.636065"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:06:43.636065"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:06:43.637066"], ["score", 10], ["updated_at", "2015-02-07 21:06:43.637066"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.638067"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:06:43.638067"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 21:06:43.639068"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:06:43.639068"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 21:06:43.640069"], ["score", 20], ["updated_at", "2015-02-07 21:06:43.640069"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.641070"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:06:43.641070"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 21:06:43.642071"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:06:43.642071"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 21:06:43.642071"], ["score", 15], ["updated_at", "2015-02-07 21:06:43.642071"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.643072"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:06:43.643072"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 21:06:43.644073"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:06:43.644073"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 21:06:43.645074"], ["score", 7], ["updated_at", "2015-02-07 21:06:43.645074"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.646075"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:06:43.646075"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 21:06:43.647076"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:06:43.647076"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 21:06:43.648077"], ["score", 9], ["updated_at", "2015-02-07 21:06:43.648077"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.649078"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:06:43.649078"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 21:06:43.649078"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:06:43.649078"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 21:06:43.650078"], ["score", 25], ["updated_at", "2015-02-07 21:06:43.650078"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (17.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.659087"], ["password_digest", "$2a$04$L2KrpKthNjfUkbiMGevnWekYqpm5y2hGZowm4m/1unf3.f6UBHLWa"], ["updated_at", "2015-02-07 21:06:43.659087"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (45.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.682109"], ["password_digest", "$2a$04$suxfOws5LJiQf3tkWtp59uIhGm03eWnnUE5aFwkGBvNXp1BqOfRK6"], ["updated_at", "2015-02-07 21:06:43.682109"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (33.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.733158"], ["password_digest", "$2a$04$SU3qqZg1F.LGwgdCtWI69uKCP4svRFz1Z1NI0Z4bfum2JGquMkUpe"], ["updated_at", "2015-02-07 21:06:43.733158"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (42.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.767190"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:06:43.767190"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:06:43.811232"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:06:43.811232"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:06:43.812233"], ["score", 10], ["updated_at", "2015-02-07 21:06:43.812233"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (17.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.824244"], ["password_digest", "$2a$04$eqZM.bJM1htxegqQgdSlUOTBxUdKXleqp2Gg9gVKggVWjFosCpmtK"], ["updated_at", "2015-02-07 21:06:43.824244"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (61.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.848267"], ["password_digest", "$2a$04$QWU.obG1opE8GeOXb9/4Xe.uScg/zuKGfs3OQSOYD4YSOKUNvYZ66"], ["updated_at", "2015-02-07 21:06:43.848267"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (9.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (20.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:06:43.923339"], ["password_digest", "$2a$04$2m.JZkvIOcNGDnyKv4AHs.yijJjOYTD1bkt5z1B6KJGG9zyJoLTLq"], ["updated_at", "2015-02-07 21:06:43.923339"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (32.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:06:43.944359"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:06:43.944359"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:06:43.977390"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:06:43.977390"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:06:43.979392"], ["score", 10], ["updated_at", "2015-02-07 21:06:43.979392"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:10:38 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 40ms (Views: 25.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (39.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.597358"], ["name", "Koff"], ["updated_at", "2015-02-07 21:10:38.597358"], ["year", 1897]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.640399"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:10:38.640399"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.642400"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:10:38.642400"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:10:38 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.660418"], ["name", "Koff"], ["updated_at", "2015-02-07 21:10:38.660418"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.662419"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:10:38.662419"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.663420"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:10:38.663420"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:10:38 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:10:38 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (30.0ms)
Completed 200 OK in 33ms (Views: 31.0ms | ActiveRecord: 1.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.713468"], ["password_digest", "$2a$04$TV.qIyRGviLWQ29n21ut6OXM020PZ0pjuBg2rXbsX4AVj55pQYYdS"], ["updated_at", "2015-02-07 21:10:38.713468"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:10:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:10:38 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:10:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (13.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 18ms (Views: 15.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.765518"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:10:38.765518"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.790541"], ["password_digest", "$2a$04$I/TZlArt/VlLlkFlkXSrvuaFhEnerGYefmOwag9lYCYsILRgbeaLK"], ["updated_at", "2015-02-07 21:10:38.790541"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.797548"], ["password_digest", "$2a$04$ugWUHJzRRovpsAFo.eIql.H89BYNBEHh19hU.v/pH9P1ttBn21C0O"], ["updated_at", "2015-02-07 21:10:38.797548"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.803554"], ["score", 10], ["updated_at", "2015-02-07 21:10:38.803554"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 21:10:38.809560"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.810561"], ["score", 20], ["updated_at", "2015-02-07 21:10:38.810561"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 21:10:38.811562"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.817567"], ["password_digest", "$2a$04$tTEKHdewYRTKc7T7SnX.b./31slvyu1SN97gzkEoSg27/s30TFyaS"], ["updated_at", "2015-02-07 21:10:38.817567"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.825575"], ["password_digest", "$2a$04$.nqGhUP4n2AwIaOi9EbE3OlubTtPw.Cf6kyCz7VNiKF3hG/J8WQvm"], ["updated_at", "2015-02-07 21:10:38.825575"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.832582"], ["password_digest", "$2a$04$hQZ7z/.bjzHaS56HJ0koUeYD8kKxma7iyaHlf/GHOJLYLcij6yh36"], ["updated_at", "2015-02-07 21:10:38.832582"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.833583"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:10:38.833583"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:10:38.836585"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:10:38.836585"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:10:38.838587"], ["score", 10], ["updated_at", "2015-02-07 21:10:38.838587"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.844593"], ["password_digest", "$2a$04$GOIOHHCo4uKDgD7uQ8WeCOH2K9LIQ6oZj1KaGWxIieRPqbihktxju"], ["updated_at", "2015-02-07 21:10:38.844593"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.846595"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:10:38.846595"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:10:38.848597"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:10:38.848597"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:10:38.849598"], ["score", 10], ["updated_at", "2015-02-07 21:10:38.849598"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.849598"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:10:38.849598"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 21:10:38.850599"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:10:38.850599"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 21:10:38.851600"], ["score", 20], ["updated_at", "2015-02-07 21:10:38.851600"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.852601"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:10:38.852601"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 21:10:38.853602"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:10:38.853602"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 21:10:38.854602"], ["score", 15], ["updated_at", "2015-02-07 21:10:38.854602"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.854602"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:10:38.854602"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 21:10:38.855603"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:10:38.855603"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 21:10:38.856605"], ["score", 7], ["updated_at", "2015-02-07 21:10:38.856605"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.857606"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:10:38.857606"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 21:10:38.858606"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:10:38.858606"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 21:10:38.859607"], ["score", 9], ["updated_at", "2015-02-07 21:10:38.859607"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.860608"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:10:38.860608"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 21:10:38.861609"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:10:38.861609"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 21:10:38.862610"], ["score", 25], ["updated_at", "2015-02-07 21:10:38.862610"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.868616"], ["password_digest", "$2a$04$.N2aMU.CPYHcqK7sMicQuur7Yic37T.OUmNnjxe0z.PEI.Hf/A1C6"], ["updated_at", "2015-02-07 21:10:38.868616"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.874622"], ["password_digest", "$2a$04$VujvVRXfW4nNA8h.88LXYeHcGI/mKfPVpenn9o1kpSBQTrL5J86Bm"], ["updated_at", "2015-02-07 21:10:38.874622"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.880628"], ["password_digest", "$2a$04$ePZIFTOnHfpOzvuSuTX09e3iv/Eosm/PwdLLa/JATAFFOhF3g1lk."], ["updated_at", "2015-02-07 21:10:38.880628"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.884631"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:10:38.884631"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:10:38.886633"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:10:38.886633"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:10:38.887634"], ["score", 10], ["updated_at", "2015-02-07 21:10:38.887634"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.894641"], ["password_digest", "$2a$04$8wRCC8W./4COmFYsbD1UD.yQcJr33nrdG8u5aEw6jcFi014Xb3yva"], ["updated_at", "2015-02-07 21:10:38.894641"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.901647"], ["password_digest", "$2a$04$lGFcAgZCLETvq7dWAcEQ5Ox0SAk0Bnr3cXDoB33c0JvTuE3drkzjy"], ["updated_at", "2015-02-07 21:10:38.901647"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:10:38.906652"], ["password_digest", "$2a$04$/JK1iOKOFfRN9UVubBzJWuD.iCTBNG9uZk.s16e6vEEPsEhvfTVpO"], ["updated_at", "2015-02-07 21:10:38.906652"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:10:38.908654"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:10:38.908654"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:10:38.910656"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:10:38.910656"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:10:38.912658"], ["score", 10], ["updated_at", "2015-02-07 21:10:38.912658"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:11:22 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 54ms (Views: 37.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:22.550626"], ["name", "Koff"], ["updated_at", "2015-02-07 21:11:22.550626"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.555631"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:11:22.555631"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:22.557633"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:11:22.557633"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:11:22 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.586661"], ["name", "Koff"], ["updated_at", "2015-02-07 21:11:22.586661"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:22.588662"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:11:22.588662"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.589663"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:11:22.589663"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:11:22 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:11:22 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (39.0ms)
Completed 200 OK in 42ms (Views: 40.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.648720"], ["password_digest", "$2a$04$VaFmrZtzux/dcIeUag15z.dQUsnVwAdCAb.QPjTiy.QpQ1SoJHXXe"], ["updated_at", "2015-02-07 21:11:22.648720"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:11:22 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:11:22 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:11:22 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (1.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (16.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 22ms (Views: 20.0ms | ActiveRecord: 1.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.708776"], ["password_digest", "$2a$04$83CSxp1MG85wHVKEDVAANeNuC07KgfFtc8SAOR1/djjIk7fB4.Ju2"], ["updated_at", "2015-02-07 21:11:22.708776"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:11:22 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:11:22 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:11:22 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.737805"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:11:22.737805"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.770836"], ["password_digest", "$2a$04$mclRzYO0uCaj2tcExMCiau6UYLcMTBUtQRPqA5G.VuH9zgGUhNT4O"], ["updated_at", "2015-02-07 21:11:22.770836"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.777842"], ["password_digest", "$2a$04$3lxni1I0xMRRi.qimzXn2.PlFoY9Vgt4tlmTXgoDaiS7xK848taVC"], ["updated_at", "2015-02-07 21:11:22.777842"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:11:22.782847"], ["score", 10], ["updated_at", "2015-02-07 21:11:22.782847"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:11:22.788853"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:11:22.790855"], ["score", 20], ["updated_at", "2015-02-07 21:11:22.790855"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.797861"], ["password_digest", "$2a$04$VCNpPZQPsMRa7syIMsw4D.wyD1L24XPop0pAzBLQZGbuM3JNb2xUe"], ["updated_at", "2015-02-07 21:11:22.797861"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.805869"], ["password_digest", "$2a$04$/ykK8pR9Bc1CGnVTj8EhxuIKLyBpiaugsBB6F9q/HJliEG8udbTEy"], ["updated_at", "2015-02-07 21:11:22.805869"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:22.812875"], ["password_digest", "$2a$04$0zgZmNdUB0YjRUOdJxhHbeSGOpjrAETXtKeqWu20t.FiZesNbUIAW"], ["updated_at", "2015-02-07 21:11:22.812875"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.815879"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:11:22.815879"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:11:22.819883"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:11:22.819883"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:11:22.821884"], ["score", 10], ["updated_at", "2015-02-07 21:11:22.821884"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:22.831894"], ["password_digest", "$2a$04$bw5GeJRStFTAo7Zs82XosuD7e4YTHJ1FDKaptXjVjjZZAav/zJ5IW"], ["updated_at", "2015-02-07 21:11:22.831894"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.834897"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:11:22.834897"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:11:22.836899"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:11:22.836899"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:11:22.838901"], ["score", 10], ["updated_at", "2015-02-07 21:11:22.838901"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:22.839902"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:11:22.839902"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 21:11:22.841903"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:11:22.841903"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 21:11:22.842904"], ["score", 20], ["updated_at", "2015-02-07 21:11:22.842904"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.843905"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:11:22.843905"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 21:11:22.843905"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:11:22.843905"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 21:11:22.844906"], ["score", 15], ["updated_at", "2015-02-07 21:11:22.844906"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:22.845907"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:11:22.845907"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 21:11:22.846908"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:11:22.846908"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 21:11:22.848910"], ["score", 7], ["updated_at", "2015-02-07 21:11:22.848910"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.849911"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:11:22.849911"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 21:11:22.850912"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:11:22.850912"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 21:11:22.851913"], ["score", 9], ["updated_at", "2015-02-07 21:11:22.851913"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:22.852913"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:11:22.852913"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 21:11:22.853915"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:11:22.853915"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 21:11:22.854916"], ["score", 25], ["updated_at", "2015-02-07 21:11:22.854916"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.862923"], ["password_digest", "$2a$04$nRCwgxVL4z9qyI9bDQXSx.Vu6dYAUIpYjexjloIHS9Tr0CPMrr8U2"], ["updated_at", "2015-02-07 21:11:22.862923"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.869930"], ["password_digest", "$2a$04$.gQ89rBu22LugoLD5FKrReN2tq1fLzNuoyhKTE9YcUb9sT3lMghWq"], ["updated_at", "2015-02-07 21:11:22.869930"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:22.875935"], ["password_digest", "$2a$04$hG7BkOmSHdlCjPDVJVRAbemQGUoUm/gtzbgg4phf4hjk/Rlt3mkkq"], ["updated_at", "2015-02-07 21:11:22.875935"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:22.878938"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:11:22.878938"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:11:22.880940"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:11:22.880940"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:11:22.881942"], ["score", 10], ["updated_at", "2015-02-07 21:11:22.881942"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (155.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:22.890950"], ["password_digest", "$2a$04$tBDUA2kXI03YRG.Sp.553e1MtvIf7zWFhmdm4y/0EyCowwy.1C36G"], ["updated_at", "2015-02-07 21:11:22.890950"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (48.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:23.053105"], ["password_digest", "$2a$04$FMJr8PzHntVxYcW6WzddtOrE02n0VbSl8vDAeyxR7Kz/J6cgqBpaW"], ["updated_at", "2015-02-07 21:11:23.053105"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (63.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:11:23.108157"], ["password_digest", "$2a$04$13SRNQg9bcZkjOBjko5XU.JTCxch7NrumEJUdbEKKTPXGR8BtntVi"], ["updated_at", "2015-02-07 21:11:23.108157"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (28.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:11:23.172218"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:11:23.172218"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:11:23.202246"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:11:23.202246"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:11:23.203247"], ["score", 10], ["updated_at", "2015-02-07 21:11:23.203247"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 39ms (Views: 27.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.354479"], ["name", "Koff"], ["updated_at", "2015-02-07 21:12:28.354479"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.360484"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:12:28.360484"], ["year", 1898]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.363487"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:12:28.363487"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.385509"], ["name", "Koff"], ["updated_at", "2015-02-07 21:12:28.385509"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.387510"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:12:28.387510"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.388511"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:12:28.388511"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (1.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 1.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (31.0ms)
Completed 200 OK in 34ms (Views: 31.0ms | ActiveRecord: 1.0ms)
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.438558"], ["password_digest", "$2a$04$77mSRnOh/sCvNCA4857tSOROyfXyojtlc386MygI9v2vK.4Wmy7xG"], ["updated_at", "2015-02-07 21:12:28.438558"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (17.0ms)
  Rendered users/new.html.erb within layouts/application (39.0ms)
Completed 200 OK in 43ms (Views: 43.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.519636"], ["password_digest", "$2a$04$uCgO7zeZfCmTn3fAgdENguzQtfuphz3YUKdEUO3IrsTeLGK5avpVy"], ["updated_at", "2015-02-07 21:12:28.519636"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (12.0ms)
Completed 200 OK in 14ms (Views: 13.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.542658"], ["password_digest", "$2a$04$otWAXrzk.rvqK.vSoMNpBuRx4ORU7h8Kz5P0oZj3wb8te2gm5Uy.m"], ["updated_at", "2015-02-07 21:12:28.542658"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 10ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.578692"], ["password_digest", "$2a$04$EXyJ8WysB/KsME2uQNsGre2kibfw4DezfJ3VLx5vXU2SfU2fYbbGG"], ["updated_at", "2015-02-07 21:12:28.578692"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:12:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.595708"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:12:28.595708"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.616728"], ["password_digest", "$2a$04$G.Cj6ESdsqLul5AyPXM8W.FUvVEdFGazkJVFjYqi5dCgyecbe3pAm"], ["updated_at", "2015-02-07 21:12:28.616728"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.623735"], ["password_digest", "$2a$04$BsDNsZ.KoMa8syLGDywibeYi50sAhApCdLcLBRJ5O62/4ez7K0UFG"], ["updated_at", "2015-02-07 21:12:28.623735"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.628739"], ["score", 10], ["updated_at", "2015-02-07 21:12:28.628739"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 21:12:28.636747"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.637748"], ["score", 20], ["updated_at", "2015-02-07 21:12:28.637748"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 21:12:28.638749"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.644755"], ["password_digest", "$2a$04$cZ07jQqZ0khOiPGKY1.5yegNeyIW1k9HUvhvtAUnbhkogga.GaLx6"], ["updated_at", "2015-02-07 21:12:28.644755"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.651762"], ["password_digest", "$2a$04$kuR3NFnXXpI4hwUNewSwiujNp.ZLB1Q7yOXNz.byox4PyfpjGY8LO"], ["updated_at", "2015-02-07 21:12:28.651762"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.657767"], ["password_digest", "$2a$04$UnJbtBGpCtWYBiPVOQYta.2ohmBHoQNOo8rM0l5.AlhVU42yOP.zu"], ["updated_at", "2015-02-07 21:12:28.657767"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.659769"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:12:28.659769"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:12:28.661771"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:12:28.661771"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:12:28.663773"], ["score", 10], ["updated_at", "2015-02-07 21:12:28.663773"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.670779"], ["password_digest", "$2a$04$bn8KquXmb1Bf56c/od1W2OV0UK/5F5/RndYlQDgAXq7gPD5Unq2My"], ["updated_at", "2015-02-07 21:12:28.670779"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.671781"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:12:28.671781"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:12:28.673782"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:12:28.673782"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:12:28.674784"], ["score", 10], ["updated_at", "2015-02-07 21:12:28.674784"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.675784"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:12:28.675784"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 21:12:28.675784"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:12:28.675784"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 21:12:28.676785"], ["score", 20], ["updated_at", "2015-02-07 21:12:28.676785"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.677786"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:12:28.677786"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 21:12:28.678787"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:12:28.678787"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 21:12:28.679788"], ["score", 15], ["updated_at", "2015-02-07 21:12:28.679788"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.680789"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:12:28.680789"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 21:12:28.680789"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:12:28.680789"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 21:12:28.681790"], ["score", 7], ["updated_at", "2015-02-07 21:12:28.681790"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.682791"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:12:28.682791"], ["year", 1900]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 21:12:28.683792"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:12:28.683792"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 21:12:28.684793"], ["score", 9], ["updated_at", "2015-02-07 21:12:28.684793"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.685794"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:12:28.685794"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 21:12:28.685794"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:12:28.685794"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 21:12:28.686795"], ["score", 25], ["updated_at", "2015-02-07 21:12:28.686795"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.695803"], ["password_digest", "$2a$04$5QIYlI0K0DRtUQroVM2a7urEbqvRwzE/gzfInENdqLVBkJ0QcoeB6"], ["updated_at", "2015-02-07 21:12:28.695803"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.700808"], ["password_digest", "$2a$04$giaT3T7uQuVx4a4V6WRjPOq4Tz3Be6ny8ATEAvRwU1YgqP85uD1fW"], ["updated_at", "2015-02-07 21:12:28.700808"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.706814"], ["password_digest", "$2a$04$1qoJqHyVBS4bkohqYgsp6.RMb.fpRNeIsTVI5vJvjhWNEoQvThDK6"], ["updated_at", "2015-02-07 21:12:28.706814"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.707815"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:12:28.707815"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:12:28.709817"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:12:28.709817"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:12:28.710818"], ["score", 10], ["updated_at", "2015-02-07 21:12:28.710818"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.717825"], ["password_digest", "$2a$04$6p/5cpWhVo2VL2C3b7/cnejf4tMDmexU4vDN/15Bo2mb3yfkrOWCS"], ["updated_at", "2015-02-07 21:12:28.717825"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.723830"], ["password_digest", "$2a$04$5psLRMfftow.EsxW.PISgu5oCtMQe3dekaISV1Rbgxzb99UxyZfk."], ["updated_at", "2015-02-07 21:12:28.723830"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:12:28.729836"], ["password_digest", "$2a$04$1tZUOqE7IfTc7QpTKYJhSu8uKt5nWJnEcGZbmyRG88yb.xy8HfCrK"], ["updated_at", "2015-02-07 21:12:28.729836"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:12:28.730837"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:12:28.730837"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:12:28.732839"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:12:28.732839"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:12:28.733840"], ["score", 10], ["updated_at", "2015-02-07 21:12:28.733840"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 41ms (Views: 27.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.265497"], ["name", "Koff"], ["updated_at", "2015-02-07 21:17:28.265497"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.279511"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:17:28.279511"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.281513"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:17:28.281513"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.291522"], ["name", "Koff"], ["updated_at", "2015-02-07 21:17:28.291522"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.293524"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:17:28.293524"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.294525"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:17:28.294525"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (32.0ms)
Completed 200 OK in 35ms (Views: 33.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.340569"], ["name", "Koff"], ["updated_at", "2015-02-07 21:17:28.340569"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:17:28.352580"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.352580"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:17:28.354582"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.354582"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.359587"], ["password_digest", "$2a$04$bBBTk.J//E.7fP.eQG1TN.DT317K4XSYvH5Hrb4tYO/eo84hXV62K"], ["updated_at", "2015-02-07 21:17:28.359587"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 9ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (16.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 19.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (18.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 23ms (Views: 23.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:17:28.445669"], ["score", 15], ["updated_at", "2015-02-07 21:17:28.445669"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:17:28.448672"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.471694"], ["password_digest", "$2a$04$ZbJTIm85cEOoDeH6eRjvFeGwYBrA0RRPsBTiU0PMGE1FI.vIzO.B6"], ["updated_at", "2015-02-07 21:17:28.471694"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (5.0ms)
  Rendered users/new.html.erb within layouts/application (10.0ms)
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.494717"], ["password_digest", "$2a$04$zYlc8ML6Q60YdDxx8MZvzuL6icM1ZxVLL/qcU7RfRYRUYkd1cggr2"], ["updated_at", "2015-02-07 21:17:28.494717"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 6ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.507729"], ["password_digest", "$2a$04$reCd8ms.wZ9bsWWTUZrhQejXYupS2kyrzyn4oqjDTzxX1KC4D17Au"], ["updated_at", "2015-02-07 21:17:28.507729"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (21.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.547766"], ["password_digest", "$2a$04$NYzmuSeJoEfKC/lhnhO8GuxKZWt994I2fggZt.KrDcjkToqlxTyXO"], ["updated_at", "2015-02-07 21:17:28.547766"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:17:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.561780"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.561780"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.583801"], ["password_digest", "$2a$04$NuglxJQZPWQFUNa/b6UxK.Jktg.3r8ZDgzCPwYgw5vO3uemBPgwCO"], ["updated_at", "2015-02-07 21:17:28.583801"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.590807"], ["password_digest", "$2a$04$onbg0pf1CEZhz25ld7fl7eMFlLKV72y0X8aqy7QhWZBR99vwGRPC6"], ["updated_at", "2015-02-07 21:17:28.590807"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.594811"], ["score", 10], ["updated_at", "2015-02-07 21:17:28.594811"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 21:17:28.595812"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.596813"], ["score", 20], ["updated_at", "2015-02-07 21:17:28.596813"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (5.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.606822"], ["password_digest", "$2a$04$gUUZtK/42Hr6W06so274Kuts4MQSkSmRda9KE8ge5h3ONY4VGm036"], ["updated_at", "2015-02-07 21:17:28.606822"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.613829"], ["password_digest", "$2a$04$Inzu/EZekhpKl9cjNT1wHebndBce1ox05X5pFzOB0kaBTuTj7OQou"], ["updated_at", "2015-02-07 21:17:28.613829"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.618834"], ["password_digest", "$2a$04$pIVseMbgbVf2YWsQTvIYIeDBwig/W0CMc1.uSmaedUWWiqZCVrHmS"], ["updated_at", "2015-02-07 21:17:28.618834"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.621836"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:17:28.621836"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:17:28.622837"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.622837"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:17:28.624839"], ["score", 10], ["updated_at", "2015-02-07 21:17:28.624839"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.630845"], ["password_digest", "$2a$04$lwmCvugUn8uxd60hibxomOoZnRi3P/jzlCwjjjSoUJ7/.mblFU19e"], ["updated_at", "2015-02-07 21:17:28.630845"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.632847"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:17:28.632847"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:17:28.634849"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.634849"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:17:28.635850"], ["score", 10], ["updated_at", "2015-02-07 21:17:28.635850"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.636851"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:17:28.636851"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 21:17:28.637852"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.637852"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 21:17:28.638853"], ["score", 20], ["updated_at", "2015-02-07 21:17:28.638853"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.639854"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:17:28.639854"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 21:17:28.639854"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.639854"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 21:17:28.640855"], ["score", 15], ["updated_at", "2015-02-07 21:17:28.640855"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.641855"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:17:28.641855"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 21:17:28.642856"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.642856"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 21:17:28.643858"], ["score", 7], ["updated_at", "2015-02-07 21:17:28.643858"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.644859"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:17:28.644859"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 21:17:28.644859"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.644859"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 21:17:28.645859"], ["score", 9], ["updated_at", "2015-02-07 21:17:28.645859"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.646860"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:17:28.646860"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 21:17:28.647861"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.647861"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 21:17:28.648862"], ["score", 25], ["updated_at", "2015-02-07 21:17:28.648862"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.655869"], ["password_digest", "$2a$04$Hwe7inXEpHdXsAu2.KyU1uxFralCbW4BGLB6YW0g5wk9XIwSrrmK6"], ["updated_at", "2015-02-07 21:17:28.655869"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.662876"], ["password_digest", "$2a$04$uiks0szSLXE2D5iDZdSOsOPZGn9RdSe11qIL.VkTfQIM6ng7nCO7."], ["updated_at", "2015-02-07 21:17:28.662876"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.668882"], ["password_digest", "$2a$04$cBqGIvA4uqChi25lH0Nwl.22PSB394E4MgILj/kgw1B/B/ZVLlRBm"], ["updated_at", "2015-02-07 21:17:28.668882"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.671885"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:17:28.671885"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:17:28.673886"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.673886"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:17:28.674888"], ["score", 10], ["updated_at", "2015-02-07 21:17:28.674888"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.681894"], ["password_digest", "$2a$04$A6KB5DzNZY0oLNymnmOiv.sk0g8Nm6UPvgJXa3OKUbN0kHElxYZ5W"], ["updated_at", "2015-02-07 21:17:28.681894"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.687900"], ["password_digest", "$2a$04$l0mtq5oWTFXNsqVRKPcype32QMJSDJPuVefkd6XUdphDE0ZjfMZMi"], ["updated_at", "2015-02-07 21:17:28.687900"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:17:28.693905"], ["password_digest", "$2a$04$XgSYFhdvn4buMz2bkoJAHOUcH2.SF5ex6f6CnvU7/SQ9PaW6H6ATS"], ["updated_at", "2015-02-07 21:17:28.693905"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:17:28.695907"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:17:28.695907"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:17:28.696908"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:17:28.696908"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:17:28.697909"], ["score", 10], ["updated_at", "2015-02-07 21:17:28.697909"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (4.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:18:53 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 41ms (Views: 29.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.026090"], ["name", "Koff"], ["updated_at", "2015-02-07 21:18:54.026090"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.041104"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:18:54.041104"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.043106"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:18:54.043106"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.054116"], ["name", "Koff"], ["updated_at", "2015-02-07 21:18:54.054116"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.061122"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:18:54.061122"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.063124"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:18:54.063124"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (31.0ms)
Completed 200 OK in 34ms (Views: 31.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.108167"], ["name", "Koff"], ["updated_at", "2015-02-07 21:18:54.108167"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:18:54.118177"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.118177"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:18:54.120178"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.120178"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.125183"], ["password_digest", "$2a$04$snKarPd5BQjv/D4KhL9kBukCH6TawF0JtpCQxjXtYPRfVpzjEpe2S"], ["updated_at", "2015-02-07 21:18:54.125183"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (1.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 18.0ms | ActiveRecord: 2.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (18.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 23ms (Views: 23.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:18:54.237290"], ["score", 15], ["updated_at", "2015-02-07 21:18:54.237290"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:18:54.240293"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (9.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.272323"], ["password_digest", "$2a$04$dmiYzIhunHz1mWOCxZ5GrO0SWjFRAzyUisVogHK7O09VLx4bOqRRC"], ["updated_at", "2015-02-07 21:18:54.272323"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (6.0ms)
  Rendered users/new.html.erb within layouts/application (11.0ms)
Completed 200 OK in 14ms (Views: 14.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.296347"], ["password_digest", "$2a$04$/tAyMyjF3XP5acQi4rKi5eWXlRm4uyqMcIGWN8mdegziXbn4nVpQa"], ["updated_at", "2015-02-07 21:18:54.296347"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (6.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (21.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.315365"], ["password_digest", "$2a$04$pvQDhJpD0sLFFcgCuv7Ha.wNLiL0rUAhOYyS8aUNjbGjHjxI6FqjW"], ["updated_at", "2015-02-07 21:18:54.315365"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.366413"], ["password_digest", "$2a$04$D.PgWd/iFCjjHgADJU1rDeFUeeTAJIhx/9wSAjJA5tEzuVZKqNeY6"], ["updated_at", "2015-02-07 21:18:54.366413"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:18:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.388434"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.388434"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.413458"], ["password_digest", "$2a$04$xiOMXbEIy2du60ZOoQ3WEOESbUSdUKaymrZF5o8jJfWa6BqQH.vRC"], ["updated_at", "2015-02-07 21:18:54.413458"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.419463"], ["password_digest", "$2a$04$Ati8cVsbvehqjVC2R9zRVO7H.NUk/fiK6rAGrKPUoACufLzEbONva"], ["updated_at", "2015-02-07 21:18:54.419463"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.421465"], ["score", 10], ["updated_at", "2015-02-07 21:18:54.421465"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 21:18:54.422467"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.423468"], ["score", 20], ["updated_at", "2015-02-07 21:18:54.423468"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 21:18:54.424468"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.430474"], ["password_digest", "$2a$04$l0XxjVJ9RAVNq1zhoj30jOntlVDVGlK7oXZSoW8q6grN9.h7Y.kPe"], ["updated_at", "2015-02-07 21:18:54.430474"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.437481"], ["password_digest", "$2a$04$OMePyuiPd2iP0HkZeUWeuOZKVXKq6UXPJtLUwoYgjKBV9HFMFtukW"], ["updated_at", "2015-02-07 21:18:54.437481"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.445489"], ["password_digest", "$2a$04$eIz3R/.02YaN8QBNJWKypegyRCowqdrgoPHDwcZb3W03DSy42enQG"], ["updated_at", "2015-02-07 21:18:54.445489"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.447490"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:18:54.447490"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:18:54.448491"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.448491"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:18:54.449492"], ["score", 10], ["updated_at", "2015-02-07 21:18:54.449492"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (1.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.456499"], ["password_digest", "$2a$04$z4T3fOEROMIv9V7zqflyve3PhG9t/0VL3Y7Kn/h.8piHaLDvk/sUG"], ["updated_at", "2015-02-07 21:18:54.456499"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.460503"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:18:54.460503"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:18:54.463506"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.463506"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:18:54.464507"], ["score", 10], ["updated_at", "2015-02-07 21:18:54.464507"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.465507"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:18:54.465507"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 21:18:54.466508"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.466508"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 21:18:54.466508"], ["score", 20], ["updated_at", "2015-02-07 21:18:54.466508"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.467509"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:18:54.467509"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 21:18:54.468510"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.468510"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 21:18:54.469511"], ["score", 15], ["updated_at", "2015-02-07 21:18:54.469511"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.470512"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:18:54.470512"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 21:18:54.471513"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.471513"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 21:18:54.471513"], ["score", 7], ["updated_at", "2015-02-07 21:18:54.471513"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.472514"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:18:54.472514"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 21:18:54.473515"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.473515"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 21:18:54.474516"], ["score", 9], ["updated_at", "2015-02-07 21:18:54.474516"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.475517"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:18:54.475517"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 21:18:54.476518"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.476518"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 21:18:54.477519"], ["score", 25], ["updated_at", "2015-02-07 21:18:54.477519"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.484526"], ["password_digest", "$2a$04$W41VyBVtifOoE6gfMFXq..IkVZSBGu6esnrJEWsd.6uXkr2SgTJbm"], ["updated_at", "2015-02-07 21:18:54.484526"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.489530"], ["password_digest", "$2a$04$/D9inUS0N1dUBohX3CANK.MAYBcz8pChULZ62D63QZySXUP26lFjq"], ["updated_at", "2015-02-07 21:18:54.489530"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.495536"], ["password_digest", "$2a$04$yKhiHb/kufCGTgObE3sReuafsFrz1lyj6yfirEI7UeFtSos7J/pJ6"], ["updated_at", "2015-02-07 21:18:54.495536"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.497538"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:18:54.497538"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:18:54.499541"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.499541"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:18:54.501542"], ["score", 10], ["updated_at", "2015-02-07 21:18:54.501542"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.508548"], ["password_digest", "$2a$04$SZU67FZC.XQqack3QK1PhemQKqDf26TXUxLG8AmBRrVKeph46Nk2u"], ["updated_at", "2015-02-07 21:18:54.508548"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.513553"], ["password_digest", "$2a$04$7Lq/xJt/bRz6FF5g36jwUe6sRiA3SMdoL7ud3b939HasbozFHMVsm"], ["updated_at", "2015-02-07 21:18:54.513553"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:18:54.519559"], ["password_digest", "$2a$04$Pb265EVnZ.QKGeIHyRSlfeD/HIaxHUTFGPb9OxAoavZycjRajPyX."], ["updated_at", "2015-02-07 21:18:54.519559"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:18:54.521561"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:18:54.521561"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:18:54.522562"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:18:54.522562"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:18:54.523563"], ["score", 10], ["updated_at", "2015-02-07 21:18:54.523563"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:21:34 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 40ms (Views: 27.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:21:34.312204"], ["name", "Koff"], ["updated_at", "2015-02-07 21:21:34.312204"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:21:34.329220"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:21:34.329220"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:21:34.330221"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:21:34.330221"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:21:34 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:21:34.342232"], ["name", "Koff"], ["updated_at", "2015-02-07 21:21:34.342232"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:21:34.347237"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:21:34.347237"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:21:34.348238"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:21:34.348238"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:21:34 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:21:34 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (31.0ms)
Completed 200 OK in 33ms (Views: 32.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:21:34.392280"], ["name", "Koff"], ["updated_at", "2015-02-07 21:21:34.392280"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:21:34.400288"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 21:21:34.400288"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:21:34.402290"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 21:21:34.402290"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:21:34.407294"], ["password_digest", "$2a$04$Ln.OQHa0X39pNt221tHPlOEaULDZCHyd9R9exe4xCwYJ0P88rdhWS"], ["updated_at", "2015-02-07 21:21:34.407294"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:21:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:21:34 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:21:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 18.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-07 23:21:34 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (17.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 21ms (Views: 21.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-07 23:21:34 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:21:34.489372"], ["score", 15], ["updated_at", "2015-02-07 21:21:34.489372"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:21:34.492376"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:21:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:30.904578"], ["password_digest", "$2a$04$MSQXiHidlNBuvDhvG6.eGu75gkMzSMRnXNLemTT7fcQ3iBbODsGmC"], ["updated_at", "2015-02-07 21:22:30.904578"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-07 23:22:30 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (13.0ms)
  Rendered users/new.html.erb within layouts/application (20.0ms)
Completed 200 OK in 25ms (Views: 24.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-07 23:22:30 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:30.964635"], ["password_digest", "$2a$04$godd0ZZD4VJ.6HoL.gRj3eRGAcz0i8XRWlVYBjnzbXqEFmZ14vq8q"], ["updated_at", "2015-02-07 21:22:30.964635"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 14ms (ActiveRecord: 2.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-07 23:22:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (18.1ms)
Completed 200 OK in 29ms (Views: 21.1ms | ActiveRecord: 2.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.021829"], ["password_digest", "$2a$04$GtHXmZ.JNcyF9i468fnR.euTuk69UpQhZyjwZg3BNlAb6rCXfPc1S"], ["updated_at", "2015-02-07 21:22:31.021829"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:22:31 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:22:31 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:22:31 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (21.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 37ms (Views: 32.0ms | ActiveRecord: 3.0ms)
  [1m[36m (6.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.120924"], ["password_digest", "$2a$04$zYvG6IjSr63OrhUNo8/kqeXRHKtL169v7RJzbEOp4qu.5TcbO5.pO"], ["updated_at", "2015-02-07 21:22:31.120924"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:22:31 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:22:31 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:22:31 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.176977"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:31.176977"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.283078"], ["password_digest", "$2a$04$/nMfK7xHwEwD60PzRrAQaO.1YZhY8CCNTZZBFHrBdSVcD.XB.XsPm"], ["updated_at", "2015-02-07 21:22:31.283078"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.302096"], ["password_digest", "$2a$04$Hs./eGCTjvdLzoayWmPK6.8r9sSwnLDsLx1cGMUHomgwxUp4jgr9u"], ["updated_at", "2015-02-07 21:22:31.302096"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:22:31.312106"], ["score", 10], ["updated_at", "2015-02-07 21:22:31.312106"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:22:31.317111"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:22:31.322115"], ["score", 20], ["updated_at", "2015-02-07 21:22:31.322115"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 21:22:31.327120"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.345137"], ["password_digest", "$2a$04$CUO/iCU4MqmzFJiM62q/p.m3uOW5AvkLK/HCl2JwVxHtmqSSZxtma"], ["updated_at", "2015-02-07 21:22:31.345137"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.361152"], ["password_digest", "$2a$04$c.0Kgfiz6JyIDQV/ltoMQOP/wr8WzJbveR0BCd9wsSgqaD5KEPw9O"], ["updated_at", "2015-02-07 21:22:31.361152"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:31.380170"], ["password_digest", "$2a$04$KWFfi5Mu48Z97OSHOfQurewztnXaiIA/PcKjWBWehIdmJS7smH7oK"], ["updated_at", "2015-02-07 21:22:31.380170"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.387177"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:31.387177"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:22:31.393183"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:31.393183"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:22:31.400190"], ["score", 10], ["updated_at", "2015-02-07 21:22:31.400190"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:31.423212"], ["password_digest", "$2a$04$2BvHaHQbbI.a2g.o9AoRH.SnIspAinseZ6ajDcOvgFI1U1EShfvJa"], ["updated_at", "2015-02-07 21:22:31.423212"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.431219"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:31.431219"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:22:31.437225"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:31.437225"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:22:31.444231"], ["score", 10], ["updated_at", "2015-02-07 21:22:31.444231"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:31.451238"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:31.451238"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 21:22:31.456243"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:31.456243"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 21:22:31.463250"], ["score", 20], ["updated_at", "2015-02-07 21:22:31.463250"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.474261"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:31.474261"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 21:22:31.480266"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:31.480266"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 21:22:31.486272"], ["score", 15], ["updated_at", "2015-02-07 21:22:31.486272"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:31.493278"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:31.493278"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 21:22:31.498283"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:31.498283"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 21:22:31.507291"], ["score", 7], ["updated_at", "2015-02-07 21:22:31.507291"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.514298"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:31.514298"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 21:22:31.519303"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:31.519303"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 21:22:31.525309"], ["score", 9], ["updated_at", "2015-02-07 21:22:31.525309"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:31.532315"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:31.532315"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 21:22:31.537320"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:31.537320"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 21:22:31.544327"], ["score", 25], ["updated_at", "2015-02-07 21:22:31.544327"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (1.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.568350"], ["password_digest", "$2a$04$4cpW40BXY1D/HZeoi0gqduvQtf0T2T5bqms.Ew2UcK/TXNOXirzSW"], ["updated_at", "2015-02-07 21:22:31.568350"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.584365"], ["password_digest", "$2a$04$VgKtIXdN9yTublgRY/nN0uYvmJv8CfrYeHWDQgWmxaBMwANP8Jvcy"], ["updated_at", "2015-02-07 21:22:31.584365"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:31.601381"], ["password_digest", "$2a$04$uD06gdb0rPDjNVbUI9CrNuMgKI32/HgunAxpaRFOsWImB.tHsUydG"], ["updated_at", "2015-02-07 21:22:31.601381"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.608388"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:31.608388"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:22:31.614394"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:31.614394"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:22:31.620399"], ["score", 10], ["updated_at", "2015-02-07 21:22:31.620399"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:31.643421"], ["password_digest", "$2a$04$U9v0kxkZhv0wzNUNSH.sh.ES6iigZsU2rzVI9.q1AtdMgtguH.iL2"], ["updated_at", "2015-02-07 21:22:31.643421"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:31.657434"], ["password_digest", "$2a$04$DaEtfjrpobxAiH4mYd5p..SZvYYJ7PKZmxq0TT/bpTEF5QkIzk9tC"], ["updated_at", "2015-02-07 21:22:31.657434"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:31.673450"], ["password_digest", "$2a$04$iVSdXS2O99UXep93hX1qkuk2wUhwJXk6sWh0PmGQYXyZ.9H.SQrFO"], ["updated_at", "2015-02-07 21:22:31.673450"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:31.681457"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:31.681457"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:22:31.686462"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:31.686462"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:22:31.693469"], ["score", 10], ["updated_at", "2015-02-07 21:22:31.693469"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 39ms (Views: 27.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.225623"], ["name", "Koff"], ["updated_at", "2015-02-07 21:22:42.225623"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.243641"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:22:42.243641"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.244641"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:22:42.244641"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.256653"], ["name", "Koff"], ["updated_at", "2015-02-07 21:22:42.256653"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.261658"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:22:42.261658"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.263659"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:22:42.263659"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (31.0ms)
Completed 200 OK in 35ms (Views: 32.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.307702"], ["name", "Koff"], ["updated_at", "2015-02-07 21:22:42.307702"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:22:42.315709"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.315709"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:22:42.317711"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.317711"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.322716"], ["password_digest", "$2a$04$GrhThy9FLi8xHErnI8mQp.1PTP7xcOtknqrj37UehIJfGX3PBCIpO"], ["updated_at", "2015-02-07 21:22:42.322716"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 19.2ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (17.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 22ms (Views: 22.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:22:42.404931"], ["score", 15], ["updated_at", "2015-02-07 21:22:42.404931"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:22:42.407934"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 2.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.429955"], ["password_digest", "$2a$04$qYaicQTG1taFIRmsnjku6e1vfqXcTBMMAP9PDYusZkmU8/Lauff7."], ["updated_at", "2015-02-07 21:22:42.429955"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (8.0ms)
  Rendered users/new.html.erb within layouts/application (12.0ms)
Completed 200 OK in 15ms (Views: 14.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.452977"], ["password_digest", "$2a$04$JJLL8KsWeOWp0m1pU/p.gu2KmfjllOuMOeVZNx.NmS3i8yFRR.sdm"], ["updated_at", "2015-02-07 21:22:42.452977"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.465989"], ["password_digest", "$2a$04$L1k0WXk.c26/xwB3k4eZauJIJmq84ecN3Qku7dTDJW5UqUnFWooqu"], ["updated_at", "2015-02-07 21:22:42.465989"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.486009"], ["password_digest", "$2a$04$CV.tkJQpyzCxBIsqZ69uz.PZu23jsP24v6zVyg8VtdVfHpYX6aJs."], ["updated_at", "2015-02-07 21:22:42.486009"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:22:42 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.505027"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.505027"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.526047"], ["password_digest", "$2a$04$otma..atoyJOLBMYgzICEuB548i8p8AuTqYxSDbDvNvfmmaIfWpha"], ["updated_at", "2015-02-07 21:22:42.526047"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.532052"], ["password_digest", "$2a$04$BmRU9uqaNKM0mNv7I/ns..lGvt30ts45vP9nQ7aUGDuriRenGMaOe"], ["updated_at", "2015-02-07 21:22:42.532052"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:22:42.535055"], ["score", 10], ["updated_at", "2015-02-07 21:22:42.535055"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:22:42.536056"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:22:42.537057"], ["score", 20], ["updated_at", "2015-02-07 21:22:42.537057"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 21:22:42.538058"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.544064"], ["password_digest", "$2a$04$cdAjiVBoj0OWkl6/3tYRr.cXLx071HWJZniEp.aGBSlUNM8aEBjIG"], ["updated_at", "2015-02-07 21:22:42.544064"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.550070"], ["password_digest", "$2a$04$BcKxlgVvaWIsFNSv/SldL.krH2FcP4KaQjxANjbscwLbZoEHtj5iu"], ["updated_at", "2015-02-07 21:22:42.550070"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.557076"], ["password_digest", "$2a$04$97AcdQWK/CT8GPEVbQWYzeGduxBpmURQ05E6YLrUOYaoChwZJq.FW"], ["updated_at", "2015-02-07 21:22:42.557076"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.559078"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:42.559078"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:22:42.563082"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.563082"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:22:42.564083"], ["score", 10], ["updated_at", "2015-02-07 21:22:42.564083"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (65.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.570089"], ["password_digest", "$2a$04$qoCst4NP.AhkeDD7YfE0E.nM2MYmCkQ487oAycLwuFYmNe3lpT5NS"], ["updated_at", "2015-02-07 21:22:42.570089"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.637153"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:42.637153"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:22:42.638154"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.638154"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:22:42.639154"], ["score", 10], ["updated_at", "2015-02-07 21:22:42.639154"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.640155"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:42.640155"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 21:22:42.641156"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.641156"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 21:22:42.642157"], ["score", 20], ["updated_at", "2015-02-07 21:22:42.642157"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.643158"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:42.643158"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 21:22:42.643158"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.643158"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 21:22:42.644159"], ["score", 15], ["updated_at", "2015-02-07 21:22:42.644159"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.645160"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:42.645160"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 21:22:42.646161"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.646161"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 21:22:42.647162"], ["score", 7], ["updated_at", "2015-02-07 21:22:42.647162"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.648163"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:42.648163"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 21:22:42.648163"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.648163"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 21:22:42.649164"], ["score", 9], ["updated_at", "2015-02-07 21:22:42.649164"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.650165"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:42.650165"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 21:22:42.651166"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.651166"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 21:22:42.652167"], ["score", 25], ["updated_at", "2015-02-07 21:22:42.652167"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.658173"], ["password_digest", "$2a$04$rgBUOo6ShA65CryxFo5qi.YHM/2bOzLkH5L0qmtTZMccPyH.Q1xrK"], ["updated_at", "2015-02-07 21:22:42.658173"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.663177"], ["password_digest", "$2a$04$6acnyrY8W5J2acIBIVQwIeHFZJsa2HeTkS2I3hnDy2vVYaSTJLxj."], ["updated_at", "2015-02-07 21:22:42.663177"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.669183"], ["password_digest", "$2a$04$bKY88AiJgMDq9RLjnYFZeuArpiN6ykkxSlM6OZAL7Vr9eYwTTPUaK"], ["updated_at", "2015-02-07 21:22:42.669183"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.671185"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:42.671185"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:22:42.672186"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.672186"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:22:42.673187"], ["score", 10], ["updated_at", "2015-02-07 21:22:42.673187"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.680193"], ["password_digest", "$2a$04$14lU9Z7r3itbzBtJUfa5seeia47659c0GwxioVd0OX22Kj/z2E9Vy"], ["updated_at", "2015-02-07 21:22:42.680193"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.685198"], ["password_digest", "$2a$04$iD.oglDBUCXDuCz28HgvZubEzn4yIbZyDCj5fTCf4oVhTr6z4ew2i"], ["updated_at", "2015-02-07 21:22:42.685198"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:22:42.693206"], ["password_digest", "$2a$04$AxwnPQZPKaXj8Vh78wyYe.sGV0288eBNPUNQZPMbroJOpK8s4U2xm"], ["updated_at", "2015-02-07 21:22:42.693206"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:22:42.695208"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:22:42.695208"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:22:42.696209"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:22:42.696209"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:22:42.697210"], ["score", 10], ["updated_at", "2015-02-07 21:22:42.697210"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:27:00 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 60ms (Views: 27.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:00.974624"], ["name", "Koff"], ["updated_at", "2015-02-07 21:27:00.974624"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:00.989639"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:27:00.989639"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:00.990640"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:27:00.990640"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:27:00 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.001650"], ["name", "Koff"], ["updated_at", "2015-02-07 21:27:01.001650"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.003651"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:27:01.003651"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.004652"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:27:01.004652"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:27:01 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:27:01 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (31.0ms)
Completed 200 OK in 34ms (Views: 33.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.048695"], ["name", "Koff"], ["updated_at", "2015-02-07 21:27:01.048695"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:27:01.057703"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.057703"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:27:01.059705"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.059705"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.064710"], ["password_digest", "$2a$04$r7Q4OUAOpdfVRPqsU2NLQ.4WCR4hS0.7IZuQp2uLp61c/Z/7IuvSy"], ["updated_at", "2015-02-07 21:27:01.064710"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.071716"], ["password_digest", "$2a$04$zh7WW8hDBgLIAdPg7dIIcurrqux5NFjSNcTG6zj..hOrfGXKK10f."], ["updated_at", "2015-02-07 21:27:01.071716"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-07 23:27:01 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (15.0ms)
  Rendered users/new.html.erb within layouts/application (19.0ms)
Completed 200 OK in 23ms (Views: 23.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-07 23:27:01 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (29.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.110753"], ["password_digest", "$2a$04$i8lwA1NkSPRzfTKuyI0nDeY0O9o5BsQiN4aIjRErZn05FAm.Kr8pi"], ["updated_at", "2015-02-07 21:27:01.110753"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 32ms (ActiveRecord: 29.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-07 23:27:01 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (13.0ms)
Completed 200 OK in 15ms (Views: 14.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.163804"], ["password_digest", "$2a$04$BVrbGwdshtbvKdLbcBexlOESpB68dWjPcAM8s5Gh.SXPf7OhNT.wa"], ["updated_at", "2015-02-07 21:27:01.163804"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (111.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.170811"], ["password_digest", "$2a$04$hT0/xeomFe383GBpkusOwu4384j0yqMnO6tCA31xCzTu97vgxsXk2"], ["updated_at", "2015-02-07 21:27:01.170811"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:27:01 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:27:01 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:27:01 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (20.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.312946"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.312946"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.352984"], ["password_digest", "$2a$04$mhxmCOl19.qDbXSywoZH6ez0ge81jdfETPmliC8YgZwbfsT1E.44W"], ["updated_at", "2015-02-07 21:27:01.352984"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.358990"], ["password_digest", "$2a$04$ssfLrCZ.YFuUA2YbRe/1ZeqbnQDFJzd1E2fot4w4kHp3jqYGwX6IK"], ["updated_at", "2015-02-07 21:27:01.358990"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:27:01.362994"], ["score", 10], ["updated_at", "2015-02-07 21:27:01.362994"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:27:01.364996"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:27:01.366998"], ["score", 20], ["updated_at", "2015-02-07 21:27:01.366998"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.373003"], ["password_digest", "$2a$04$opFR44j1VvBi7BpAlYZHyuNXOn.1RRIT68pcjueeVs99Q26WiiIqO"], ["updated_at", "2015-02-07 21:27:01.373003"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.380010"], ["password_digest", "$2a$04$2r3X.Su8HBkKhb7BpPm41elSpWvms.Wa86H3CzlbWmHyazCgLxb/i"], ["updated_at", "2015-02-07 21:27:01.380010"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.386016"], ["password_digest", "$2a$04$IqqKkJABC1woE7Tznj7HU.szbVGEiYmwaI47KK04ANSIWFjGbGlWm"], ["updated_at", "2015-02-07 21:27:01.386016"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.388018"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:27:01.388018"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:27:01.390020"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.390020"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:27:01.392022"], ["score", 10], ["updated_at", "2015-02-07 21:27:01.392022"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (1.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.399028"], ["password_digest", "$2a$04$8WMAfjniLlT8BvTS/XklHu.cSByBgEWn2zTkVvOpN.63ApUY7XrK."], ["updated_at", "2015-02-07 21:27:01.399028"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.401030"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:27:01.401030"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:27:01.403032"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.403032"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:27:01.404033"], ["score", 10], ["updated_at", "2015-02-07 21:27:01.404033"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.405034"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:27:01.405034"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 21:27:01.406035"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.406035"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 21:27:01.406035"], ["score", 20], ["updated_at", "2015-02-07 21:27:01.406035"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.407036"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:27:01.407036"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 21:27:01.408037"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.408037"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 21:27:01.409038"], ["score", 15], ["updated_at", "2015-02-07 21:27:01.409038"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.410039"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:27:01.410039"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 21:27:01.411040"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.411040"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 21:27:01.412040"], ["score", 7], ["updated_at", "2015-02-07 21:27:01.412040"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.413041"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:27:01.413041"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 21:27:01.414042"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.414042"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 21:27:01.415043"], ["score", 9], ["updated_at", "2015-02-07 21:27:01.415043"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.415043"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:27:01.415043"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 21:27:01.416044"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.416044"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 21:27:01.417045"], ["score", 25], ["updated_at", "2015-02-07 21:27:01.417045"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.424052"], ["password_digest", "$2a$04$tAZwpGHKJOognvj2Bvsn3eOxnLxg6jM0ShO7XU9EgEAcQa4ZTCNRa"], ["updated_at", "2015-02-07 21:27:01.424052"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.429057"], ["password_digest", "$2a$04$MYjo0qVvK3y5GS2Mkm7G8.e6BlWgpC7xRXb1xJ9sgtnDE4ZbwMKbS"], ["updated_at", "2015-02-07 21:27:01.429057"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.435062"], ["password_digest", "$2a$04$.1w6tivkeZ8A1QEcPDzKdePCGO.7TT163jrRAdT7f/mTzA8aZIpM2"], ["updated_at", "2015-02-07 21:27:01.435062"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.436063"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:27:01.436063"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:27:01.438065"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.438065"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:27:01.439066"], ["score", 10], ["updated_at", "2015-02-07 21:27:01.439066"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.446073"], ["password_digest", "$2a$04$WEIXOJ4L8YaawEgMWecRp.KHn/n84uCgxXvxFTLdIxjM9.ndT7khi"], ["updated_at", "2015-02-07 21:27:01.446073"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.451078"], ["password_digest", "$2a$04$CyleEjmPXQvtEg6dJGRjRuscFqKtJIweag2PbDRdGH24Og03zLUmC"], ["updated_at", "2015-02-07 21:27:01.451078"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (4.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:27:01.460086"], ["password_digest", "$2a$04$XNzZuwPsuCrBDpiIiI0yiu/iAWN/56a4ep1ry0utn6tZrL1Gi31ta"], ["updated_at", "2015-02-07 21:27:01.460086"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:27:01.462088"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:27:01.462088"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:27:01.463089"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:27:01.463089"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:27:01.464090"], ["score", 10], ["updated_at", "2015-02-07 21:27:01.464090"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:29:22 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 40ms (Views: 28.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:22.914281"], ["name", "Koff"], ["updated_at", "2015-02-07 21:29:22.914281"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:22.930296"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:29:22.930296"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:22.931297"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:29:22.931297"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:29:22 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (30.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:22.971335"], ["name", "Koff"], ["updated_at", "2015-02-07 21:29:22.971335"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:22.972336"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:29:22.972336"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:22.973337"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:29:22.973337"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:29:22 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (1.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 1.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:29:22 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (30.0ms)
Completed 200 OK in 32ms (Views: 30.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.017379"], ["name", "Koff"], ["updated_at", "2015-02-07 21:29:23.017379"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:29:23.025386"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.025386"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:29:23.027389"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.027389"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.032393"], ["password_digest", "$2a$04$ZEJAhD8XaLjTihdFKS5qpOXBucdjP0FHWbt7jYd7qEdLNEdMnV1FG"], ["updated_at", "2015-02-07 21:29:23.032393"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.038399"], ["password_digest", "$2a$04$icFgS9sGVBEUBCsmdRlf6eI/VQRqpUiqaw78ueCbveLhbbQs7gEEO"], ["updated_at", "2015-02-07 21:29:23.038399"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-07 23:29:23 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (17.0ms)
  Rendered users/new.html.erb within layouts/application (22.0ms)
Completed 200 OK in 24ms (Views: 24.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-07 23:29:23 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.077436"], ["password_digest", "$2a$04$AZfE8FFOc4/Pi0kxBUj.8OZHVs2Wqqf19bf/tLfqJLmU.Q1iFn1S."], ["updated_at", "2015-02-07 21:29:23.077436"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-07 23:29:23 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (11.0ms)
Completed 200 OK in 14ms (Views: 14.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.101459"], ["password_digest", "$2a$04$5LkMlWY9UbrQDrcq7AE2jeHTA0UJf39KKWt41SMlKVsn1j3/vziG."], ["updated_at", "2015-02-07 21:29:23.101459"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.107465"], ["password_digest", "$2a$04$W6AJ0TPaqG2MEVS3z2g2I.jCxg1dYzvKZl3/S2.2Cm5GlPjzVc6l6"], ["updated_at", "2015-02-07 21:29:23.107465"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:29:23 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:29:23 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:29:23 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.139496"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.139496"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.162517"], ["password_digest", "$2a$04$pyqwM2StgBfp/uTrac18SeFzu2.bJCAJLeQwso1jFXdvxb.2cyu2C"], ["updated_at", "2015-02-07 21:29:23.162517"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (43.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.169524"], ["password_digest", "$2a$04$XjYy9Iaz2rOSB6kCO736Ieq.Fkw/7BIIpU.0.3GaQuOY3RQEbGEOa"], ["updated_at", "2015-02-07 21:29:23.169524"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:29:23.218571"], ["score", 10], ["updated_at", "2015-02-07 21:29:23.218571"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:29:23.220573"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:29:23.222575"], ["score", 20], ["updated_at", "2015-02-07 21:29:23.222575"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 21:29:23.223576"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.229581"], ["password_digest", "$2a$04$vMPnR2w4ecu6PqPZx7TPb.fdg4l5BuQcGHOrsHwRzXKy3KzWUx8Pq"], ["updated_at", "2015-02-07 21:29:23.229581"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.236588"], ["password_digest", "$2a$04$INGAuBrbeXgp7GKXj5ScxORks8th3H83umfKuk64N.yv/sU4InktK"], ["updated_at", "2015-02-07 21:29:23.236588"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.243594"], ["password_digest", "$2a$04$xzCJC73P6z2942jOZnv1oe/ijukTuQGQ/0W65RNviM6gmAHNQnW1i"], ["updated_at", "2015-02-07 21:29:23.243594"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.245597"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:29:23.245597"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:29:23.246597"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.246597"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:29:23.248599"], ["score", 10], ["updated_at", "2015-02-07 21:29:23.248599"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.255606"], ["password_digest", "$2a$04$ePXZq3iHP7RGtcHhNnYK7.lsFw4tUKKv2EIHn4PzaR56/3matUsKi"], ["updated_at", "2015-02-07 21:29:23.255606"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.257608"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:29:23.257608"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:29:23.259610"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.259610"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:29:23.260611"], ["score", 10], ["updated_at", "2015-02-07 21:29:23.260611"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.261612"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:29:23.261612"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 21:29:23.262613"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.262613"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 21:29:23.262613"], ["score", 20], ["updated_at", "2015-02-07 21:29:23.262613"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.263614"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:29:23.263614"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 21:29:23.264615"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.264615"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 21:29:23.265616"], ["score", 15], ["updated_at", "2015-02-07 21:29:23.265616"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.266617"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:29:23.266617"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 21:29:23.267617"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.267617"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 21:29:23.268619"], ["score", 7], ["updated_at", "2015-02-07 21:29:23.268619"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.269619"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:29:23.269619"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 21:29:23.269619"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.269619"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 21:29:23.270620"], ["score", 9], ["updated_at", "2015-02-07 21:29:23.270620"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.271621"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:29:23.271621"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 21:29:23.272622"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.272622"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 21:29:23.273623"], ["score", 25], ["updated_at", "2015-02-07 21:29:23.273623"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.281631"], ["password_digest", "$2a$04$uuaO8mpewfWCCZHh99dnNOG1Viteg63LlouxXfIeEGL8QVhFXayxq"], ["updated_at", "2015-02-07 21:29:23.281631"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.287636"], ["password_digest", "$2a$04$nkwEpXXSwVL6Ogxp3kwEnOY1Yk0aKX7/gnHSSpoKjoMxFe4Clx0Vm"], ["updated_at", "2015-02-07 21:29:23.287636"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.294644"], ["password_digest", "$2a$04$SAG7bAZG1PaN4uLrGsWrl.cL/hRvkXH5yulx0HfMarrB5tCS5svnq"], ["updated_at", "2015-02-07 21:29:23.294644"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.296645"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:29:23.296645"], ["year", 1900]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:29:23.299648"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.299648"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:29:23.300649"], ["score", 10], ["updated_at", "2015-02-07 21:29:23.300649"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (3.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.307806"], ["password_digest", "$2a$04$vn6akl4QDVXghF6KZ0ikvOzfTmuOob6v3N.9Ly4HKGcMsdv60vkfW"], ["updated_at", "2015-02-07 21:29:23.307806"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.313812"], ["password_digest", "$2a$04$L2er8uy1G0sLD4ej32rB7ehDVyyJlWdt3g0rQi3vhGPNkgYSz8GvK"], ["updated_at", "2015-02-07 21:29:23.313812"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:29:23.318817"], ["password_digest", "$2a$04$q.U34Y2Onblf7zjXTmvOiOtjpoBrhYgdGkv6rQPUlp6Xp1rChd1ru"], ["updated_at", "2015-02-07 21:29:23.318817"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:29:23.320819"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:29:23.320819"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:29:23.322821"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:29:23.322821"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:29:23.323822"], ["score", 10], ["updated_at", "2015-02-07 21:29:23.323822"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:33:34 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 41ms (Views: 27.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.031574"], ["name", "Koff"], ["updated_at", "2015-02-07 21:33:35.031574"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.045587"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:33:35.045587"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.047589"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:33:35.047589"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.058600"], ["name", "Koff"], ["updated_at", "2015-02-07 21:33:35.058600"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.062604"], ["name", "Karjala"], ["updated_at", "2015-02-07 21:33:35.062604"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.063605"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 21:33:35.063605"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (30.0ms)
Completed 200 OK in 34ms (Views: 30.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.107647"], ["name", "Koff"], ["updated_at", "2015-02-07 21:33:35.107647"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:33:35.116655"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.116655"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:33:35.119658"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.119658"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.123662"], ["password_digest", "$2a$04$4hGUd1z/E3r.oTkSdEGdpeNT88hZWlQMKephZAoNtUeJZmJ/iy1iy"], ["updated_at", "2015-02-07 21:33:35.123662"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 17.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (18.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 24ms (Views: 23.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:33:35.208743"], ["score", 15], ["updated_at", "2015-02-07 21:33:35.208743"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:33:35.210745"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.232766"], ["password_digest", "$2a$04$vcf7lwb9fQ4709srhArbm.Pd6Z6LWIHCDhJKn1b1QFjPlR3bla4Am"], ["updated_at", "2015-02-07 21:33:35.232766"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (5.0ms)
  Rendered users/new.html.erb within layouts/application (10.0ms)
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.254787"], ["password_digest", "$2a$04$6u6Al40qxVv173ZveF82vu4bCf/pU/7U9WlohEPYkazBk/eX6mxHa"], ["updated_at", "2015-02-07 21:33:35.254787"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.266798"], ["password_digest", "$2a$04$5pIUE2gVF/7ZFn84qf7yluoQrTXpbebmSyMNC2RdQqgxPPB/ZcheK"], ["updated_at", "2015-02-07 21:33:35.266798"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.287818"], ["password_digest", "$2a$04$F6IZV1B6abuFHlN0dnnGkeOY9qtY/NhzBgxWrgFFtXDNUtD0/wKZ6"], ["updated_at", "2015-02-07 21:33:35.287818"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-07 23:33:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.301832"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.301832"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.322852"], ["password_digest", "$2a$04$SsXEhZpwGlgeM0JD6eipketr3728djBAOWK5nCyHJRhYSbAFdKTYi"], ["updated_at", "2015-02-07 21:33:35.322852"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.329858"], ["password_digest", "$2a$04$PEwa3sLBk53jsE8q5OjsjOYvdvfej.cBE/DFK8cM/GQtjkfLQFZiG"], ["updated_at", "2015-02-07 21:33:35.329858"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:33:35.331860"], ["score", 10], ["updated_at", "2015-02-07 21:33:35.331860"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 21:33:35.332861"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 21:33:35.333862"], ["score", 20], ["updated_at", "2015-02-07 21:33:35.333862"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.339868"], ["password_digest", "$2a$04$tCxkV98qREeldClT23584.8pHbjSRAiJ/1K0zsfHX7SJQ6sRj3aIS"], ["updated_at", "2015-02-07 21:33:35.339868"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.347875"], ["password_digest", "$2a$04$ySFLGcAIdxkPrZwjPgi3hOPZMd.pYHcieno6h8m2L4HyookE.C5UG"], ["updated_at", "2015-02-07 21:33:35.347875"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.354882"], ["password_digest", "$2a$04$XAPHZslAJygWqmEQfJLWBu7AIIqX3qS8IzFv0BodAXqClIOILTOpy"], ["updated_at", "2015-02-07 21:33:35.354882"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.355883"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:33:35.355883"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:33:35.357885"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.357885"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:33:35.358886"], ["score", 10], ["updated_at", "2015-02-07 21:33:35.358886"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.364891"], ["password_digest", "$2a$04$nwD1aC5HUIyzM5ud9i4T4eJ303YSZVrvD5Q7JkrKtJ89gzyTj3nJ2"], ["updated_at", "2015-02-07 21:33:35.364891"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.366894"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:33:35.366894"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:33:35.368896"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.368896"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:33:35.369897"], ["score", 10], ["updated_at", "2015-02-07 21:33:35.369897"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.370897"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:33:35.370897"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 21:33:35.370897"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.370897"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 21:33:35.371898"], ["score", 20], ["updated_at", "2015-02-07 21:33:35.371898"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.372899"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:33:35.372899"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 21:33:35.373900"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.373900"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 21:33:35.374901"], ["score", 15], ["updated_at", "2015-02-07 21:33:35.374901"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.375902"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:33:35.375902"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 21:33:35.375902"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.375902"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 21:33:35.376903"], ["score", 7], ["updated_at", "2015-02-07 21:33:35.376903"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.377904"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:33:35.377904"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 21:33:35.378905"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.378905"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 21:33:35.379906"], ["score", 9], ["updated_at", "2015-02-07 21:33:35.379906"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.380907"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:33:35.380907"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 21:33:35.380907"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.380907"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 21:33:35.381908"], ["score", 25], ["updated_at", "2015-02-07 21:33:35.381908"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.388914"], ["password_digest", "$2a$04$Bh1WvvrMhx0PU1BoViiP9.ds9oHjHq3IbM2fY2Q7d4LTVi8fp1zNi"], ["updated_at", "2015-02-07 21:33:35.388914"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.393919"], ["password_digest", "$2a$04$0nBXMsE1IGdgSA5C9HzKCeD5x4KcT7eGIDcYTHqDfdZn9n8PCL5t."], ["updated_at", "2015-02-07 21:33:35.393919"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.399925"], ["password_digest", "$2a$04$aN/HsM13Npp9MMsMeXHb/.BLTOGOJLxWFPk9sORRnVdgu5M7WPTKi"], ["updated_at", "2015-02-07 21:33:35.399925"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.401927"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:33:35.401927"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 21:33:35.403929"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.403929"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 21:33:35.404930"], ["score", 10], ["updated_at", "2015-02-07 21:33:35.404930"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.411936"], ["password_digest", "$2a$04$JFN5LN0NM8tzyWzt6HD3TeaQOwemk8K.EwJuPcdq7Md4z8.WuWXGe"], ["updated_at", "2015-02-07 21:33:35.411936"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.416941"], ["password_digest", "$2a$04$loE1iTVmWWLgXpk/fucue.aT6hA.PBu6TgLBz4UAil2qApcl3YohO"], ["updated_at", "2015-02-07 21:33:35.416941"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 21:33:35.422947"], ["password_digest", "$2a$04$vTV3ZOeYPrA3yEYu2Nt7v.foyXb7yDXQCuC4tpsxWbAtP6V.6AeGW"], ["updated_at", "2015-02-07 21:33:35.422947"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 21:33:35.424949"], ["name", "anonymous"], ["updated_at", "2015-02-07 21:33:35.424949"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 21:33:35.425950"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 21:33:35.425950"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 21:33:35.426951"], ["score", 10], ["updated_at", "2015-02-07 21:33:35.426951"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:28:53 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (19.2ms)
  Rendered beers/new.html.erb within layouts/application (25.2ms)
Completed 200 OK in 88ms (Views: 75.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:28:53 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:53.739462"], ["name", "Koff"], ["updated_at", "2015-02-07 22:28:53.739462"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:53.747469"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:28:53.747469"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:53.749471"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:28:53.749471"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:28:53 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:53.763484"], ["name", "Koff"], ["updated_at", "2015-02-07 22:28:53.763484"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:53.764485"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:28:53.764485"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:53.766487"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:28:53.766487"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:28:53 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 00:28:53 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1[0m  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (39.0ms)
Completed 200 OK in 42ms (Views: 40.0ms | ActiveRecord: 1.0ms)
  [1m[35m (5.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (14.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:53.825543"], ["name", "Koff"], ["updated_at", "2015-02-07 22:28:53.825543"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:28:53.846563"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:53.846563"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:28:53.850567"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:53.850567"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:53.856573"], ["password_digest", "$2a$04$MK9fGIWJ3AHFCZdUiIj8x.8B/p7a1MpALJmRS6pokUORFmBFjd0k2"], ["updated_at", "2015-02-07 22:28:53.856573"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:28:53 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 12ms (Views: 12.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:28:53 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 24ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:28:53 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (19.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 25ms (Views: 23.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 00:28:53 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (1.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 12ms (Views: 9.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 00:28:53 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:28:53.969680"], ["score", 15], ["updated_at", "2015-02-07 22:28:53.969680"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 22:28:53.972683"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:28:53 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 2.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (15.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:53.995705"], ["password_digest", "$2a$04$YroQvSb3YRow9NcevO0F8u9totlkGcDKUbH/EfH/ihl3QGQ6Djsg2"], ["updated_at", "2015-02-07 22:28:53.995705"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 00:28:54 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 00:28:54 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.030738"], ["password_digest", "$2a$04$wRTQy4C9MxJ/QBENljYZEejYG3MTI4EWOE6/a7wTA2hMooDNv0y5G"], ["updated_at", "2015-02-07 22:28:54.030738"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 00:28:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.044751"], ["password_digest", "$2a$04$b0JgNfwfeDmg4yWOJCucO.UqjjD4ohL/4.h94iQi5FttK5NpQ5jbS"], ["updated_at", "2015-02-07 22:28:54.044751"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:28:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:28:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:28:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.065772"], ["password_digest", "$2a$04$GepFoAFui81lmm4Xv3D7iOZHrjhDiVB0ffJIIQ8.P5hU7btSEFsQ2"], ["updated_at", "2015-02-07 22:28:54.065772"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:28:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:28:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:28:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.079785"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:54.079785"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.101806"], ["password_digest", "$2a$04$3LpF/SWCWH/oBhuVDHMICO2QvEO1aTQm6niSzl3/EDeJWCLfaY3Ei"], ["updated_at", "2015-02-07 22:28:54.101806"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (5.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.112817"], ["password_digest", "$2a$04$1m6SjthMzvuHahip05o1OuAerrSu3j4WBIW08/dGjnCecJP3KXk5i"], ["updated_at", "2015-02-07 22:28:54.112817"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:54.114819"], ["score", 10], ["updated_at", "2015-02-07 22:28:54.114819"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 22:28:54.115819"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:54.116820"], ["score", 20], ["updated_at", "2015-02-07 22:28:54.116820"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 22:28:54.117821"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.123827"], ["password_digest", "$2a$04$kjYsMl5.DO7iA9KlzB3b6usGd9U/n6ctAFZVEOSS4sfdjGy7zLtVu"], ["updated_at", "2015-02-07 22:28:54.123827"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.130834"], ["password_digest", "$2a$04$p5RCczP3pZdhLf9P2Xx3cedLxRDnlexSEZVS8Z2H2kM4.pI1LJkWm"], ["updated_at", "2015-02-07 22:28:54.130834"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:54.136839"], ["password_digest", "$2a$04$YaieaLx44JGLkf8DtTLrUeam46xWFN/p0wguLfQR/Zxy72H4ziRvC"], ["updated_at", "2015-02-07 22:28:54.136839"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.138842"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:28:54.138842"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:28:54.139843"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:54.139843"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:28:54.140843"], ["score", 10], ["updated_at", "2015-02-07 22:28:54.140843"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:54.147850"], ["password_digest", "$2a$04$wrUxbF9q0iViepYy.8Qs2.x5oWmdUZzYqH6HjGck6zS6/NpvPS.vK"], ["updated_at", "2015-02-07 22:28:54.147850"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.149852"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:28:54.149852"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:28:54.150853"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:54.150853"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:28:54.152855"], ["score", 10], ["updated_at", "2015-02-07 22:28:54.152855"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:54.153855"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:28:54.153855"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 22:28:54.153855"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:54.153855"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 22:28:54.154856"], ["score", 20], ["updated_at", "2015-02-07 22:28:54.154856"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.155857"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:28:54.155857"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 22:28:54.156859"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:54.156859"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 22:28:54.157859"], ["score", 15], ["updated_at", "2015-02-07 22:28:54.157859"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:54.158860"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:28:54.158860"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 22:28:54.159861"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:54.159861"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 22:28:54.160862"], ["score", 7], ["updated_at", "2015-02-07 22:28:54.160862"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.161863"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:28:54.161863"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 22:28:54.161863"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:54.161863"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 22:28:54.162864"], ["score", 9], ["updated_at", "2015-02-07 22:28:54.162864"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:54.163865"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:28:54.163865"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 22:28:54.164866"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:54.164866"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 22:28:54.165867"], ["score", 25], ["updated_at", "2015-02-07 22:28:54.165867"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.172874"], ["password_digest", "$2a$04$je7usyKWssuurLJTDF/cbuhVma1YQyYuZIe8PILXn5Gj6Dgs0qtTK"], ["updated_at", "2015-02-07 22:28:54.172874"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.178880"], ["password_digest", "$2a$04$o6p9Q67p5XMqLSSBdyn1Ae43SFcxk7p9oexo.5qHBfe8aKaVlu6qO"], ["updated_at", "2015-02-07 22:28:54.178880"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:54.184885"], ["password_digest", "$2a$04$G9tq.x0IzGE1uxrCza68DOqCjGiG4qnbfd8VVl.E8I.NiWdXtI7g."], ["updated_at", "2015-02-07 22:28:54.184885"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.189890"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:28:54.189890"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:28:54.191892"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:54.191892"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:28:54.192893"], ["score", 10], ["updated_at", "2015-02-07 22:28:54.192893"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:54.198898"], ["password_digest", "$2a$04$c4IzOpiuK0ds5Us8QUC0GeTuultAntSMMIx44VNqiEuWhZZIBF5si"], ["updated_at", "2015-02-07 22:28:54.198898"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:54.204904"], ["password_digest", "$2a$04$MoJLip8pyLMBxb2eX7PZaORlpOvAISKOgPUzkQbwPWvrkkn1akNHu"], ["updated_at", "2015-02-07 22:28:54.204904"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:28:54.210910"], ["password_digest", "$2a$04$3ghsh.YGkfa5z4nkPAVYVuSU98QjsQEvBF099hLrPbVEqRHiTbh52"], ["updated_at", "2015-02-07 22:28:54.210910"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:28:54.212912"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:28:54.212912"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:28:54.213913"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:28:54.213913"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:28:54.214914"], ["score", 10], ["updated_at", "2015-02-07 22:28:54.214914"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:31:45 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (19.0ms)
  Rendered beers/new.html.erb within layouts/application (25.0ms)
Completed 200 OK in 70ms (Views: 57.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (26.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.057455"], ["name", "Koff"], ["updated_at", "2015-02-07 22:31:46.057455"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.086483"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:31:46.086483"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.088485"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:31:46.088485"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.100496"], ["name", "Koff"], ["updated_at", "2015-02-07 22:31:46.100496"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.102498"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:31:46.102498"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.104500"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:31:46.104500"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (31.0ms)
Completed 200 OK in 35ms (Views: 34.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.149543"], ["name", "Koff"], ["updated_at", "2015-02-07 22:31:46.149543"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:31:46.156550"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.156550"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:31:46.158552"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.158552"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.163556"], ["password_digest", "$2a$04$bspDOTylN8GFfUjnuwPAL.UHzk0jPVTQlESK0g6GhAhJxETp.zahK"], ["updated_at", "2015-02-07 22:31:46.163556"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (17.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 22ms (Views: 21.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:31:46.235625"], ["score", 15], ["updated_at", "2015-02-07 22:31:46.235625"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:31:46.238628"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.259648"], ["password_digest", "$2a$04$j2QIQBLTUylTrp0dRPYIEuBFWk39x8ILzf8cMjV0VmCbIkXh5P3x6"], ["updated_at", "2015-02-07 22:31:46.259648"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.276664"], ["password_digest", "$2a$04$ZDmElC/QKYY6I9IqlWCdJuH5a9x2QxUAih/Mp2AnhU0YfC2K0P3QC"], ["updated_at", "2015-02-07 22:31:46.276664"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.289676"], ["password_digest", "$2a$04$/XIxsexpU/VzwLRJeQDa4OoSqSquABSR2vgf5vpxTjmq7Sb54D8d6"], ["updated_at", "2015-02-07 22:31:46.289676"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.311697"], ["password_digest", "$2a$04$D3HBffgupqxyRm1MiWGCPeCDYX.IyvM1dvbrmB4HKYWPkBgQOZnem"], ["updated_at", "2015-02-07 22:31:46.311697"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:31:46 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.326712"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.326712"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.347732"], ["password_digest", "$2a$04$AaplLCKKpRnfgcsLLGdNXObNH7LfK0rnEDQrpdc/BluhbwBwExcla"], ["updated_at", "2015-02-07 22:31:46.347732"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.355739"], ["password_digest", "$2a$04$NAETmqnFcOg6a6n82UKBKu2IqL7Y495i2grSY58xp.saD3GXXcSzG"], ["updated_at", "2015-02-07 22:31:46.355739"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:31:46.357741"], ["score", 10], ["updated_at", "2015-02-07 22:31:46.357741"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:31:46.358742"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:31:46.359743"], ["score", 20], ["updated_at", "2015-02-07 22:31:46.359743"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.365749"], ["password_digest", "$2a$04$T1muWsExzBTuhGVPO6ssOuiD33VPZnmP.xKVavzEpidFRva5Vg6CS"], ["updated_at", "2015-02-07 22:31:46.365749"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.374757"], ["password_digest", "$2a$04$q9PAj0t9NPYjIf5g3ZAFeepAsFNNQ/wcOuqW/QnZaLr9hzry4C3lu"], ["updated_at", "2015-02-07 22:31:46.374757"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.381929"], ["password_digest", "$2a$04$W7Lf8GmCcJqlKz3Irdnb9uNpPo0e/TDKfmpMEOPqibgGyZyCoZ3F2"], ["updated_at", "2015-02-07 22:31:46.381929"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.382930"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:31:46.382930"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:31:46.385054"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.385054"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:31:46.386073"], ["score", 10], ["updated_at", "2015-02-07 22:31:46.386073"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.392167"], ["password_digest", "$2a$04$K9LoN/dZH7sWseIO.Zvo8um9f4X1fvHcljWusVsVjSo9Zi96xKxhK"], ["updated_at", "2015-02-07 22:31:46.392167"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.394168"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:31:46.394168"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:31:46.396171"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.396171"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:31:46.397171"], ["score", 10], ["updated_at", "2015-02-07 22:31:46.397171"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.398172"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:31:46.398172"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 22:31:46.399173"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.399173"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 22:31:46.400174"], ["score", 20], ["updated_at", "2015-02-07 22:31:46.400174"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.401175"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:31:46.401175"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 22:31:46.401175"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.401175"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 22:31:46.402176"], ["score", 15], ["updated_at", "2015-02-07 22:31:46.402176"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.403177"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:31:46.403177"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 22:31:46.404178"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.404178"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 22:31:46.405179"], ["score", 7], ["updated_at", "2015-02-07 22:31:46.405179"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.406180"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:31:46.406180"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 22:31:46.407181"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.407181"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 22:31:46.408181"], ["score", 9], ["updated_at", "2015-02-07 22:31:46.408181"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.409183"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:31:46.409183"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 22:31:46.409183"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.409183"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 22:31:46.410184"], ["score", 25], ["updated_at", "2015-02-07 22:31:46.410184"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.417190"], ["password_digest", "$2a$04$VrPSIi1HOrdDugDnrXHID.zPUJ3/NYYR60laZuCTgjVzUBLvKZcW2"], ["updated_at", "2015-02-07 22:31:46.417190"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.422195"], ["password_digest", "$2a$04$FRNr5GhgHhzoUIw5lRpzw.cc1.p.sxanLfU33E344UHW0KYRBCSfG"], ["updated_at", "2015-02-07 22:31:46.422195"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.428201"], ["password_digest", "$2a$04$9TOkstIpjiu9IXguHL5Jxu.g2G1s11cXI0ydXSpqkmZDy3KU6q8aG"], ["updated_at", "2015-02-07 22:31:46.428201"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.430203"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:31:46.430203"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:31:46.431204"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.431204"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:31:46.432204"], ["score", 10], ["updated_at", "2015-02-07 22:31:46.432204"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.439211"], ["password_digest", "$2a$04$c20qsEqlmPxxP80sov6S6eN2sn506j61rUQLoLdWS4yA1/lzMMEvm"], ["updated_at", "2015-02-07 22:31:46.439211"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.445217"], ["password_digest", "$2a$04$t0cXzxvCZrHku/EW9u9VeeBoSKCuaRBgKfvyRtlL0hzvd7KPnPHC2"], ["updated_at", "2015-02-07 22:31:46.445217"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:31:46.453224"], ["password_digest", "$2a$04$s/TCD2Wnq1sixi3wYOQocO4mBQjdd7ZoqqUlej0xaVW/RX6lfj/ny"], ["updated_at", "2015-02-07 22:31:46.453224"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:31:46.455227"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:31:46.455227"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:31:46.457228"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:31:46.457228"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:31:46.458230"], ["score", 10], ["updated_at", "2015-02-07 22:31:46.458230"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (21.0ms)
  Rendered beers/new.html.erb within layouts/application (27.0ms)
Completed 200 OK in 79ms (Views: 65.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.483058"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 22:32:32.483058"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/beers
Completed 302 Found in 7ms (ActiveRecord: 3.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by BeersController#index as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  Rendered beers/index.html.erb within layouts/application (14.0ms)
Completed 500 Internal Server Error in 16ms
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.524097"], ["name", "Koff"], ["updated_at", "2015-02-07 22:32:32.524097"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.526099"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:32:32.526099"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.528101"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:32:32.528101"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.538110"], ["name", "Koff"], ["updated_at", "2015-02-07 22:32:32.538110"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.541113"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:32:32.541113"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.542114"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:32:32.542114"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (28.0ms)
Completed 200 OK in 32ms (Views: 30.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.584154"], ["name", "Koff"], ["updated_at", "2015-02-07 22:32:32.584154"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:32:32.587157"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.587157"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:32:32.589159"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.589159"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.594163"], ["password_digest", "$2a$04$QYnmPuEkXgSYA9amb/5fsudsS4qihHbQIt7kfB686k0eVwnoWFUh2"], ["updated_at", "2015-02-07 22:32:32.594163"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 18.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:32:32.662228"], ["score", 15], ["updated_at", "2015-02-07 22:32:32.662228"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:32:32.666233"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (9.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.692257"], ["password_digest", "$2a$04$mC4AdNeeMTktxICzHRjSde5J.ENDcCXbwzFn2RWk80qd5TUgkxsNq"], ["updated_at", "2015-02-07 22:32:32.692257"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.711275"], ["password_digest", "$2a$04$1rzJNyzYWYajLbiHDgANC.o4m5Mr9XW2vVSKEhxxVqty0alNj9KRS"], ["updated_at", "2015-02-07 22:32:32.711275"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.725289"], ["password_digest", "$2a$04$b/eI57g5LjOSXBylviRaVOR8xyAHdTHaU0i5Wlidqt5eQ2TcYivmK"], ["updated_at", "2015-02-07 22:32:32.725289"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (1.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.748310"], ["password_digest", "$2a$04$.wHtTTm259LoaoKIUMinUuutpB1X9V7hbnR3e9wZ4g9mvTZvL2oSe"], ["updated_at", "2015-02-07 22:32:32.748310"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:32:32 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.766327"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.766327"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.790350"], ["password_digest", "$2a$04$41MMm8nRnJQQccL.TaBdIeWmVoNsu5QTyJmGXnMWgG.TQGwHdsEAW"], ["updated_at", "2015-02-07 22:32:32.790350"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.811370"], ["password_digest", "$2a$04$ZG1yXoH4gN4c67Ed2ChuM.bYNVI28Goqm2w2aMH12jle4cwNHDR.2"], ["updated_at", "2015-02-07 22:32:32.811370"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:32:32.815375"], ["score", 10], ["updated_at", "2015-02-07 22:32:32.815375"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:32:32.817376"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:32:32.818377"], ["score", 20], ["updated_at", "2015-02-07 22:32:32.818377"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.825384"], ["password_digest", "$2a$04$UV.aXEfffsS4aO9Tw1fIqOmkd8c7X1VB1WFt/T2TLt7UDd6bJ3MFW"], ["updated_at", "2015-02-07 22:32:32.825384"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.832390"], ["password_digest", "$2a$04$4u5JdlBSZHIyjOt6wjv5ke8gJ7d7CsI2ubvvMgih17bVWLHXgKcRu"], ["updated_at", "2015-02-07 22:32:32.832390"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.842400"], ["password_digest", "$2a$04$6f9DM.CJtNe3RoHkfLHXHOh8cB0Qg08kOjb9VyzbmdGGM41CHbauS"], ["updated_at", "2015-02-07 22:32:32.842400"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.844403"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:32:32.844403"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:32:32.846404"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.846404"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:32:32.847405"], ["score", 10], ["updated_at", "2015-02-07 22:32:32.847405"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.853411"], ["password_digest", "$2a$04$PBO2LRfmh3d6/I8Y5gafvess1E8/HoNSUyArQDkdvnd3ydASCSHNO"], ["updated_at", "2015-02-07 22:32:32.853411"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.855413"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:32:32.855413"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:32:32.857414"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.857414"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:32:32.859416"], ["score", 10], ["updated_at", "2015-02-07 22:32:32.859416"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.860417"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:32:32.860417"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 22:32:32.860417"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.860417"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 22:32:32.861418"], ["score", 20], ["updated_at", "2015-02-07 22:32:32.861418"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.862419"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:32:32.862419"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 22:32:32.863420"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.863420"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 22:32:32.864421"], ["score", 15], ["updated_at", "2015-02-07 22:32:32.864421"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.865422"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:32:32.865422"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 22:32:32.866422"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.866422"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 22:32:32.867424"], ["score", 7], ["updated_at", "2015-02-07 22:32:32.867424"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.868425"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:32:32.868425"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 22:32:32.869426"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.869426"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 22:32:32.870427"], ["score", 9], ["updated_at", "2015-02-07 22:32:32.870427"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.871428"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:32:32.871428"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 22:32:32.871428"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.871428"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 22:32:32.873430"], ["score", 25], ["updated_at", "2015-02-07 22:32:32.873430"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.881437"], ["password_digest", "$2a$04$rgGO.SYNwxtQooyrOIoXpuGvSxV/rYK03pMiXAClHZZ/uO46voTdy"], ["updated_at", "2015-02-07 22:32:32.881437"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.887443"], ["password_digest", "$2a$04$sXSiS6dQwhLVjE3XQgcY7eDtC8N1Xl/n9w93HfARZYHPrpMMfFOO6"], ["updated_at", "2015-02-07 22:32:32.887443"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.892448"], ["password_digest", "$2a$04$Gtn7RnkIRhI4qqf0M.MMzeXs6FdkaTDkukgZ4DGkkSyUbLdIGc.VK"], ["updated_at", "2015-02-07 22:32:32.892448"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.894449"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:32:32.894449"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:32:32.896451"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.896451"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:32:32.897452"], ["score", 10], ["updated_at", "2015-02-07 22:32:32.897452"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.903458"], ["password_digest", "$2a$04$cT3dGMFRG4HgsG/7AxMl2Ofe/volKggSr8XH89dXHyLW1MoG8YUaO"], ["updated_at", "2015-02-07 22:32:32.903458"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.910465"], ["password_digest", "$2a$04$7g0j1vicx0KiKGvwzlxKZu955Ek9iuXS.wXJO4rku0nrifDlZmgqq"], ["updated_at", "2015-02-07 22:32:32.910465"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:32:32.918473"], ["password_digest", "$2a$04$.qSP8pu.pjE116toHq.h3e7zLShMjBVRDOjrbeKM0wyqfe.ydK.Du"], ["updated_at", "2015-02-07 22:32:32.918473"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:32:32.920474"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:32:32.920474"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:32:32.921475"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:32:32.921475"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:32:32.922476"], ["score", 10], ["updated_at", "2015-02-07 22:32:32.922476"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:14.540170"], ["name", "Koff"], ["updated_at", "2015-02-07 22:35:14.540170"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:14.549179"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:35:14.549179"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:14.552182"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:35:14.552182"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (19.0ms)
  Rendered beers/new.html.erb within layouts/application (26.0ms)
Completed 200 OK in 70ms (Views: 59.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:35:14.676300"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 22:35:14.676300"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (23.0ms)
Completed 200 OK in 26ms (Views: 26.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:14.726348"], ["name", "Koff"], ["updated_at", "2015-02-07 22:35:14.726348"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (45.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:14.730352"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:35:14.730352"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:14.777396"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:35:14.777396"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:14.787406"], ["name", "Koff"], ["updated_at", "2015-02-07 22:35:14.787406"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:14.789408"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:35:14.789408"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:14.790409"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:35:14.790409"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1[0m  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (26.0ms)
Completed 200 OK in 28ms (Views: 27.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:14.830447"], ["name", "Koff"], ["updated_at", "2015-02-07 22:35:14.830447"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:35:14.832449"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:14.832449"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:35:14.834451"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:14.834451"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:14.839455"], ["password_digest", "$2a$04$d8d.HeF.dpMTHTkcpuuxSOL2eo4edljKbk4/Gkx0FQZKMLSvvlpaa"], ["updated_at", "2015-02-07 22:35:14.839455"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (19.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 25ms (Views: 23.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (8.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 15ms (Views: 14.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:35:14.917530"], ["score", 15], ["updated_at", "2015-02-07 22:35:14.917530"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 22:35:14.920533"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (9.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 12ms (Views: 9.0ms | ActiveRecord: 2.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:14.946557"], ["password_digest", "$2a$04$jZTRxIsNReYFMw.YqmbEkeOvulgtKmtCjfP7AgWZRXTzF2KbioI8K"], ["updated_at", "2015-02-07 22:35:14.946557"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:14.969579"], ["password_digest", "$2a$04$nZxtGQMV4PysKBJ8121rMOujaNTIqBDtjUpHU8CnXFyqwNkm.9UBK"], ["updated_at", "2015-02-07 22:35:14.969579"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 6ms (ActiveRecord: 2.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (5.0ms)
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:14.986595"], ["password_digest", "$2a$04$x2x76BniudQfo5dg2fcfE.A872loUDexodX.l6qCnG3b7Dl6nEKae"], ["updated_at", "2015-02-07 22:35:14.986595"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:35:14 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.013621"], ["password_digest", "$2a$04$7its3q0opGdl07Wc/s1gtu30JM4uvP/HUfMXlW33PCgijDvqRIkJe"], ["updated_at", "2015-02-07 22:35:15.013621"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:35:15 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:35:15 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:35:15 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.032639"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:15.032639"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.058664"], ["password_digest", "$2a$04$htXB9.NIgVj2EpfZzaOJM.Ii/VoE9UFTlAt/fpxZPJIC5vj5HpCEa"], ["updated_at", "2015-02-07 22:35:15.058664"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.067673"], ["password_digest", "$2a$04$6ihsxuIFjQ7xO9vahqMwh.sAcbyc0nvZgEYZ89r985RMnTru4K7fi"], ["updated_at", "2015-02-07 22:35:15.067673"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:15.069675"], ["score", 10], ["updated_at", "2015-02-07 22:35:15.069675"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 22:35:15.070676"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:15.071677"], ["score", 20], ["updated_at", "2015-02-07 22:35:15.071677"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 22:35:15.072678"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.079685"], ["password_digest", "$2a$04$Jca0JcVTR1BDYlWZ/abw4OBjiqn/gP/f8BhQgY61.MyWyGS8Vb4GO"], ["updated_at", "2015-02-07 22:35:15.079685"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.089694"], ["password_digest", "$2a$04$gn9iNroi1ayO7TQdE52Yte7aUeZbdzgG1IrfLV3hXcLINDLiWgA.2"], ["updated_at", "2015-02-07 22:35:15.089694"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:15.104709"], ["password_digest", "$2a$04$qSgaJY/UwA7VCk.TVnkeO.12OcqCYOgX4EfmJmyI0QUFKQlOR7.rS"], ["updated_at", "2015-02-07 22:35:15.104709"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.106710"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:35:15.106710"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:35:15.108712"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:15.108712"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:35:15.112716"], ["score", 10], ["updated_at", "2015-02-07 22:35:15.112716"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (1.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (57.1ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:15.122726"], ["password_digest", "$2a$04$CHxQOgEHwmKYt5CxmjqNG.Bp3LO12lL6otGHCB3PXYtEV1zORw.Xq"], ["updated_at", "2015-02-07 22:35:15.122726"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (40.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.181781"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:35:15.181781"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:35:15.222820"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:15.222820"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:35:15.223821"], ["score", 10], ["updated_at", "2015-02-07 22:35:15.223821"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:15.224822"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:35:15.224822"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 22:35:15.225823"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:15.225823"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 22:35:15.226824"], ["score", 20], ["updated_at", "2015-02-07 22:35:15.226824"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.227825"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:35:15.227825"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 22:35:15.228826"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:15.228826"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 22:35:15.229827"], ["score", 15], ["updated_at", "2015-02-07 22:35:15.229827"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:15.230828"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:35:15.230828"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 22:35:15.231829"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:15.231829"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 22:35:15.232830"], ["score", 7], ["updated_at", "2015-02-07 22:35:15.232830"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.233831"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:35:15.233831"], ["year", 1900]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 22:35:15.234832"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:15.234832"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 22:35:15.235833"], ["score", 9], ["updated_at", "2015-02-07 22:35:15.235833"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:15.236834"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:35:15.236834"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 22:35:15.237835"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:15.237835"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 22:35:15.238836"], ["score", 25], ["updated_at", "2015-02-07 22:35:15.238836"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (1.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (43.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.246844"], ["password_digest", "$2a$04$ZJp.jQ95eLgZ0tVfMm3vpuE5JyTakv0FAfgw1c/qa.JozIgRBtuSm"], ["updated_at", "2015-02-07 22:35:15.246844"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (25.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.295890"], ["password_digest", "$2a$04$/qaXAWTH/3M6qMNAyjqwye6jt7ScfvJ8UXDc2qI6hmA/1nSzWRj22"], ["updated_at", "2015-02-07 22:35:15.295890"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (41.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:15.329923"], ["password_digest", "$2a$04$rsjGhPT82Sv7U4D2iKnpruef3KyZ23qWUVDXblQqnX7LW5RwXVSMa"], ["updated_at", "2015-02-07 22:35:15.329923"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (30.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.372963"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:35:15.372963"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:35:15.403993"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:15.403993"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:35:15.404994"], ["score", 10], ["updated_at", "2015-02-07 22:35:15.404994"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (50.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:15.412000"], ["password_digest", "$2a$04$CZCoQSLbgK1mazUo2eRdFOr83PavpngYbcUNOiPk5sn1VWYss2d6q"], ["updated_at", "2015-02-07 22:35:15.412000"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (31.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:15.467053"], ["password_digest", "$2a$04$1MEzhhTWEsXy5K4/adce3uryHxtzEHCljmyI8JQLSi7ibGB9Cture"], ["updated_at", "2015-02-07 22:35:15.467053"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:35:15.505089"], ["password_digest", "$2a$04$PF0Wh1Kn/y2Xtz3H4cYl2OI3orwJOyQM3a5Ex0EEVF53l8syGCtke"], ["updated_at", "2015-02-07 22:35:15.505089"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:35:15.507091"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:35:15.507091"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:35:15.508093"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:35:15.508093"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:35:15.510094"], ["score", 10], ["updated_at", "2015-02-07 22:35:15.510094"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.128968"], ["name", "Koff"], ["updated_at", "2015-02-07 22:37:23.128968"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.135974"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:37:23.135974"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.138977"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:37:23.138977"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (1.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (22.0ms)
Completed 200 OK in 67ms (Views: 55.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:37:23.228062"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 22:37:23.228062"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 16ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (17.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.265097"], ["name", "Koff"], ["updated_at", "2015-02-07 22:37:23.265097"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.267099"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:37:23.267099"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.269101"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:37:23.269101"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.294125"], ["name", "Koff"], ["updated_at", "2015-02-07 22:37:23.294125"], ["year", 1897]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.296127"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:37:23.296127"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.297128"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:37:23.297128"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.308138"], ["name", "Koff"], ["updated_at", "2015-02-07 22:37:23.308138"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.309139"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:37:23.309139"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.311141"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:37:23.311141"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (23.0ms)
Completed 200 OK in 26ms (Views: 25.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.346175"], ["name", "Koff"], ["updated_at", "2015-02-07 22:37:23.346175"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:37:23.348176"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.348176"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:37:23.350178"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.350178"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.355183"], ["password_digest", "$2a$04$7eTcHnDPhmxRyM5DjSyRLO2SW4ICLOZB04YeyMRRxupGw1g4Sq0sG"], ["updated_at", "2015-02-07 22:37:23.355183"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 18.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:37:23.421246"], ["score", 15], ["updated_at", "2015-02-07 22:37:23.421246"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:37:23.424249"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.444268"], ["password_digest", "$2a$04$1wGJUnSwUVPSgpkQzxy6T.vJSswEjYpUCkmC9bvVIr3DWSucycKAe"], ["updated_at", "2015-02-07 22:37:23.444268"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.461284"], ["password_digest", "$2a$04$Bhkk97hITbK89b5z3Yc7iu1fOZN6JeBBoJLCdDxd9HivfwEgdEKBi"], ["updated_at", "2015-02-07 22:37:23.461284"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.474296"], ["password_digest", "$2a$04$/lcKXw87x7x2Dp06fMzW0uJB1CcyrmouZc4XQS3qVQFMMUk4/YqSu"], ["updated_at", "2015-02-07 22:37:23.474296"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.495316"], ["password_digest", "$2a$04$y2PVccusena/ccFmNbARheFHUw8Z6FIa6.Tlh14qhCCQ.L042EpxK"], ["updated_at", "2015-02-07 22:37:23.495316"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:37:23 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.509330"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.509330"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.530350"], ["password_digest", "$2a$04$WYeCtbVfIrSeP9p/OLuzQu2gNT9vmsF2lN1vr4e/Q/vUGrExoJjD."], ["updated_at", "2015-02-07 22:37:23.530350"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.537356"], ["password_digest", "$2a$04$2g6qyQUEUOQHbz5ZdzP4bu4RD4ykOqELZiOw6zN1aZKFNPA3AaZo2"], ["updated_at", "2015-02-07 22:37:23.537356"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:37:23.539359"], ["score", 10], ["updated_at", "2015-02-07 22:37:23.539359"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:37:23.541360"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:37:23.541360"], ["score", 20], ["updated_at", "2015-02-07 22:37:23.541360"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 22:37:23.542361"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (19.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.565383"], ["password_digest", "$2a$04$xRBV.83OYfvZLLq258tvHem975WjWFHLAdC38e6nF1q5TyMBr8.Wy"], ["updated_at", "2015-02-07 22:37:23.565383"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.573402"], ["password_digest", "$2a$04$Z0x.YKJbAFOzBJ0sbG20kOp4kjzXonIqY5bSPxgRDvT7uTln886Iy"], ["updated_at", "2015-02-07 22:37:23.573402"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.579397"], ["password_digest", "$2a$04$D9iFx/4z96OW5pMJIScQIuMHe6LIcSf1EanXlMiPZ18P7Me0wijE."], ["updated_at", "2015-02-07 22:37:23.579397"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.581399"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:37:23.581399"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:37:23.582400"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.582400"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:37:23.583401"], ["score", 10], ["updated_at", "2015-02-07 22:37:23.583401"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.591408"], ["password_digest", "$2a$04$FNa2ZZgGJJ5jXGTdaNJyRO6Z4C6X09Q3x1p9SRq0BelQq1xMrQ.eC"], ["updated_at", "2015-02-07 22:37:23.591408"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.593410"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:37:23.593410"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:37:23.595412"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.595412"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:37:23.596413"], ["score", 10], ["updated_at", "2015-02-07 22:37:23.596413"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.597414"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:37:23.597414"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 22:37:23.597414"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.597414"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 22:37:23.598415"], ["score", 20], ["updated_at", "2015-02-07 22:37:23.598415"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.599416"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:37:23.599416"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 22:37:23.600417"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.600417"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 22:37:23.601418"], ["score", 15], ["updated_at", "2015-02-07 22:37:23.601418"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.602419"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:37:23.602419"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 22:37:23.603419"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.603419"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 22:37:23.604421"], ["score", 7], ["updated_at", "2015-02-07 22:37:23.604421"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.606422"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:37:23.606422"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 22:37:23.606422"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.606422"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 22:37:23.607423"], ["score", 9], ["updated_at", "2015-02-07 22:37:23.607423"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.609426"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:37:23.609426"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 22:37:23.609426"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.609426"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 22:37:23.610426"], ["score", 25], ["updated_at", "2015-02-07 22:37:23.610426"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.617433"], ["password_digest", "$2a$04$ev0tSzZLkYVcd5JIMamzYeoGexJxHC6RRrpJ5FaZWotra7rozTdIS"], ["updated_at", "2015-02-07 22:37:23.617433"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.624440"], ["password_digest", "$2a$04$SqBxd/WWbztvfTHjDWJX3.kKl7WYVxYhUGooKcjIi1pbhLBBSlkEm"], ["updated_at", "2015-02-07 22:37:23.624440"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.631446"], ["password_digest", "$2a$04$W5xa9MzuMP4Nm7BegFuMhulzUQRpHRPPbdKQvawhgvYSGxSn6Qr/a"], ["updated_at", "2015-02-07 22:37:23.631446"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.633448"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:37:23.633448"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:37:23.635450"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.635450"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:37:23.636452"], ["score", 10], ["updated_at", "2015-02-07 22:37:23.636452"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.644458"], ["password_digest", "$2a$04$dSxDtmFcZX2wyORbgyyOlu556BQktyF08l6NpX7VpDHPHRaUOAGui"], ["updated_at", "2015-02-07 22:37:23.644458"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.650464"], ["password_digest", "$2a$04$zIAhYkXWBr59eK1ZCxEXaOLNsA5sjZbYJKbt/KC4GwfM6dTTvhtkC"], ["updated_at", "2015-02-07 22:37:23.650464"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:37:23.656470"], ["password_digest", "$2a$04$.RZHjVNilQHVxPTYNJJ8gebO3.EFhD7BLEAVbs8M/8.q9ok0dtUba"], ["updated_at", "2015-02-07 22:37:23.656470"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:37:23.659473"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:37:23.659473"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:37:23.660474"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:37:23.660474"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:37:23.661475"], ["score", 10], ["updated_at", "2015-02-07 22:37:23.661475"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.279150"], ["name", "Koff"], ["updated_at", "2015-02-07 22:46:01.279150"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.286156"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:46:01.286156"], ["year", 1898]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.289159"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:46:01.289159"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (22.0ms)
Completed 200 OK in 65ms (Views: 55.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:46:01.376242"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 22:46:01.376242"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 16ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.398263"], ["name", "Koff"], ["updated_at", "2015-02-07 22:46:01.398263"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.401266"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:46:01.401266"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.402267"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:46:01.402267"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.427290"], ["name", "Koff"], ["updated_at", "2015-02-07 22:46:01.427290"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.428291"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:46:01.428291"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.430293"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:46:01.430293"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.440303"], ["name", "Koff"], ["updated_at", "2015-02-07 22:46:01.440303"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.442305"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:46:01.442305"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.443305"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:46:01.443305"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (23.0ms)
Completed 200 OK in 25ms (Views: 23.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.478339"], ["name", "Koff"], ["updated_at", "2015-02-07 22:46:01.478339"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:46:01.480341"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.480341"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:46:01.482343"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.482343"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.487348"], ["password_digest", "$2a$04$if1rL7jXNhQV0qluDhYHHuxJ9s01ZcqpfW2J9pYuiNXB9vkOXU.cS"], ["updated_at", "2015-02-07 22:46:01.487348"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 16.0ms | ActiveRecord: 2.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:46:01.552410"], ["score", 15], ["updated_at", "2015-02-07 22:46:01.552410"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:46:01.555412"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 2.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.576432"], ["password_digest", "$2a$04$2deau7reH03TpmtE/NW3oexFAgUrFC2d4y6j5Pljg5cgd8dO4L54O"], ["updated_at", "2015-02-07 22:46:01.576432"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.594450"], ["password_digest", "$2a$04$g4Hn6jN3SNnSMi4UBE8SjOy1ZMZ38AkMKPLBuV8A/2fko0sWyhHPC"], ["updated_at", "2015-02-07 22:46:01.594450"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.606461"], ["password_digest", "$2a$04$XocPQliXaYhvwpKRkI4FAO98RJ.W3tVWT5h5YoIR.ZK/8Lf5W6Rdi"], ["updated_at", "2015-02-07 22:46:01.606461"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (1.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.627481"], ["password_digest", "$2a$04$Lhl6MnaZBou5QENWUDI5SOnZvSsZq8I5QTwK2NNhF2.6gy.AINWya"], ["updated_at", "2015-02-07 22:46:01.627481"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:46:01 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.640604"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.640604"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.662640"], ["password_digest", "$2a$04$vZzgiOBdRkrsj32MtIqvH.sPKijfAA774p0HuLdyW5DJ6ZIeheKoS"], ["updated_at", "2015-02-07 22:46:01.662640"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.669647"], ["password_digest", "$2a$04$jbl9NbeAk1JgfDYPcGBBJunDHyUkAIu1Fa2hXZrxgon9iOqEv0liW"], ["updated_at", "2015-02-07 22:46:01.669647"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:46:01.671649"], ["score", 10], ["updated_at", "2015-02-07 22:46:01.671649"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:46:01.672650"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:46:01.673651"], ["score", 20], ["updated_at", "2015-02-07 22:46:01.673651"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.679657"], ["password_digest", "$2a$04$Lyh87qb0sCUPHgPdAJMX.Ob/beiir3rVkj9gGGhYaW6SBDtHW06Fi"], ["updated_at", "2015-02-07 22:46:01.679657"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.686663"], ["password_digest", "$2a$04$kHhfK0FXdmSOtxV9x4X2Jek7NqxA7MTsQKZOHBtw.0UoxaM7lmoNi"], ["updated_at", "2015-02-07 22:46:01.686663"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.692669"], ["password_digest", "$2a$04$IlI9v78ZDybacn7eshFUWuYrYGJ40aKPkdX.TXGG3YMEzARlUEGoy"], ["updated_at", "2015-02-07 22:46:01.692669"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.694671"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:46:01.694671"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:46:01.695672"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.695672"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:46:01.696673"], ["score", 10], ["updated_at", "2015-02-07 22:46:01.696673"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.703680"], ["password_digest", "$2a$04$4R69QH.j4r0ZPXdC.nrh/ea2Zn3oJIg7tCTEcLpJfs86Kd65WNYbi"], ["updated_at", "2015-02-07 22:46:01.703680"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.705682"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:46:01.705682"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:46:01.706682"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.706682"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:46:01.707683"], ["score", 10], ["updated_at", "2015-02-07 22:46:01.707683"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.708684"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:46:01.708684"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 22:46:01.709685"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.709685"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 22:46:01.710686"], ["score", 20], ["updated_at", "2015-02-07 22:46:01.710686"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.711687"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:46:01.711687"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 22:46:01.712688"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.712688"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 22:46:01.712688"], ["score", 15], ["updated_at", "2015-02-07 22:46:01.712688"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.713689"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:46:01.713689"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 22:46:01.714690"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.714690"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 22:46:01.715691"], ["score", 7], ["updated_at", "2015-02-07 22:46:01.715691"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.716692"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:46:01.716692"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 22:46:01.717693"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.717693"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 22:46:01.718694"], ["score", 9], ["updated_at", "2015-02-07 22:46:01.718694"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.719695"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:46:01.719695"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 22:46:01.720696"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.720696"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 22:46:01.720696"], ["score", 25], ["updated_at", "2015-02-07 22:46:01.720696"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.727702"], ["password_digest", "$2a$04$R7fkOYpcnQF9f.XgprMFNeLmamDHa43SnnAu9yH7JPqwLLgPPdAPO"], ["updated_at", "2015-02-07 22:46:01.727702"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.733708"], ["password_digest", "$2a$04$yVVzWyYq/Gu0g5dGlAsLY.Z.NM2j5JEcpyA7bxONuBtB3645g8vda"], ["updated_at", "2015-02-07 22:46:01.733708"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.739714"], ["password_digest", "$2a$04$Jt4Ly6VY..wfBsx8ctg5t.NHy7ylYqskLlWAiQH02yuqoNKWiDCNm"], ["updated_at", "2015-02-07 22:46:01.739714"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.740715"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:46:01.740715"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:46:01.742717"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.742717"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:46:01.743718"], ["score", 10], ["updated_at", "2015-02-07 22:46:01.743718"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.750724"], ["password_digest", "$2a$04$AEzyAXx9av9AFeFYYCz2p.1A2px17eDB1Ip9Wn8T2qXf7KLPNKyji"], ["updated_at", "2015-02-07 22:46:01.750724"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.757731"], ["password_digest", "$2a$04$5l2uc/Ca5acGSj3UnwRCRu28QMjEs.nbFWC69UuajqAjbTQjOPK7O"], ["updated_at", "2015-02-07 22:46:01.757731"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:01.763737"], ["password_digest", "$2a$04$btN7li3FZb74tLIVJcSp8eEcB6x4Ieo6ez72bpmZdUvu6v9F5K8hG"], ["updated_at", "2015-02-07 22:46:01.763737"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:01.765739"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:46:01.765739"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:46:01.766739"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:46:01.766739"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:46:01.768742"], ["score", 10], ["updated_at", "2015-02-07 22:46:01.768742"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:25.848131"], ["name", "Koff"], ["updated_at", "2015-02-07 22:46:25.848131"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:25.852135"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:46:25.852135"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:25.854137"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:46:25.854137"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:46:25 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (22.0ms)
Completed 200 OK in 65ms (Views: 55.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 00:46:25 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:46:25.940219"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 22:46:25.940219"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 00:46:25 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 15ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:25.963241"], ["name", "Koff"], ["updated_at", "2015-02-07 22:46:25.963241"], ["year", 1897]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:46:25.965243"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:46:25.965243"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:46:25.966244"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:46:25.966244"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:46:25 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 00:46:25 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:47:10 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:10.767620"], ["name", "Koff"], ["updated_at", "2015-02-07 22:47:10.767620"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:10.776628"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:47:10.776628"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:10.783635"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:47:10.783635"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:47:10 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (8.0ms)
Completed 200 OK in 13ms (Views: 11.0ms | ActiveRecord: 1.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:10.836686"], ["name", "Koff"], ["updated_at", "2015-02-07 22:47:10.836686"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:10.842867"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:47:10.842867"], ["year", 1898]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:10.849004"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:47:10.849004"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:47:10 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (8.0ms)
Completed 200 OK in 13ms (Views: 11.0ms | ActiveRecord: 1.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 00:47:10 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (43.0ms)
Completed 200 OK in 51ms (Views: 48.0ms | ActiveRecord: 2.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (231.2ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:10.943119"], ["name", "Koff"], ["updated_at", "2015-02-07 22:47:10.943119"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:11.181345"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:11.181345"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:11.189353"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:11.189353"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:11.206370"], ["password_digest", "$2a$04$6SqH21YCoIh/wdVcjyRkvu7rL5Fmxfn./hGB99K.rWhqx5bCmH0GW"], ["updated_at", "2015-02-07 22:47:11.206370"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (3.0ms)
Completed 200 OK in 11ms (Views: 9.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 11ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (1.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (69.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 92ms (Views: 84.1ms | ActiveRecord: 3.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (22.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 42ms (Views: 40.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:47:11.444596"], ["score", 15], ["updated_at", "2015-02-07 22:47:11.444596"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:47:11.456608"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 25ms (ActiveRecord: 2.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (48.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 66ms (Views: 56.1ms | ActiveRecord: 6.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:11.567713"], ["password_digest", "$2a$04$g.GX.RxuQz/DwcU0M5koS.Yq0O9Ey67WFJTkAd/5mUwcFBYO9FS6K"], ["updated_at", "2015-02-07 22:47:11.567713"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (11.0ms)
  Rendered users/new.html.erb within layouts/application (15.0ms)
Completed 200 OK in 22ms (Views: 21.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:11.629772"], ["password_digest", "$2a$04$lO/KLBjG9vlTEbc1dt10/.Ke7so.MMcRgU8CV5teGSTHW6rNg/YIa"], ["updated_at", "2015-02-07 22:47:11.629772"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 15ms (ActiveRecord: 2.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (19.0ms)
Completed 200 OK in 25ms (Views: 22.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:11.684825"], ["password_digest", "$2a$04$EJMRqpwIQF/.cbRYQYDUGOFdJZU721Wzw6.B2ek6HgrmJSAThIMkC"], ["updated_at", "2015-02-07 22:47:11.684825"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (21.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 41ms (Views: 37.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:11.786922"], ["password_digest", "$2a$04$HSdGlX2IyRjPUPjXwc/46OGpqRMZu.P.tTJpsqfGfIsiqKbIUt9ZS"], ["updated_at", "2015-02-07 22:47:11.786922"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:47:11 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:11.850983"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:11.850983"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:11.952249"], ["password_digest", "$2a$04$7o1K4FJo0nxdbp4inOM/R.7IKKgBgyVsDb6ZEhDxDwN7owsDp5L5y"], ["updated_at", "2015-02-07 22:47:11.952249"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:11.972268"], ["password_digest", "$2a$04$hf7x3AeEZhjAYQp/BRTiNOgqBQIC7Qv0/VzTquw2Rkva5qi6D6C4u"], ["updated_at", "2015-02-07 22:47:11.972268"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:47:11.982278"], ["score", 10], ["updated_at", "2015-02-07 22:47:11.982278"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:47:11.988284"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:47:11.993288"], ["score", 20], ["updated_at", "2015-02-07 22:47:11.993288"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 22:47:11.998293"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:12.016310"], ["password_digest", "$2a$04$z8WJIrq6qBnMbOrg7eXlq.JHO1z3iZ5273pHsmOjp9md7TQn4U3ca"], ["updated_at", "2015-02-07 22:47:12.016310"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:12.033326"], ["password_digest", "$2a$04$msMgwCvXcGmDxNqK1tCNje8HuH6SgluOOw/3imOWF2voT2h4iUWEq"], ["updated_at", "2015-02-07 22:47:12.033326"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:12.051343"], ["password_digest", "$2a$04$wm7C3loAOWtQ30jg/O/r.ePeZH.NEKut6dUMGo8z7HsqHa1n8f67e"], ["updated_at", "2015-02-07 22:47:12.051343"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:12.060352"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:12.060352"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:12.066358"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:12.066358"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:47:12.073365"], ["score", 10], ["updated_at", "2015-02-07 22:47:12.073365"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:12.101391"], ["password_digest", "$2a$04$ztY1dWAHMeb7Zho7o2/RneseU0U2UQlC9yD3ooDra8VHq7wY2.RIW"], ["updated_at", "2015-02-07 22:47:12.101391"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:12.109399"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:12.109399"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:12.115404"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:12.115404"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:47:12.122411"], ["score", 10], ["updated_at", "2015-02-07 22:47:12.122411"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:12.129418"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:12.129418"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 22:47:12.134423"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:12.134423"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 22:47:12.141429"], ["score", 20], ["updated_at", "2015-02-07 22:47:12.141429"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:12.147435"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:12.147435"], ["year", 1900]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 22:47:12.152440"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:12.152440"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 22:47:12.159447"], ["score", 15], ["updated_at", "2015-02-07 22:47:12.159447"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:12.166453"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:12.166453"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 22:47:12.171458"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:12.171458"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 22:47:12.178465"], ["score", 7], ["updated_at", "2015-02-07 22:47:12.178465"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:12.185471"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:12.185471"], ["year", 1900]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 22:47:12.192479"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:12.192479"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 22:47:12.199485"], ["score", 9], ["updated_at", "2015-02-07 22:47:12.199485"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:12.205490"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:12.205490"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 22:47:12.211496"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:12.211496"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 22:47:12.218503"], ["score", 25], ["updated_at", "2015-02-07 22:47:12.218503"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:12.243527"], ["password_digest", "$2a$04$yBBklW8F.lUpNEePcgioiOQnqiigX0UVcP5NexhqyXQ.RNxKQ04Wa"], ["updated_at", "2015-02-07 22:47:12.243527"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:12.259542"], ["password_digest", "$2a$04$4UuQXZ4dgm9PQEtVMIZaeO2Xhe8eZjms6p17AVqwy9zv3qhUqurgC"], ["updated_at", "2015-02-07 22:47:12.259542"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:12.275557"], ["password_digest", "$2a$04$oHf9tnkyrXE3RvG1u0e.iO7JaBrxn66obVAIQjNJIeed2BxQEdtyK"], ["updated_at", "2015-02-07 22:47:12.275557"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:12.283565"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:12.283565"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:12.289571"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:12.289571"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:47:12.296577"], ["score", 10], ["updated_at", "2015-02-07 22:47:12.296577"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:12.323603"], ["password_digest", "$2a$04$u9liqi4BTph.P.ay456gvemyjSKpTl1q5deU/pyQZ2/Nn0I3M2Ff."], ["updated_at", "2015-02-07 22:47:12.323603"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:12.338617"], ["password_digest", "$2a$04$WOgf8Rk.HzhvztnfKp7UauIPq.iY6cdnmFc1KBZIkQe5ON7XZfne6"], ["updated_at", "2015-02-07 22:47:12.338617"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:12.356635"], ["password_digest", "$2a$04$9A/L8gb124wKvH/AqxsYyOHPnnNegNn140peE9xEESbDVEKvy6Gfe"], ["updated_at", "2015-02-07 22:47:12.356635"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:12.364642"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:12.364642"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:12.371649"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:12.371649"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:47:12.378656"], ["score", 10], ["updated_at", "2015-02-07 22:47:12.378656"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.278368"], ["name", "Koff"], ["updated_at", "2015-02-07 22:47:24.278368"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.284374"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:47:24.284374"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.287377"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:47:24.287377"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (1.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 66ms (Views: 55.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:24.374460"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 22:47:24.374460"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 15ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.397482"], ["name", "Koff"], ["updated_at", "2015-02-07 22:47:24.397482"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.399483"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:47:24.399483"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.400484"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:47:24.400484"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.424508"], ["name", "Koff"], ["updated_at", "2015-02-07 22:47:24.424508"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.426509"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:47:24.426509"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.428511"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:47:24.428511"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.438521"], ["name", "Koff"], ["updated_at", "2015-02-07 22:47:24.438521"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.440523"], ["name", "Karjala"], ["updated_at", "2015-02-07 22:47:24.440523"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.441524"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 22:47:24.441524"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (23.0ms)
Completed 200 OK in 25ms (Views: 25.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.477558"], ["name", "Koff"], ["updated_at", "2015-02-07 22:47:24.477558"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:24.479560"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.479560"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:24.481562"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.481562"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.485565"], ["password_digest", "$2a$04$u9hlNZs/XpOQa.gIIsZCMuBs.i7PjaX1RKhzdfvnKUr./oFtv1MD6"], ["updated_at", "2015-02-07 22:47:24.485565"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 17.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:47:24.551629"], ["score", 15], ["updated_at", "2015-02-07 22:47:24.551629"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:47:24.554632"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.575651"], ["password_digest", "$2a$04$eKLMzn6E2poXVYi4TSgpvOqgjdup26CqtosoY1w0BAFdyfpLToUJC"], ["updated_at", "2015-02-07 22:47:24.575651"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (3.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.592668"], ["password_digest", "$2a$04$XW0jlO66LIchn0DUyIJ4t.k1N73Pl1qB7OlEUvBj/HyNFXccBOY12"], ["updated_at", "2015-02-07 22:47:24.592668"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 4ms (ActiveRecord: 2.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.604679"], ["password_digest", "$2a$04$93uf4EpxZAGZbYWnnuP0k.jXTO37vo3S7THbvLPCL01n9tREr.Ose"], ["updated_at", "2015-02-07 22:47:24.604679"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.625699"], ["password_digest", "$2a$04$rxYYssLkp2xjpTVECUpLg.qXwpxMxOgQfAjRzJHIFLnceFe6ulbLS"], ["updated_at", "2015-02-07 22:47:24.625699"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 00:47:24 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.643716"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.643716"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.664736"], ["password_digest", "$2a$04$kkdLkHYg8OH8VtkygPgIkedoD4IIsdIK1KgjIGwjRStaPdoeXBarm"], ["updated_at", "2015-02-07 22:47:24.664736"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.671743"], ["password_digest", "$2a$04$V8rlT2uw97e6UtKcq5JwZulD.uk7UcUTntlGTgfZd7svN7AIP1ZSi"], ["updated_at", "2015-02-07 22:47:24.671743"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:47:24.673745"], ["score", 10], ["updated_at", "2015-02-07 22:47:24.673745"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 22:47:24.674746"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 22:47:24.675747"], ["score", 20], ["updated_at", "2015-02-07 22:47:24.675747"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 22:47:24.676748"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.681752"], ["password_digest", "$2a$04$YgXU2zD4h0e5fUR0w97is.vsVsE8c.vEZzfTNBpHAEIuxnM0uCbRO"], ["updated_at", "2015-02-07 22:47:24.681752"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.689760"], ["password_digest", "$2a$04$v8znTRpon1aJMVTILAzyXOGns2VPhxQVnpaiNnXNneN/.kkhk74Ti"], ["updated_at", "2015-02-07 22:47:24.689760"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.695766"], ["password_digest", "$2a$04$hQ858D5/LkGY36CaTsTiKO3FDhSfmz8YAxhkvLn6zK59pFjbHSTH."], ["updated_at", "2015-02-07 22:47:24.695766"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.697768"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:24.697768"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:24.699769"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.699769"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:47:24.700770"], ["score", 10], ["updated_at", "2015-02-07 22:47:24.700770"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.707777"], ["password_digest", "$2a$04$y.jkngAA50AM9vaZy1Aef.6mhNgZHbyH1QEVdpOQP00yhG0V2nR8a"], ["updated_at", "2015-02-07 22:47:24.707777"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.708778"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:24.708778"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:24.710780"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.710780"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:47:24.711781"], ["score", 10], ["updated_at", "2015-02-07 22:47:24.711781"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.712782"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:24.712782"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 22:47:24.713783"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.713783"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 22:47:24.714784"], ["score", 20], ["updated_at", "2015-02-07 22:47:24.714784"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.715785"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:24.715785"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 22:47:24.715785"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.715785"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 22:47:24.716786"], ["score", 15], ["updated_at", "2015-02-07 22:47:24.716786"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.717787"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:24.717787"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 22:47:24.718788"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.718788"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 22:47:24.719789"], ["score", 7], ["updated_at", "2015-02-07 22:47:24.719789"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.720790"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:24.720790"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 22:47:24.721791"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.721791"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 22:47:24.721791"], ["score", 9], ["updated_at", "2015-02-07 22:47:24.721791"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.723793"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:24.723793"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 22:47:24.723793"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.723793"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 22:47:24.724793"], ["score", 25], ["updated_at", "2015-02-07 22:47:24.724793"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.731800"], ["password_digest", "$2a$04$POJgAfU3NlssuJ78sH7hQe.a3ggB3mDqLrnWSd4I9xBu.NBO7n3qO"], ["updated_at", "2015-02-07 22:47:24.731800"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.737806"], ["password_digest", "$2a$04$XV/h66Bf.Hz3Dmx48GJCX.gzkCf2ZNEzVQs2/gOw88JohkYd1nMwe"], ["updated_at", "2015-02-07 22:47:24.737806"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.743811"], ["password_digest", "$2a$04$pEBBCN8KLTX2wsRbwlpW5.blXWQgC2kgBRZ0qpuj446iRwzRdT3Xe"], ["updated_at", "2015-02-07 22:47:24.743811"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.744812"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:24.744812"], ["year", 1900]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:24.746814"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.746814"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 22:47:24.747815"], ["score", 10], ["updated_at", "2015-02-07 22:47:24.747815"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.754823"], ["password_digest", "$2a$04$5gKtZ6YVumIUatyq1DJbGeE7zTFzlqzeGJ96zjK9nxNJPZ4iVxddW"], ["updated_at", "2015-02-07 22:47:24.754823"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.760828"], ["password_digest", "$2a$04$hGOO0T8oRIcWcDdPBWA0.eUB2twQhBWuwSyG..2/MrNoziezrmvh."], ["updated_at", "2015-02-07 22:47:24.760828"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 22:47:24.767834"], ["password_digest", "$2a$04$LChtUanQeDx.PVFaIm7CXeUHeSQFfeY.A/gDkUkzF2qT/97KVyLT."], ["updated_at", "2015-02-07 22:47:24.767834"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 22:47:24.769836"], ["name", "anonymous"], ["updated_at", "2015-02-07 22:47:24.769836"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 22:47:24.770837"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 22:47:24.770837"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 22:47:24.771838"], ["score", 10], ["updated_at", "2015-02-07 22:47:24.771838"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.356128"], ["name", "Koff"], ["updated_at", "2015-02-07 23:16:19.356128"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.363134"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:16:19.363134"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.366138"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:16:19.366138"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (18.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 66ms (Views: 56.1ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:19.454221"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:16:19.454221"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 16ms (Views: 14.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.476242"], ["name", "Koff"], ["updated_at", "2015-02-07 23:16:19.476242"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.478244"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:16:19.478244"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.480246"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:16:19.480246"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.504269"], ["name", "Koff"], ["updated_at", "2015-02-07 23:16:19.504269"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.506271"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:16:19.506271"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.507272"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:16:19.507272"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.517282"], ["name", "Koff"], ["updated_at", "2015-02-07 23:16:19.517282"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.519283"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:16:19.519283"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.521285"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:16:19.521285"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (24.0ms)
Completed 200 OK in 26ms (Views: 26.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.557320"], ["name", "Koff"], ["updated_at", "2015-02-07 23:16:19.557320"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:19.559322"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.559322"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:19.560322"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.560322"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.565327"], ["password_digest", "$2a$04$WBazSlKgPqZjDKqiGHCf8.96Rj4/MP7pBXsxSr.nl6c5kny.MoipO"], ["updated_at", "2015-02-07 23:16:19.565327"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 17.0ms | ActiveRecord: 2.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:16:19.632391"], ["score", 15], ["updated_at", "2015-02-07 23:16:19.632391"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:16:19.634393"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.656576"], ["password_digest", "$2a$04$OKOMHxMknC8Nl5CRuPREl.hD069Sjk81W0SP.krjYltZnU/GUhNWa"], ["updated_at", "2015-02-07 23:16:19.656576"], ["username", "Pekka"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.679663"], ["password_digest", "$2a$04$Rezb4/d/IwQiz8MFEFgCXODQVj2oG/Kj95NgaFYxJaH2JWkQ1DMMW"], ["updated_at", "2015-02-07 23:16:19.679663"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.695679"], ["password_digest", "$2a$04$lp4gDP7aW3bVgL1BRpObtewbXcb98vSLB30MfTdRot8w2y70fqCam"], ["updated_at", "2015-02-07 23:16:19.695679"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.708691"], ["password_digest", "$2a$04$2kzqJLjO.wvujC37Nw8kQ.gCuZrFCtpvtziKk5UP7N3H0ZkjSYCpO"], ["updated_at", "2015-02-07 23:16:19.708691"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.728710"], ["password_digest", "$2a$04$BpsP8BbM.0wDLwKxLnu5put.llfvuruC7MwfrmMgFmhzIzIG6XNVy"], ["updated_at", "2015-02-07 23:16:19.728710"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:16:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.742723"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.742723"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.764745"], ["password_digest", "$2a$04$8FY10zA4P7a.mnU0iR.yp.aWYe7e6aF.OysF3ttgXhaWh4KC.Lr/m"], ["updated_at", "2015-02-07 23:16:19.764745"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.770750"], ["password_digest", "$2a$04$c66nbucxJlfCYHUiEBwMBugQLqh6NWGZlAUluRT/63aDxXzMlIzvi"], ["updated_at", "2015-02-07 23:16:19.770750"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:16:19.772752"], ["score", 10], ["updated_at", "2015-02-07 23:16:19.772752"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:16:19.773753"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:16:19.774754"], ["score", 20], ["updated_at", "2015-02-07 23:16:19.774754"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 23:16:19.775755"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.780760"], ["password_digest", "$2a$04$pDUUAlGYWf3tFD8jMJ0OVuc/eAa/sn9SnJven.BASYnCc9mQewn7C"], ["updated_at", "2015-02-07 23:16:19.780760"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.787766"], ["password_digest", "$2a$04$x5WLPyjfc/bvtI4qco/tPuPc0T7dtIK3Bql7S9BSq40RTlpkaDns6"], ["updated_at", "2015-02-07 23:16:19.787766"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.793772"], ["password_digest", "$2a$04$QdOic6Z3Sgvqi3BNvI5ItuUh/iQe/h4sP6./vF84eNqnBCr1v2LV."], ["updated_at", "2015-02-07 23:16:19.793772"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.794773"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:19.794773"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:19.796775"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.796775"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:16:19.797776"], ["score", 10], ["updated_at", "2015-02-07 23:16:19.797776"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (1.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.804783"], ["password_digest", "$2a$04$qfYw0plfZWwa8mdfulXWuumUr2.rBPqP5Kz2xD2WiEJa7iPim5YDa"], ["updated_at", "2015-02-07 23:16:19.804783"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.806784"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:19.806784"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:19.807785"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.807785"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:16:19.808787"], ["score", 10], ["updated_at", "2015-02-07 23:16:19.808787"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.809788"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:19.809788"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 23:16:19.810788"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.810788"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 23:16:19.811789"], ["score", 20], ["updated_at", "2015-02-07 23:16:19.811789"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.812790"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:19.812790"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 23:16:19.812790"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.812790"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 23:16:19.813791"], ["score", 15], ["updated_at", "2015-02-07 23:16:19.813791"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.814792"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:19.814792"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 23:16:19.815793"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.815793"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 23:16:19.816794"], ["score", 7], ["updated_at", "2015-02-07 23:16:19.816794"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.817795"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:19.817795"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 23:16:19.818796"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.818796"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 23:16:19.819797"], ["score", 9], ["updated_at", "2015-02-07 23:16:19.819797"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.820798"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:19.820798"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 23:16:19.821799"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.821799"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 23:16:19.822800"], ["score", 25], ["updated_at", "2015-02-07 23:16:19.822800"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.829806"], ["password_digest", "$2a$04$IS7WfVVqQo/NiEtegzJDeuIOiPDwTtT/n.jP6OKjdJbHS7RF2SPyS"], ["updated_at", "2015-02-07 23:16:19.829806"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (4.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.837815"], ["password_digest", "$2a$04$w6PVUkUNBJ1cADxUFv2VKe8G62WUfw893J2ntettL2cZYSua7HA.K"], ["updated_at", "2015-02-07 23:16:19.837815"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.842819"], ["password_digest", "$2a$04$V6fPI6ukeWnrZ88brkzIRuGbQEjh/9/Wk5j8/LFnuujT88tH9SWFi"], ["updated_at", "2015-02-07 23:16:19.842819"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.846823"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:19.846823"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:19.847824"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.847824"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:16:19.848825"], ["score", 10], ["updated_at", "2015-02-07 23:16:19.848825"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.856832"], ["password_digest", "$2a$04$CrR.cMWG8HDvegRmK0cb8eQJf6Ar/cnEvWdO/Ogs6/S3poqykTuNa"], ["updated_at", "2015-02-07 23:16:19.856832"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.861837"], ["password_digest", "$2a$04$VsTZ4PLyPekVaylCNCuNu.tM39ifTFB.hOy10WSCimXxJUGg8KTY2"], ["updated_at", "2015-02-07 23:16:19.861837"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:19.867843"], ["password_digest", "$2a$04$LKXRWzj3eFlB5BqcbBVQw.j0qm2gxU.VqhDH6JVnFKpwYYt/XNvda"], ["updated_at", "2015-02-07 23:16:19.867843"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:19.869845"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:19.869845"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:19.871846"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:19.871846"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:16:19.872848"], ["score", 10], ["updated_at", "2015-02-07 23:16:19.872848"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:43.547574"], ["name", "Koff"], ["updated_at", "2015-02-07 23:16:43.547574"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (78.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:43.553580"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:16:43.553580"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:43.632655"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:16:43.632655"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 66ms (Views: 56.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:43.720739"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:16:43.720739"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 15ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:43.743761"], ["name", "Koff"], ["updated_at", "2015-02-07 23:16:43.743761"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:43.744762"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:16:43.744762"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:43.746764"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:16:43.746764"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 2.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:43.769786"], ["name", "Koff"], ["updated_at", "2015-02-07 23:16:43.769786"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:43.771788"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:16:43.771788"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:43.773790"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:16:43.773790"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:43.783799"], ["name", "Koff"], ["updated_at", "2015-02-07 23:16:43.783799"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:43.785801"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:16:43.785801"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:43.786802"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:16:43.786802"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (24.0ms)
Completed 200 OK in 27ms (Views: 25.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:43.822836"], ["name", "Koff"], ["updated_at", "2015-02-07 23:16:43.822836"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:43.824838"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:43.824838"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:43.826840"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:43.826840"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:43.831845"], ["password_digest", "$2a$04$2913mC6H4a0dmAwXG95EJu21pL/zlGAVGtvFl6MMKhz.nwWr.41d6"], ["updated_at", "2015-02-07 23:16:43.831845"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 19.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (7.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:16:43.898908"], ["score", 15], ["updated_at", "2015-02-07 23:16:43.898908"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:16:43.901912"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:43.923932"], ["password_digest", "$2a$04$Mmt2/tgCOQvK7nfRQSs8gO9why6ImtcTdTDVQysDXfAf9P5pGNnh."], ["updated_at", "2015-02-07 23:16:43.923932"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:43.944952"], ["password_digest", "$2a$04$pxLoFci77F.JcJx9AqmW7ufI09z8zhiryvjuPFzWwLBLR3JJvnI9O"], ["updated_at", "2015-02-07 23:16:43.944952"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:43.961969"], ["password_digest", "$2a$04$85SbqF7FeUFZN4iYWu.O2.HkTm8K00ZwNUvUF77MNmEKk.n46.MtS"], ["updated_at", "2015-02-07 23:16:43.961969"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:43.974982"], ["password_digest", "$2a$04$412xQh9EHUG/4h/agSHPN.t8E.6SHV9sgsppMhvFD6dGvPSz1cZF."], ["updated_at", "2015-02-07 23:16:43.974982"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:43.996001"], ["password_digest", "$2a$04$SaJ4bGS5tqCeTSEg5PQEt.eblpHa6gjT1L098HAikjMoXgp32XDMe"], ["updated_at", "2015-02-07 23:16:43.996001"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:16:43 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:16:44 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:16:44 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.012017"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:44.012017"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.035038"], ["password_digest", "$2a$04$3hAJFJPrBYXUkroE6g1bZODWQpInbY06CVYfVV0B0lL.ybDfg6ZZ."], ["updated_at", "2015-02-07 23:16:44.035038"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.042045"], ["password_digest", "$2a$04$RdnsHuaNNZnf.ssLL0CT.ei8y8g6GUbFYlh1lamqeMLjRFRqeQh.O"], ["updated_at", "2015-02-07 23:16:44.042045"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:16:44.044047"], ["score", 10], ["updated_at", "2015-02-07 23:16:44.044047"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:16:44.046049"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:16:44.046049"], ["score", 20], ["updated_at", "2015-02-07 23:16:44.046049"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 23:16:44.047050"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.053057"], ["password_digest", "$2a$04$NLAqJHIm2GI.NlNw.EX7ge3WfBwRtrmfUODdTc69KgNpzW6pQz2je"], ["updated_at", "2015-02-07 23:16:44.053057"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.060062"], ["password_digest", "$2a$04$S69tZuiWTLI44OOuXQFM4.DThc3jCU9jIg.fgkfYzISzJnh9e11Zq"], ["updated_at", "2015-02-07 23:16:44.060062"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:44.066068"], ["password_digest", "$2a$04$WC.JP1wZ/z2Bb2WzGx0oH.FZhNzwC5qZgA2tkjtRiyZIhGxFv.28e"], ["updated_at", "2015-02-07 23:16:44.066068"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.068070"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:44.068070"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:44.070072"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:44.070072"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:16:44.072075"], ["score", 10], ["updated_at", "2015-02-07 23:16:44.072075"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:44.079080"], ["password_digest", "$2a$04$mN7Du3KcKZsdJms5LDFwl.qBkFsMqn8kMxselFM/7t56sZ4zN64Xy"], ["updated_at", "2015-02-07 23:16:44.079080"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.080081"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:44.080081"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:44.082083"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:44.082083"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:16:44.083084"], ["score", 10], ["updated_at", "2015-02-07 23:16:44.083084"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:44.084085"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:44.084085"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 23:16:44.085086"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:44.085086"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 23:16:44.086088"], ["score", 20], ["updated_at", "2015-02-07 23:16:44.086088"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.087088"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:44.087088"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 23:16:44.088089"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:44.088089"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 23:16:44.089090"], ["score", 15], ["updated_at", "2015-02-07 23:16:44.089090"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:44.090091"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:44.090091"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 23:16:44.090091"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:44.090091"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 23:16:44.091092"], ["score", 7], ["updated_at", "2015-02-07 23:16:44.091092"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.092093"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:44.092093"], ["year", 1900]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 23:16:44.093094"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:44.093094"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 23:16:44.094095"], ["score", 9], ["updated_at", "2015-02-07 23:16:44.094095"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:44.095095"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:44.095095"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 23:16:44.095095"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:44.095095"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 23:16:44.098099"], ["score", 25], ["updated_at", "2015-02-07 23:16:44.098099"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (40.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.106106"], ["password_digest", "$2a$04$FRTW.xgjQz0pim7OgbHxfOBmuiuQRt4wuUFw1f9mh3MTCYuGTIVHW"], ["updated_at", "2015-02-07 23:16:44.106106"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (27.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.153151"], ["password_digest", "$2a$04$FdLj3l9jXNAHZWVh3KbW5eJEnzBsowikJFjaUlFIULEXDpyveCYVO"], ["updated_at", "2015-02-07 23:16:44.153151"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (25.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:44.185181"], ["password_digest", "$2a$04$W8E8dUoHzZ0K/wiyElPrG.qDrp0HtFuOzv45v2Ws2chqIWNn4ROYO"], ["updated_at", "2015-02-07 23:16:44.185181"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (28.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.212208"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:44.212208"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:44.241235"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:44.241235"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:16:44.242236"], ["score", 10], ["updated_at", "2015-02-07 23:16:44.242236"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:44.249242"], ["password_digest", "$2a$04$FVy5x9ztetf07RLaUnpxHOZ704XxUYvzQ09x71szDLInWBNA157Le"], ["updated_at", "2015-02-07 23:16:44.249242"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:44.255248"], ["password_digest", "$2a$04$Z2m0WkG3HTIzJWXyighxguuv/tGuGVxXCxn1kTqgDPBnbj1prybOu"], ["updated_at", "2015-02-07 23:16:44.255248"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:16:44.261254"], ["password_digest", "$2a$04$R8Hzu29sm5bduEY3VgNur.R0NPMWCFD1bGdfMaRta2AJZFkr1lm0m"], ["updated_at", "2015-02-07 23:16:44.261254"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:16:44.263256"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:16:44.263256"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:16:44.264257"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:16:44.264257"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:16:44.266259"], ["score", 10], ["updated_at", "2015-02-07 23:16:44.266259"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.301968"], ["name", "Koff"], ["updated_at", "2015-02-07 23:17:34.301968"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.307974"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:17:34.307974"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.310977"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:17:34.310977"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (18.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 66ms (Views: 56.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:17:34.399061"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:17:34.399061"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 16ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.422083"], ["name", "Koff"], ["updated_at", "2015-02-07 23:17:34.422083"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.424085"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:17:34.424085"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.426087"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:17:34.426087"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.450110"], ["name", "Koff"], ["updated_at", "2015-02-07 23:17:34.450110"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.451110"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:17:34.451110"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.453112"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:17:34.453112"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.463122"], ["name", "Koff"], ["updated_at", "2015-02-07 23:17:34.463122"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.465124"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:17:34.465124"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.466125"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:17:34.466125"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (24.0ms)
Completed 200 OK in 27ms (Views: 26.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.502159"], ["name", "Koff"], ["updated_at", "2015-02-07 23:17:34.502159"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:17:34.504161"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.504161"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:17:34.506163"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.506163"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.511168"], ["password_digest", "$2a$04$WwRq6TK5HFI./iwIafO6duM6/6Lqy2M.mDEpbbj7Ni2CEcd1hVdjS"], ["updated_at", "2015-02-07 23:17:34.511168"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 18.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:17:34.577230"], ["score", 15], ["updated_at", "2015-02-07 23:17:34.577230"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:17:34.579232"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (14.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.601253"], ["password_digest", "$2a$04$qGedDtn1kuHL0sTINBcymObvcoIUMdzs8JHElJvP1WRzQ399NrkkW"], ["updated_at", "2015-02-07 23:17:34.601253"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 1.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.634285"], ["password_digest", "$2a$04$TJnnJslHzLMpdQGGDq7bHuPtIq4affItLH4/2MJYzpDg9aajtKcxC"], ["updated_at", "2015-02-07 23:17:34.634285"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.651301"], ["password_digest", "$2a$04$.WKUq0/DBSg5Lmk59A9wBuMf4KgggX12pPt9P5mzYs4v3CfGMHp5u"], ["updated_at", "2015-02-07 23:17:34.651301"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.664313"], ["password_digest", "$2a$04$z6QzZk.c67xm8zXYgp/YquOB1.fziNVpaPw2vAGOO2ZYQFhQiAE1S"], ["updated_at", "2015-02-07 23:17:34.664313"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.684332"], ["password_digest", "$2a$04$ijSHZg3lKxGvf8y8/HgjFOG13TI7y/L/5cWI94Fz1629Bfy.WerUq"], ["updated_at", "2015-02-07 23:17:34.684332"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:17:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.698345"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.698345"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.719366"], ["password_digest", "$2a$04$UkrvJj9Xhy8rvpCrr2QqHusNUsNwFDACaYOdaiW3TUwAdQJDSzysG"], ["updated_at", "2015-02-07 23:17:34.719366"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.726372"], ["password_digest", "$2a$04$jhoYlDRcQrsCteU6ELcYVer4DAzxRGcYt2.IGKNQlZZgfNjU8dQFG"], ["updated_at", "2015-02-07 23:17:34.726372"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:17:34.728375"], ["score", 10], ["updated_at", "2015-02-07 23:17:34.728375"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:17:34.729375"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:17:34.730376"], ["score", 20], ["updated_at", "2015-02-07 23:17:34.730376"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.736382"], ["password_digest", "$2a$04$AGqEJ4jgHwKpQwXIRcOvx.GB7Wq0jQvAzj1060KTwc4.SqCGrCMFC"], ["updated_at", "2015-02-07 23:17:34.736382"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.743389"], ["password_digest", "$2a$04$C5./YoeKSu6RLt4Q5YQkB.l/ZX4dZjdBMRkBZX4HrjHcb43pGkUF2"], ["updated_at", "2015-02-07 23:17:34.743389"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.749394"], ["password_digest", "$2a$04$VZlGuYrTHcuks6tnYZvVm.4cg.g10xO6LrAY8N40GnFIgrGmT4v6m"], ["updated_at", "2015-02-07 23:17:34.749394"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.752397"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:17:34.752397"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:17:34.753398"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.753398"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:17:34.755400"], ["score", 10], ["updated_at", "2015-02-07 23:17:34.755400"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.762407"], ["password_digest", "$2a$04$bTYMIwb942MTjFaSeCvt8.kiO9GpsMEZQ5XqLfr2fBNj9HfIR2c6a"], ["updated_at", "2015-02-07 23:17:34.762407"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.763408"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:17:34.763408"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:17:34.765410"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.765410"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:17:34.766411"], ["score", 10], ["updated_at", "2015-02-07 23:17:34.766411"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.767412"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:17:34.767412"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 23:17:34.768412"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.768412"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 23:17:34.769413"], ["score", 20], ["updated_at", "2015-02-07 23:17:34.769413"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.769413"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:17:34.769413"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 23:17:34.770415"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.770415"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 23:17:34.771415"], ["score", 15], ["updated_at", "2015-02-07 23:17:34.771415"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.772416"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:17:34.772416"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 23:17:34.773417"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.773417"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 23:17:34.774418"], ["score", 7], ["updated_at", "2015-02-07 23:17:34.774418"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.775419"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:17:34.775419"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 23:17:34.776421"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.776421"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 23:17:34.777421"], ["score", 9], ["updated_at", "2015-02-07 23:17:34.777421"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.777421"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:17:34.777421"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 23:17:34.778422"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.778422"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 23:17:34.779423"], ["score", 25], ["updated_at", "2015-02-07 23:17:34.779423"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.786430"], ["password_digest", "$2a$04$ke5NOKyyGqyR7ZLlA1Sc7ubIp.tv9xNTtuv9CHeyKF4pIYznC9bU."], ["updated_at", "2015-02-07 23:17:34.786430"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.792435"], ["password_digest", "$2a$04$pSJgEMfyAeGLt9f6TIdhIu66XhU2I.BfwyPJg4X7HimC7Cq3l0ebG"], ["updated_at", "2015-02-07 23:17:34.792435"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.798441"], ["password_digest", "$2a$04$qufYEaM7kQCi0fNDouhNMOOT40HLMxcWvny2G.VD3Q/BqcpP.vz0u"], ["updated_at", "2015-02-07 23:17:34.798441"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.799442"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:17:34.799442"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:17:34.801444"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.801444"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:17:34.802445"], ["score", 10], ["updated_at", "2015-02-07 23:17:34.802445"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.809451"], ["password_digest", "$2a$04$RHX8ytGhHENX/7vHCcfw6ujmPtE6KEe2/Quue.ofmIl33YtW4Fl1u"], ["updated_at", "2015-02-07 23:17:34.809451"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.814456"], ["password_digest", "$2a$04$4BFXrWswm5UU2GSzIhUuhOsOotzUEGnGkLEXle8XjKN2u.DH63lFq"], ["updated_at", "2015-02-07 23:17:34.814456"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:17:34.820462"], ["password_digest", "$2a$04$1Wut7SD7b7jB7an8U7tpOesF.joL0/5pfIDidJ254h8jL2Fvw03na"], ["updated_at", "2015-02-07 23:17:34.820462"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:17:34.824466"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:17:34.824466"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:17:34.825467"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:17:34.825467"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:17:34.826468"], ["score", 10], ["updated_at", "2015-02-07 23:17:34.826468"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.472921"], ["name", "Koff"], ["updated_at", "2015-02-07 23:18:30.472921"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.479927"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:18:30.479927"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.482930"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:18:30.482930"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 66ms (Views: 55.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:18:30.571014"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:18:30.571014"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 16ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.594036"], ["name", "Koff"], ["updated_at", "2015-02-07 23:18:30.594036"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.596038"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:18:30.596038"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.597039"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:18:30.597039"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.621062"], ["name", "Koff"], ["updated_at", "2015-02-07 23:18:30.621062"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.623064"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:18:30.623064"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.624064"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:18:30.624064"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 1.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.635075"], ["name", "Koff"], ["updated_at", "2015-02-07 23:18:30.635075"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.637077"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:18:30.637077"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.638078"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:18:30.638078"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (24.0ms)
Completed 200 OK in 26ms (Views: 26.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.674112"], ["name", "Koff"], ["updated_at", "2015-02-07 23:18:30.674112"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:18:30.676114"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.676114"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:18:30.678116"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.678116"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.682120"], ["password_digest", "$2a$04$sG/selK1T8wsC70J/m4zPOB66S2I2kk9BAyzedNsBfuW0VB3FYJ26"], ["updated_at", "2015-02-07 23:18:30.682120"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 17.0ms | ActiveRecord: 2.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (7.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:18:30.748183"], ["score", 15], ["updated_at", "2015-02-07 23:18:30.748183"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:18:30.751186"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.772205"], ["password_digest", "$2a$04$cdjEb4TtTxuytqXkqxtuauil5bXQ3EOXYbmf3ImT/x/h.AtgY/4Pe"], ["updated_at", "2015-02-07 23:18:30.772205"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.788221"], ["name", "Koff"], ["updated_at", "2015-02-07 23:18:30.788221"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.795228"], ["password_digest", "$2a$04$wKvVvpH6QeWbnEDlVp5txeVb08PjTl.CtHFnsX/gXCxxOyEDkj71y"], ["updated_at", "2015-02-07 23:18:30.795228"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.812245"], ["password_digest", "$2a$04$lWxcxAMFRCIliORtJUzr4.OaD8vY53EW471V5rKf6y5hH3TBnNik6"], ["updated_at", "2015-02-07 23:18:30.812245"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.824255"], ["password_digest", "$2a$04$nsUmf7/o/jvc0M6zvTK6T.MhZ4hRXVaq3Adj1HGHRYZ368Rc4pvy2"], ["updated_at", "2015-02-07 23:18:30.824255"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.845275"], ["password_digest", "$2a$04$X/SMZyXVEAYQYQj.9g5f/O3FO.iZhikeo1QJoXHcAKBU5wAKDn1X."], ["updated_at", "2015-02-07 23:18:30.845275"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:18:30 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.859289"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.859289"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.881309"], ["password_digest", "$2a$04$15uLiRauexCr6nVOKl3Rz.Mrk3HZZiBZMa.mfzRMPJGnEDeqe2OVy"], ["updated_at", "2015-02-07 23:18:30.881309"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.887315"], ["password_digest", "$2a$04$C7zGlOF/ERK5TiFXxUpqY.C3nn08KiaEVxUzPeg0/K4jMex3pDi5O"], ["updated_at", "2015-02-07 23:18:30.887315"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.889317"], ["score", 10], ["updated_at", "2015-02-07 23:18:30.889317"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:18:30.890318"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.891319"], ["score", 20], ["updated_at", "2015-02-07 23:18:30.891319"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 23:18:30.892320"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.898326"], ["password_digest", "$2a$04$9KY58r6oicSXPGOcpKnEBe54OFWf0hZYX/Ye38Kpj8ac2mTFnDAXi"], ["updated_at", "2015-02-07 23:18:30.898326"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.905333"], ["password_digest", "$2a$04$IEJhTi0bwV.EkSSLFvdrVeDzOPaURB2lonihV00CwsQzwnBrrDWYS"], ["updated_at", "2015-02-07 23:18:30.905333"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.911338"], ["password_digest", "$2a$04$962RFDyh9oIbjfArBCGxCO4TR19ggKB1TMeTfGBnACcO81nqBd8zS"], ["updated_at", "2015-02-07 23:18:30.911338"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.913340"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:18:30.913340"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:18:30.914341"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.914341"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:18:30.915344"], ["score", 10], ["updated_at", "2015-02-07 23:18:30.915344"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.922349"], ["password_digest", "$2a$04$UeDqGb/be1vRicdlBFqw3OLW6K8mGoAQ0Jjof37J96gRQFYOKQeGm"], ["updated_at", "2015-02-07 23:18:30.922349"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.924351"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:18:30.924351"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:18:30.926352"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.926352"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:18:30.927353"], ["score", 10], ["updated_at", "2015-02-07 23:18:30.927353"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.928354"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:18:30.928354"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 23:18:30.928354"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.928354"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 23:18:30.929355"], ["score", 20], ["updated_at", "2015-02-07 23:18:30.929355"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.930356"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:18:30.930356"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 23:18:30.931357"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.931357"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 23:18:30.932358"], ["score", 15], ["updated_at", "2015-02-07 23:18:30.932358"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.933359"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:18:30.933359"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 23:18:30.934360"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.934360"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 23:18:30.935361"], ["score", 7], ["updated_at", "2015-02-07 23:18:30.935361"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.936362"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:18:30.936362"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 23:18:30.936362"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.936362"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 23:18:30.937363"], ["score", 9], ["updated_at", "2015-02-07 23:18:30.937363"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.938364"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:18:30.938364"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 23:18:30.939365"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.939365"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 23:18:30.940366"], ["score", 25], ["updated_at", "2015-02-07 23:18:30.940366"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.947372"], ["password_digest", "$2a$04$/J0BlYFcr3MtrpsMKfaKbONcLOcp7Bol14H0jObJ01T0z6r6eJ5fi"], ["updated_at", "2015-02-07 23:18:30.947372"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.952377"], ["password_digest", "$2a$04$S9KMM5QvuuLo9la3sLDiIu5pUbOnSK9SuXnkyn1jEbHkGZpUQ.ufa"], ["updated_at", "2015-02-07 23:18:30.952377"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.959384"], ["password_digest", "$2a$04$kz2bA/bDLgJRjMYKh8V4..DDBvhrLWXgKJEuQXPmIsnUqcfPniC4a"], ["updated_at", "2015-02-07 23:18:30.959384"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.961386"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:18:30.961386"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:18:30.962387"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.962387"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:18:30.963388"], ["score", 10], ["updated_at", "2015-02-07 23:18:30.963388"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.970394"], ["password_digest", "$2a$04$utuVY8ekyfWRYE6iIy/p9O5KjiGbkWhM.a7euuyR0G4YqiH3CwSte"], ["updated_at", "2015-02-07 23:18:30.970394"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.976400"], ["password_digest", "$2a$04$CQE7N5YsDymxMXwwCdWGPuI1gBWNHMWyFbs0ZHswadk6v2Tg56FGu"], ["updated_at", "2015-02-07 23:18:30.976400"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:18:30.981405"], ["password_digest", "$2a$04$8esG920igaLTyTiILg2MIO9aZw1Ha0ixx0QLNTqKvLBkmLOQgrNq6"], ["updated_at", "2015-02-07 23:18:30.981405"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:18:30.984408"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:18:30.984408"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:18:30.985409"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:18:30.985409"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:18:30.986410"], ["score", 10], ["updated_at", "2015-02-07 23:18:30.986410"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.205992"], ["name", "Koff"], ["updated_at", "2015-02-07 23:19:28.205992"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.212999"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:19:28.212999"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.216001"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:19:28.216001"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (16.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 66ms (Views: 55.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:19:28.303084"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:19:28.303084"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 15ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.326106"], ["name", "Koff"], ["updated_at", "2015-02-07 23:19:28.326106"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.328108"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:19:28.328108"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.330110"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:19:28.330110"], ["year", 1899]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.354133"], ["name", "Koff"], ["updated_at", "2015-02-07 23:19:28.354133"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.356135"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:19:28.356135"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.357136"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:19:28.357136"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.367145"], ["name", "Koff"], ["updated_at", "2015-02-07 23:19:28.367145"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.369147"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:19:28.369147"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.370148"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:19:28.370148"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (24.0ms)
Completed 200 OK in 26ms (Views: 24.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.406183"], ["name", "Koff"], ["updated_at", "2015-02-07 23:19:28.406183"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:19:28.408184"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.408184"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:19:28.410186"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.410186"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.415191"], ["password_digest", "$2a$04$UzbhpT53mcjj79y.PCYIWe616MhQMk.QNtQdIghZmZ4LiT2PcJx4C"], ["updated_at", "2015-02-07 23:19:28.415191"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 18.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:19:28.480253"], ["score", 15], ["updated_at", "2015-02-07 23:19:28.480253"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:19:28.482255"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (1.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.503275"], ["password_digest", "$2a$04$7sSu.2Ey9Xp17NGw7NWeiOC228gkhtzkvbmTJdtJX0DIQYZjCaQCy"], ["updated_at", "2015-02-07 23:19:28.503275"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.519290"], ["name", "Koff"], ["updated_at", "2015-02-07 23:19:28.519290"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:19:28.521292"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.521292"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.529300"], ["password_digest", "$2a$04$6sN4MhY3ETXf9FW5rxWez.t93ZayEbJ9RJfdLrgMCdfEHdTQXunT6"], ["updated_at", "2015-02-07 23:19:28.529300"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.546316"], ["password_digest", "$2a$04$Jf0GjoQqmoQGWm3LK/aoOOUQ4S5WVeF/3F4WrJn8ijHRpD40TYSxm"], ["updated_at", "2015-02-07 23:19:28.546316"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.559328"], ["password_digest", "$2a$04$aalENbQJ4oDs6uiF8EjcD.oQoM5juIZYXZifhFsjfFJBg8.2ESiXK"], ["updated_at", "2015-02-07 23:19:28.559328"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.579347"], ["password_digest", "$2a$04$oi3qlI.wpabHGAHwyvaAjeEfmNwVp53v6cdXMsilmtsaPiXQ2ZL0a"], ["updated_at", "2015-02-07 23:19:28.579347"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:19:28 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.596364"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.596364"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.617384"], ["password_digest", "$2a$04$kHuUzHoK6Rls.Bbj2guM6OL5rl7ovnH.ZUjdYdwSGohWeT05YiJGm"], ["updated_at", "2015-02-07 23:19:28.617384"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.623389"], ["password_digest", "$2a$04$JIpPNFNhXr.cZdlesmkNyOACTu83handCZ00gOPCWrlmbEI.b0Zey"], ["updated_at", "2015-02-07 23:19:28.623389"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.625391"], ["score", 10], ["updated_at", "2015-02-07 23:19:28.625391"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:19:28.627393"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.627393"], ["score", 20], ["updated_at", "2015-02-07 23:19:28.627393"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 23:19:28.628394"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.634400"], ["password_digest", "$2a$04$owrS.3ZlRnC/LSIwi0WQN.6AChvduBGhLdtd3k30Z4HhkTsnF9hJu"], ["updated_at", "2015-02-07 23:19:28.634400"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.642407"], ["password_digest", "$2a$04$p0sg7p8EXNo9AfKgduo18O/lvufq4BKJd1PMV6efZ4jcGrW4POc76"], ["updated_at", "2015-02-07 23:19:28.642407"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.648413"], ["password_digest", "$2a$04$ETPcXZ.DV1yrroCFnby1AemztvsSQVvY0ooNYb2arPmmcRlIUbSq2"], ["updated_at", "2015-02-07 23:19:28.648413"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.650415"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:19:28.650415"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:19:28.652417"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.652417"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:19:28.653418"], ["score", 10], ["updated_at", "2015-02-07 23:19:28.653418"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.660425"], ["password_digest", "$2a$04$pMYFVu9iLdM2HFfGfLjz5Oih2ST7bdKF.Qo.o/r8S.GeL19ble6Iu"], ["updated_at", "2015-02-07 23:19:28.660425"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.661426"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:19:28.661426"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:19:28.663428"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.663428"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:19:28.664429"], ["score", 10], ["updated_at", "2015-02-07 23:19:28.664429"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.665429"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:19:28.665429"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 23:19:28.666430"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.666430"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 23:19:28.667431"], ["score", 20], ["updated_at", "2015-02-07 23:19:28.667431"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.668432"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:19:28.668432"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 23:19:28.668432"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.668432"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 23:19:28.669433"], ["score", 15], ["updated_at", "2015-02-07 23:19:28.669433"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.670434"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:19:28.670434"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 23:19:28.671435"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.671435"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 23:19:28.672436"], ["score", 7], ["updated_at", "2015-02-07 23:19:28.672436"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.673437"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:19:28.673437"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 23:19:28.674438"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.674438"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 23:19:28.674438"], ["score", 9], ["updated_at", "2015-02-07 23:19:28.674438"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.675439"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:19:28.675439"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 23:19:28.676440"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.676440"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 23:19:28.677441"], ["score", 25], ["updated_at", "2015-02-07 23:19:28.677441"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.683447"], ["password_digest", "$2a$04$CVGGEmqnp01EmL7jBpQ9z.vNxYRFUmDKH4Lu3nMG6WBeRucyY6yQG"], ["updated_at", "2015-02-07 23:19:28.683447"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.689452"], ["password_digest", "$2a$04$6gHcN8m9/xwBq0Uj2BetmulmpLtXF0vcbASNhDINgHrI7kO2rLJHa"], ["updated_at", "2015-02-07 23:19:28.689452"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.695458"], ["password_digest", "$2a$04$VAaR4HqWmggLHHIr3QnprO22qMno5oceTUuoXPYhVBmMutQyhWKJS"], ["updated_at", "2015-02-07 23:19:28.695458"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.696459"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:19:28.696459"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:19:28.698461"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.698461"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:19:28.699462"], ["score", 10], ["updated_at", "2015-02-07 23:19:28.699462"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.706468"], ["password_digest", "$2a$04$K3hHJ1q/nsOG/Vt.sRSo5e/agiwedKTziuAmPlzzKx8jDyNQaQ15a"], ["updated_at", "2015-02-07 23:19:28.706468"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.712474"], ["password_digest", "$2a$04$lue6I3pz6VfjOX85c4L9deYfzJGRe93XGP9i7bQ/BRiOzbYoi5d6i"], ["updated_at", "2015-02-07 23:19:28.712474"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:19:28.719481"], ["password_digest", "$2a$04$mQcFA5XTu9b6Lp7Ws/o8VOPDd134fTzroM7plfFafHJkHVFpDKVXe"], ["updated_at", "2015-02-07 23:19:28.719481"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:19:28.721483"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:19:28.721483"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:19:28.722483"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:19:28.722483"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:19:28.723485"], ["score", 10], ["updated_at", "2015-02-07 23:19:28.723485"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:07.022004"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:07.022004"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:07.028010"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:20:07.028010"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:07.031013"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:20:07.031013"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 65ms (Views: 55.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:07.118096"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:20:07.118096"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 15ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:07.140117"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:07.140117"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:07.142119"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:20:07.142119"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:07.143120"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:20:07.143120"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:07.167143"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:07.167143"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:07.169145"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:20:07.169145"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:07.170146"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:20:07.170146"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:07.180155"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:07.180155"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:07.182157"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:20:07.182157"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:07.183158"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:20:07.183158"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (22.0ms)
Completed 200 OK in 25ms (Views: 25.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:07.219192"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:07.219192"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:07.221194"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:07.221194"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:07.222195"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:07.222195"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:07.227200"], ["password_digest", "$2a$04$N8ORm2Rf3fDd70FRurxSye4qoyfm0jLcfurSrg0PciJ2MHhjZYmRi"], ["updated_at", "2015-02-07 23:20:07.227200"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 18.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:20:07.293263"], ["score", 15], ["updated_at", "2015-02-07 23:20:07.293263"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:20:07.295265"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:07.318287"], ["password_digest", "$2a$04$rLL4oCJHmnRk1ktdYaXMSOSjzYob0MgnJYzIrKsihhVhogsDWqMOK"], ["updated_at", "2015-02-07 23:20:07.318287"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:20:07 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 1.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (7.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:29.398736"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:29.398736"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:29.411748"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:29.411748"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:29.437772"], ["password_digest", "$2a$04$cTHqFAw10qj.OT1cgANdL.lTb1GJcWfP2xZU4wwnVchhTixi1qNqm"], ["updated_at", "2015-02-07 23:20:29.437772"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:20:29 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (11.0ms)
  Rendered users/new.html.erb within layouts/application (14.0ms)
Completed 200 OK in 20ms (Views: 19.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:20:29 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:29.489822"], ["password_digest", "$2a$04$N7t4CoGJpNNWMBh9gh.PRONB/YxB2VZypTjZ1Jrh5blQnkJXFSxie"], ["updated_at", "2015-02-07 23:20:29.489822"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 14ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:20:29 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (1.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (17.0ms)
Completed 200 OK in 25ms (Views: 19.0ms | ActiveRecord: 2.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:29.541872"], ["password_digest", "$2a$04$yjh4YZs2Dk8hcB4bSNGkEuvMu3IPaY9qYPcaYv1i0WXs0j.k/GIiW"], ["updated_at", "2015-02-07 23:20:29.541872"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:20:29 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 10ms (Views: 10.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:20:29 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:20:29 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (20.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 37ms (Views: 32.0ms | ActiveRecord: 2.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:29.638964"], ["password_digest", "$2a$04$kR89qJOBnFhn9/VNNvvJiOyi5rUp2QjiELDJ5SD9sZrROyvKhlWLm"], ["updated_at", "2015-02-07 23:20:29.638964"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:20:29 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:20:29 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:20:29 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:29.694017"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:29.694017"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:29.798116"], ["password_digest", "$2a$04$lD1yK/6JTeXuBt1nDyiQEuJ2LyYFcCveS5G8yzZG2ylK.x0H7Ca5y"], ["updated_at", "2015-02-07 23:20:29.798116"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:29.817134"], ["password_digest", "$2a$04$tnftwBSQueXXFd6H0ni4SOUmaelfO.1xz3bAcs0x8RnFVPqFo1zlW"], ["updated_at", "2015-02-07 23:20:29.817134"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:20:29.825141"], ["score", 10], ["updated_at", "2015-02-07 23:20:29.825141"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:20:29.830146"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:20:29.835151"], ["score", 20], ["updated_at", "2015-02-07 23:20:29.835151"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 23:20:29.840156"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:29.858173"], ["password_digest", "$2a$04$Vx9sndH72dv2.ZfP35vlbuXUXQCq6rypwvU0KWSWpidusDJ.LiSQm"], ["updated_at", "2015-02-07 23:20:29.858173"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:29.874188"], ["password_digest", "$2a$04$S/XweJUzJZlJS3qgrSUPGuyS7CrBfj7oQZkExgoQligjqh9lTlWZm"], ["updated_at", "2015-02-07 23:20:29.874188"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:29.891204"], ["password_digest", "$2a$04$WOzRhAvSWAMGrGIaVk9EX.lV2y0rlXF4WrWJX3vG5mepHgj2B1lLK"], ["updated_at", "2015-02-07 23:20:29.891204"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:29.899212"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:29.899212"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:29.905218"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:29.905218"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:20:29.912224"], ["score", 10], ["updated_at", "2015-02-07 23:20:29.912224"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:29.934245"], ["password_digest", "$2a$04$6AXF0tUaHU5ROz8deI.Jvui25KPKwOmV1eiAk6bUkdrcDbx/IoOUi"], ["updated_at", "2015-02-07 23:20:29.934245"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:29.942253"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:29.942253"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:29.948259"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:29.948259"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:20:29.955265"], ["score", 10], ["updated_at", "2015-02-07 23:20:29.955265"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:29.961271"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:29.961271"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 23:20:29.967277"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:29.967277"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 23:20:29.973283"], ["score", 20], ["updated_at", "2015-02-07 23:20:29.973283"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:29.980289"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:29.980289"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 23:20:29.985294"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:29.985294"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 23:20:29.992301"], ["score", 15], ["updated_at", "2015-02-07 23:20:29.992301"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:29.998306"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:29.998306"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 23:20:30.004312"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:30.004312"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 23:20:30.010318"], ["score", 7], ["updated_at", "2015-02-07 23:20:30.010318"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:30.017325"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:30.017325"], ["year", 1900]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 23:20:30.027334"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:30.027334"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 23:20:30.034341"], ["score", 9], ["updated_at", "2015-02-07 23:20:30.034341"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:30.040346"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:30.040346"], ["year", 1900]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 23:20:30.046352"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:30.046352"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 23:20:30.052358"], ["score", 25], ["updated_at", "2015-02-07 23:20:30.052358"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (1.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:30.076381"], ["password_digest", "$2a$04$ic9OeQ.rNAPRptZHR25R3uvuTK4cJwD9ce9Dv7pkIGe4BMtn/CvUq"], ["updated_at", "2015-02-07 23:20:30.076381"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:30.091395"], ["password_digest", "$2a$04$Zr/vqOWY0hkHd1BavrEXW.Zgfja5NStHd35KBzSV0/F44xc50iP5m"], ["updated_at", "2015-02-07 23:20:30.091395"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:30.107682"], ["password_digest", "$2a$04$UW3slid88NDts4nL2fmrbeBNrEIcWuA24nzh8h2I/Z6ax6deiBhd."], ["updated_at", "2015-02-07 23:20:30.107682"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:30.114710"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:30.114710"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:30.121717"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:30.121717"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:20:30.128724"], ["score", 10], ["updated_at", "2015-02-07 23:20:30.128724"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:30.149743"], ["password_digest", "$2a$04$sIL.B0sBQ8wqB7/zAWAGUukitymbN.Kbt6aihJzkTwbrhv.3VPX1u"], ["updated_at", "2015-02-07 23:20:30.149743"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:30.164758"], ["password_digest", "$2a$04$DaNOnm0aebP3777em23vHe9zz8JZxrwzhL7wirpxUTdAyyJ0UQfk6"], ["updated_at", "2015-02-07 23:20:30.164758"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:30.180773"], ["password_digest", "$2a$04$2bSMVXlob1adTrOUx8vK8.kaVLGiwBE251kXLNlNPPzuNwMnYB0by"], ["updated_at", "2015-02-07 23:20:30.180773"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:30.188781"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:30.188781"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:30.194787"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:30.194787"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:20:30.201793"], ["score", 10], ["updated_at", "2015-02-07 23:20:30.201793"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:41.545436"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:41.545436"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.550440"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:20:41.550440"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:41.552442"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:20:41.552442"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 67ms (Views: 55.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:41.641527"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:20:41.641527"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 15ms (Views: 14.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.664549"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:41.664549"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:41.666551"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:20:41.666551"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.667552"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:20:41.667552"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:41.691575"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:41.691575"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.693577"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:20:41.693577"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:41.694578"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:20:41.694578"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.705588"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:41.705588"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:41.706589"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:20:41.706589"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.708591"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:20:41.708591"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (23.0ms)
Completed 200 OK in 26ms (Views: 26.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:41.744625"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:41.744625"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:41.746627"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:41.746627"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:41.747628"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:41.747628"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:41.752633"], ["password_digest", "$2a$04$9e6L5QprGEKB.e6vO.oh5ut1kAlarJq1rjsm5XP.l.Q0k2P2VZNWG"], ["updated_at", "2015-02-07 23:20:41.752633"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 18.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (7.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:20:41.820698"], ["score", 15], ["updated_at", "2015-02-07 23:20:41.820698"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:20:41.823701"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:41.847724"], ["password_digest", "$2a$04$nq/z3gE5y64G15umch2jUeZCHiRmHrS2re/RTtRhgGqbY3vxiQVG."], ["updated_at", "2015-02-07 23:20:41.847724"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.864740"], ["name", "Koff"], ["updated_at", "2015-02-07 23:20:41.864740"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:41.866742"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:41.866742"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:20:41.875750"], ["score", 15], ["updated_at", "2015-02-07 23:20:41.875750"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:20:41.876751"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:41.893767"], ["password_digest", "$2a$04$hm/E2fwyEj6otJvA60O.sedJXziYfmuGQ3Buf7hqGpYEKvR.T/L9e"], ["updated_at", "2015-02-07 23:20:41.893767"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.909783"], ["password_digest", "$2a$04$5OKCLtEPx4gUzzd/ugUg5eA/Q44J65/tqlP9LBobqZVVPNIYmCYD6"], ["updated_at", "2015-02-07 23:20:41.909783"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (1.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.922795"], ["password_digest", "$2a$04$HF4uKHv1oIzKUectMHVzA.zVUV2DqI5CqR5ubOfdwU6J/B/WXwKje"], ["updated_at", "2015-02-07 23:20:41.922795"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 1.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.943815"], ["password_digest", "$2a$04$r4JSLTDZpzadjZETVt7oBO.7CV2aJhtUp8bK4y6/ebH.nfrSLJ5du"], ["updated_at", "2015-02-07 23:20:41.943815"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:20:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.957828"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:41.957828"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.978848"], ["password_digest", "$2a$04$Ep/HuPyAxeHbJzVD5r.up.ulgiziyMweh/umpdbacWhReWPYE.01S"], ["updated_at", "2015-02-07 23:20:41.978848"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.985855"], ["password_digest", "$2a$04$CCkxjXh0ZEhdXhjwnQAn2.JAmk6ss2k5c1Cr/gBx/p.0M2wvhmcbi"], ["updated_at", "2015-02-07 23:20:41.985855"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:20:41.987857"], ["score", 10], ["updated_at", "2015-02-07 23:20:41.987857"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:20:41.988858"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:20:41.989859"], ["score", 20], ["updated_at", "2015-02-07 23:20:41.989859"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 23:20:41.990860"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:41.996866"], ["password_digest", "$2a$04$o8tzdg8BhAlLxXBJHkTq2OyITsByyDokp1jhHPzJjZVyqf1g/xc1a"], ["updated_at", "2015-02-07 23:20:41.996866"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:42.002871"], ["password_digest", "$2a$04$fME9JfaROmQAmzfXvxar1efF6qaYqo8sjVEvKJ.hgccWscF8db6qe"], ["updated_at", "2015-02-07 23:20:42.002871"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:42.008877"], ["password_digest", "$2a$04$i5B3xV1/sYAQnzmkSOEuaOUGLIuhOA3TznbgEZd9DljkEmL4GXwOC"], ["updated_at", "2015-02-07 23:20:42.008877"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:42.013882"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:42.013882"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:42.015884"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:42.015884"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:20:42.016885"], ["score", 10], ["updated_at", "2015-02-07 23:20:42.016885"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:42.023891"], ["password_digest", "$2a$04$/gOwWHIvRW5WarILAsyIEuGw98OaP0kTLtw6V.vlr8nnNnGv3jBTm"], ["updated_at", "2015-02-07 23:20:42.023891"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:42.025894"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:42.025894"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:42.026894"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:42.026894"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:20:42.028896"], ["score", 10], ["updated_at", "2015-02-07 23:20:42.028896"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:42.028896"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:42.028896"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 23:20:42.029897"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:42.029897"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 23:20:42.030898"], ["score", 20], ["updated_at", "2015-02-07 23:20:42.030898"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:42.031899"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:42.031899"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 23:20:42.032900"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:42.032900"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 23:20:42.033901"], ["score", 15], ["updated_at", "2015-02-07 23:20:42.033901"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:42.034902"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:42.034902"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 23:20:42.035903"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:42.035903"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 23:20:42.036904"], ["score", 7], ["updated_at", "2015-02-07 23:20:42.036904"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:42.037905"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:42.037905"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 23:20:42.037905"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:42.037905"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 23:20:42.038905"], ["score", 9], ["updated_at", "2015-02-07 23:20:42.038905"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:42.039906"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:42.039906"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 23:20:42.045912"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:42.045912"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 23:20:42.046913"], ["score", 25], ["updated_at", "2015-02-07 23:20:42.046913"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (57.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:42.108973"], ["password_digest", "$2a$04$3xTjbR3aNNAUWy2VSx2SsutnCdg4omhRfbKOZfvopzDwOcCQo9oGe"], ["updated_at", "2015-02-07 23:20:42.108973"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:42.114978"], ["password_digest", "$2a$04$p/ROm.bj5zlhs.Ut2wka0e72wDRY2aYDFkAaoGp7Xnr1ZKWIl1/gO"], ["updated_at", "2015-02-07 23:20:42.114978"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:42.121985"], ["password_digest", "$2a$04$krrSu6jQrMyEtGZdcGdTO.WZV9bAwrTvmBJqxir6sBtv3iCCLoPdu"], ["updated_at", "2015-02-07 23:20:42.121985"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:42.122986"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:42.122986"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:42.124988"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:42.124988"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:20:42.126990"], ["score", 10], ["updated_at", "2015-02-07 23:20:42.126990"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:42.132995"], ["password_digest", "$2a$04$IBwK9I0duwZE7V7gSIFNKO6rINuOVLHTwhyihbw9eAzof77KA4l1i"], ["updated_at", "2015-02-07 23:20:42.132995"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:42.139001"], ["password_digest", "$2a$04$81E/fVU3y0brSupMW7zZCuEYdRnMPLd4s/dcXSB9EmgR1VFv6Zkjy"], ["updated_at", "2015-02-07 23:20:42.139001"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:20:42.145007"], ["password_digest", "$2a$04$P4ebJjgqEtRNA9VSzjz9jO8XxiitZzr0WGaGwHVuQEO0KL51RmZta"], ["updated_at", "2015-02-07 23:20:42.145007"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:20:42.147009"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:20:42.147009"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:20:42.148010"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:20:42.148010"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:20:42.149010"], ["score", 10], ["updated_at", "2015-02-07 23:20:42.149010"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:11.679047"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:11.679047"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:11.685052"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:21:11.685052"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:11.688055"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:21:11.688055"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 65ms (Views: 55.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:11.775138"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:21:11.775138"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 16ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:11.798160"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:11.798160"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:11.800162"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:21:11.800162"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:11.802163"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:21:11.802163"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:11.826186"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:11.826186"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:11.828188"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:21:11.828188"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:11.829189"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:21:11.829189"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:11.839199"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:11.839199"], ["year", 1897]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:11.841201"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:21:11.841201"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:11.842202"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:21:11.842202"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (23.0ms)
Completed 200 OK in 25ms (Views: 24.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:11.877235"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:11.877235"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:11.879237"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:11.879237"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:11.881239"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:11.881239"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:11.886244"], ["password_digest", "$2a$04$XU6K5ye/Y/fHBLcAY6.z2udngrUS30ivqLCHYR.ZWawfyCcSVx/lu"], ["updated_at", "2015-02-07 23:21:11.886244"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 17.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:21:11.951306"], ["score", 15], ["updated_at", "2015-02-07 23:21:11.951306"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:21:11.953308"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:11.975328"], ["password_digest", "$2a$04$87GKXl/A0rnvzA82U9Q1Yuk/clE2LU9HRdcyDNBhbeoIzWx7Zbnwy"], ["updated_at", "2015-02-07 23:21:11.975328"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (2.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:11.990343"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:11.990343"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:11.992345"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:11.992345"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:21:11 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (2.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:21:12 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:21:12.002354"], ["score", 15], ["updated_at", "2015-02-07 23:21:12.002354"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:21:12.003355"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:21:12 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:12.019370"], ["password_digest", "$2a$04$gdx47qe/WDK5HOm4nEXyHepmWZSUsfN0fCulJBA3Pf4I2TDtEm7QK"], ["updated_at", "2015-02-07 23:21:12.019370"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:21:12 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:21:12 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.035386"], ["password_digest", "$2a$04$3ey87aIFSU3ajAUZzKqIs.BzwkVhFeA9CM2z5bh6N2pMuyE8znGSC"], ["updated_at", "2015-02-07 23:21:12.035386"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:21:12 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.048398"], ["password_digest", "$2a$04$tskXKAd/7OxprwNc/Hle7ePp3BEChOAPY6Ej7b2wjf3gj7XOX4ZGW"], ["updated_at", "2015-02-07 23:21:12.048398"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:21:12 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:21:12 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:21:12 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (2.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.069418"], ["password_digest", "$2a$04$Izl7/fZLR9zFCGllz5BmJO72IeRrt7mZcz6jXnyiZ0PbLhFdvq6r2"], ["updated_at", "2015-02-07 23:21:12.069418"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:21:12 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:21:12 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:21:12 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.083431"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:12.083431"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.106454"], ["password_digest", "$2a$04$KdQ4XTPDa03fIflOQqpPXOoSrO2b4aWMymD1NpkhxQrvfJWewCRJC"], ["updated_at", "2015-02-07 23:21:12.106454"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.113460"], ["password_digest", "$2a$04$B3gAxbV4D38kKf7ARtlmEO1FjNe8ktUtEzsoHZYe2m19ncb6Rkcvi"], ["updated_at", "2015-02-07 23:21:12.113460"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:21:12.115462"], ["score", 10], ["updated_at", "2015-02-07 23:21:12.115462"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:21:12.116463"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:21:12.117464"], ["score", 20], ["updated_at", "2015-02-07 23:21:12.117464"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.123470"], ["password_digest", "$2a$04$yVfr.65M5/AH3Xs5KJf50On57Mll5rQYIO.mwcATFkSGAkxWNNee2"], ["updated_at", "2015-02-07 23:21:12.123470"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.131477"], ["password_digest", "$2a$04$p1dg1MXyRi1.59J1JjpeL.uKoylAoN4BjMMTMpAsow2LLl3ZajgOq"], ["updated_at", "2015-02-07 23:21:12.131477"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:12.137483"], ["password_digest", "$2a$04$DsGMEKI0aiVHSipQLuRv9OYt.YB7bYscfsUxNXFNwVgAFOEA6SnOu"], ["updated_at", "2015-02-07 23:21:12.137483"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.139485"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:12.139485"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:12.140486"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:12.140486"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:21:12.142488"], ["score", 10], ["updated_at", "2015-02-07 23:21:12.142488"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:12.148493"], ["password_digest", "$2a$04$x7ycsAfPenoyU8/cY5xMA.lJLsYupEnDAfwVnnu43mabj5yuqlQ/O"], ["updated_at", "2015-02-07 23:21:12.148493"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.150495"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:12.150495"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:12.151496"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:12.151496"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:21:12.152497"], ["score", 10], ["updated_at", "2015-02-07 23:21:12.152497"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:12.153498"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:12.153498"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 23:21:12.154499"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:12.154499"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 23:21:12.155500"], ["score", 20], ["updated_at", "2015-02-07 23:21:12.155500"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.156501"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:12.156501"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 23:21:12.157502"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:12.157502"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 23:21:12.158503"], ["score", 15], ["updated_at", "2015-02-07 23:21:12.158503"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:12.159504"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:12.159504"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 23:21:12.160505"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:12.160505"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 23:21:12.161506"], ["score", 7], ["updated_at", "2015-02-07 23:21:12.161506"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.161506"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:12.161506"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 23:21:12.162507"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:12.162507"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 23:21:12.163508"], ["score", 9], ["updated_at", "2015-02-07 23:21:12.163508"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:12.164509"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:12.164509"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 23:21:12.170515"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:12.170515"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 23:21:12.171515"], ["score", 25], ["updated_at", "2015-02-07 23:21:12.171515"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.177521"], ["password_digest", "$2a$04$CcJcB14NJ2lIbv8ZwEWaFuyPPmegU7ky1nU3/D4Kb7UJ8l9cgUAO."], ["updated_at", "2015-02-07 23:21:12.177521"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.183527"], ["password_digest", "$2a$04$dwb2vJYOFuNjqkcU0PCUouBDUZaVraR3lW3Lx.V/fYbilyxMyOS12"], ["updated_at", "2015-02-07 23:21:12.183527"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:12.188532"], ["password_digest", "$2a$04$.Ix7FwzUAW9TlobK/8/WEOTsu4bgSr4Cx4WcJZKdewjZohq0BIz/i"], ["updated_at", "2015-02-07 23:21:12.188532"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.190534"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:12.190534"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:12.191534"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:12.191534"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:21:12.192535"], ["score", 10], ["updated_at", "2015-02-07 23:21:12.192535"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:12.198541"], ["password_digest", "$2a$04$AHFNkscvCFYBFWf5wCvbgeJS1Qx02/wZXFTO0fWBc3tyN5B9jyt46"], ["updated_at", "2015-02-07 23:21:12.198541"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:12.204547"], ["password_digest", "$2a$04$LjNUY6uWnEZ27VvjrHMTL.X/Lx3cZbUzhp6ozvY.qlf5GQSajy/n2"], ["updated_at", "2015-02-07 23:21:12.204547"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:12.210553"], ["password_digest", "$2a$04$ARDXMVuGc5v8gXJYmqhhM.7CB2Fbf.ChqDU0PRUFf9PLwh/7oOOTC"], ["updated_at", "2015-02-07 23:21:12.210553"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:12.212554"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:12.212554"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:12.213555"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:12.213555"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:21:12.214556"], ["score", 10], ["updated_at", "2015-02-07 23:21:12.214556"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:54.741274"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:54.741274"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:54.748281"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:21:54.748281"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:54.751283"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:21:54.751283"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (22.0ms)
Completed 200 OK in 64ms (Views: 54.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:54.837366"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:21:54.837366"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 15ms (Views: 13.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:54.859386"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:54.859386"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:54.861389"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:21:54.861389"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:54.862389"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:21:54.862389"], ["year", 1899]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:54.885411"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:54.885411"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:54.887413"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:21:54.887413"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:54.888414"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:21:54.888414"], ["year", 1899]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:54.898465"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:54.898465"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:54.899553"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:21:54.899553"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:54.901570"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:21:54.901570"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (23.0ms)
Completed 200 OK in 25ms (Views: 24.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:54.936693"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:54.936693"], ["year", 1900]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:54.938695"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:54.938695"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:54.940697"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:54.940697"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:54.944701"], ["password_digest", "$2a$04$TeCVWqUu9AfLrbvNSnOBiu0sUJ5Q7GkrrJwtR.kXmsSyremCzMO4G"], ["updated_at", "2015-02-07 23:21:54.944701"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 17.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:21:54 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (7.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:21:55.010764"], ["score", 15], ["updated_at", "2015-02-07 23:21:55.010764"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:21:55.012766"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.033786"], ["password_digest", "$2a$04$afVs7HbPorgor6e8X2K0PuS5bWi5OTzon6tWF4YT.nN7s9np0emsG"], ["updated_at", "2015-02-07 23:21:55.033786"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.049801"], ["name", "Koff"], ["updated_at", "2015-02-07 23:21:55.049801"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:55.050802"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:55.050802"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:21:55.060812"], ["score", 15], ["updated_at", "2015-02-07 23:21:55.060812"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:21:55.061812"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.113862"], ["password_digest", "$2a$04$xrecBfdxw0enL9LsYezNzOYVgKVCzp4Vm8BRQe3CMXhr7NcP2LTgm"], ["updated_at", "2015-02-07 23:21:55.113862"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (7.0ms)
Completed 200 OK in 9ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.133882"], ["password_digest", "$2a$04$9L0UfiNZNK9jlrPnvGNqZOJxE/2Qgl3CUAHQQMtY0bfcye2NB/1hy"], ["updated_at", "2015-02-07 23:21:55.133882"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 6ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.146894"], ["password_digest", "$2a$04$zaRoSCx1ISHMJw6AExxRFuLoOE0LQOejzZcbxARxCTsknEPB0lciK"], ["updated_at", "2015-02-07 23:21:55.146894"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.168915"], ["password_digest", "$2a$04$SKidC3XFj3KW9Y7tgB2H.OdYnTrE64n0DLilynH/2oZMkeU2mrBSC"], ["updated_at", "2015-02-07 23:21:55.168915"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:21:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.182928"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:55.182928"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.203948"], ["password_digest", "$2a$04$7QPID3KL6PcZ1ujkI5telO.u5g9e4.4Ko8oq0Ozu58n9xWPCobOFC"], ["updated_at", "2015-02-07 23:21:55.203948"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.210955"], ["password_digest", "$2a$04$SIgTIrfPBkpaRG7Y.HEB0.XvPTwcBjjLVMvZyH80IL4tXHIGvzL92"], ["updated_at", "2015-02-07 23:21:55.210955"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.212957"], ["score", 10], ["updated_at", "2015-02-07 23:21:55.212957"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:21:55.214959"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.214959"], ["score", 20], ["updated_at", "2015-02-07 23:21:55.214959"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 23:21:55.215960"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.221965"], ["password_digest", "$2a$04$fOyS5mCSKmv3m6aLh33LxenYB.LVqEVmwMtBZCixFvxUVUUh4b6dS"], ["updated_at", "2015-02-07 23:21:55.221965"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.229973"], ["password_digest", "$2a$04$XRCD69YIXWflWWIGjLRGu.WQz0cfH2hIRstqAAWKJ7E1j4oWux1qG"], ["updated_at", "2015-02-07 23:21:55.229973"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.235978"], ["password_digest", "$2a$04$exmzXoMx6Wy1MHleG7WhMOMl2ez65UDIfxlsw2/zaSYjJY.9LyTmS"], ["updated_at", "2015-02-07 23:21:55.235978"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.237980"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:55.237980"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:55.238982"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:55.238982"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:21:55.240983"], ["score", 10], ["updated_at", "2015-02-07 23:21:55.240983"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.251994"], ["password_digest", "$2a$04$jq4CrTK/giPZ8Ogm.V3bpeh4Ghpy.iPn0WOKmSFiE9z7g9IqgaGrm"], ["updated_at", "2015-02-07 23:21:55.251994"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.253996"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:55.253996"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:55.255997"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:55.255997"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:21:55.256999"], ["score", 10], ["updated_at", "2015-02-07 23:21:55.256999"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.257999"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:55.257999"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 23:21:55.257999"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:55.257999"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 23:21:55.259001"], ["score", 20], ["updated_at", "2015-02-07 23:21:55.259001"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.260001"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:55.260001"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 23:21:55.261002"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:55.261002"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 23:21:55.262003"], ["score", 15], ["updated_at", "2015-02-07 23:21:55.262003"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.263004"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:55.263004"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 23:21:55.263004"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:55.263004"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 23:21:55.264005"], ["score", 7], ["updated_at", "2015-02-07 23:21:55.264005"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.265006"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:55.265006"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 23:21:55.266007"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:55.266007"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 23:21:55.267008"], ["score", 9], ["updated_at", "2015-02-07 23:21:55.267008"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.268009"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:55.268009"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 23:21:55.268009"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:55.268009"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 23:21:55.269010"], ["score", 25], ["updated_at", "2015-02-07 23:21:55.269010"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.276017"], ["password_digest", "$2a$04$wAbryKcEotfVNL/q56nyJuHaj5GA1dmVOQhR.rljyqagXtteF8bIS"], ["updated_at", "2015-02-07 23:21:55.276017"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.282022"], ["password_digest", "$2a$04$azI9Za91s7G4Xwf8ObrSgOECUbomcFh1z.IZCJaNgMPqbbnIF.CGq"], ["updated_at", "2015-02-07 23:21:55.282022"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.288028"], ["password_digest", "$2a$04$qjuqdAhyxJOE6CTrXofHSeigwgNoBg1lMbVOf07dqPgYNjEOG4hRq"], ["updated_at", "2015-02-07 23:21:55.288028"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.290030"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:55.290030"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:55.291031"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:55.291031"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:21:55.292032"], ["score", 10], ["updated_at", "2015-02-07 23:21:55.292032"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.299038"], ["password_digest", "$2a$04$6dlNqWFoIV7IOb/qT0RU7ucDppUtu8JXtj3fJAbDOHiLlmFDWP3NO"], ["updated_at", "2015-02-07 23:21:55.299038"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.304043"], ["password_digest", "$2a$04$zNaH/Y3Nv8MW1PkW6nO9geEA4.18/uBSE7l8Uj2PGmpvbddpqombK"], ["updated_at", "2015-02-07 23:21:55.304043"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:21:55.309048"], ["password_digest", "$2a$04$87GnLjB2DkmhNjZnoT.O3OgADb6lpE7Z.FA8.pk0E4nklUTr2N5iS"], ["updated_at", "2015-02-07 23:21:55.309048"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:21:55.312051"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:21:55.312051"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:21:55.313052"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:21:55.313052"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:21:55.314053"], ["score", 10], ["updated_at", "2015-02-07 23:21:55.314053"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.187910"], ["name", "Koff"], ["updated_at", "2015-02-07 23:22:40.187910"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.193916"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:22:40.193916"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.196918"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:22:40.196918"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (16.0ms)
  Rendered beers/new.html.erb within layouts/application (22.0ms)
Completed 200 OK in 66ms (Views: 55.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:22:40.284002"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:22:40.284002"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 15ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.307023"], ["name", "Koff"], ["updated_at", "2015-02-07 23:22:40.307023"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.309025"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:22:40.309025"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.310026"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:22:40.310026"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.334049"], ["name", "Koff"], ["updated_at", "2015-02-07 23:22:40.334049"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.335050"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:22:40.335050"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.337052"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:22:40.337052"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 1.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.347062"], ["name", "Koff"], ["updated_at", "2015-02-07 23:22:40.347062"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.348063"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:22:40.348063"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.350064"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:22:40.350064"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (24.1ms)
Completed 200 OK in 25ms (Views: 25.1ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.385288"], ["name", "Koff"], ["updated_at", "2015-02-07 23:22:40.385288"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:22:40.387362"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.387362"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:22:40.388363"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.388363"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.393368"], ["password_digest", "$2a$04$vXE3/2mWj0Ew49PZAiVAye3CpFvedFTPVMTiZpjx10LtXGz2I0fS."], ["updated_at", "2015-02-07 23:22:40.393368"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 18.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:22:40.458430"], ["score", 15], ["updated_at", "2015-02-07 23:22:40.458430"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:22:40.460432"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (1.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.481452"], ["password_digest", "$2a$04$s3cDWR5nZEfbxp/0X4ch3OrGpyH1fOaNfAOgP68BUBIuh/ESWtM4q"], ["updated_at", "2015-02-07 23:22:40.481452"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.497467"], ["name", "Koff"], ["updated_at", "2015-02-07 23:22:40.497467"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:22:40.499470"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.499470"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:22:40.509479"], ["score", 15], ["updated_at", "2015-02-07 23:22:40.509479"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:22:40.510480"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 5.0ms | ActiveRecord: 2.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.559527"], ["password_digest", "$2a$04$ZCVc2zAp5KZJlJPur5YX9.HX89dCePctkZ.aJuU0ASZfFatRC9E1i"], ["updated_at", "2015-02-07 23:22:40.559527"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (11.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.577544"], ["password_digest", "$2a$04$kbAdlcB5C3FtRLrm2BdkjuZPO9ErAj21UNw.aguCKmnghiEHWImta"], ["updated_at", "2015-02-07 23:22:40.577544"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 16ms (ActiveRecord: 11.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 5ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.602568"], ["password_digest", "$2a$04$vweovmaJ5b3AaMUlihaD7e8KdrqEwdICh.ENhExYKjgYOKqWBbWTu"], ["updated_at", "2015-02-07 23:22:40.602568"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.623587"], ["password_digest", "$2a$04$gGEDUHQUi6eiXWn2f.obm.5w6jU9yQjS0CpakhyBPUdokXmwc/RUi"], ["updated_at", "2015-02-07 23:22:40.623587"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:22:40 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.639603"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.639603"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.667630"], ["password_digest", "$2a$04$e1bnjaJGoWtsEN0YfW4dtuYSIVLBZGnZf..SDmy40cFeswSV1ylRu"], ["updated_at", "2015-02-07 23:22:40.667630"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.675637"], ["password_digest", "$2a$04$a9s3z..N12SOIffqN/Ukg.vPR5d4ui2z5o5dR/zwSzIojaNg7zhHG"], ["updated_at", "2015-02-07 23:22:40.675637"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.677639"], ["score", 10], ["updated_at", "2015-02-07 23:22:40.677639"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:22:40.679641"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.680642"], ["score", 20], ["updated_at", "2015-02-07 23:22:40.680642"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 23:22:40.681643"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.687648"], ["password_digest", "$2a$04$s8ZP37B6k1nEhF5Ld.zSPeJbRlrkGdQYeZJah3DRVqG7e0B/RNMtO"], ["updated_at", "2015-02-07 23:22:40.687648"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.694656"], ["password_digest", "$2a$04$iLT6vo1eutobI/eFhce2nOY28tvwwu0.HZBBDuVeKeL4M5Vh5NSUW"], ["updated_at", "2015-02-07 23:22:40.694656"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.700661"], ["password_digest", "$2a$04$Y0.iCtS73saxJZknHTmZJOTLcsHJEqExV5hTSY/7GQo5uSWM6RBQ."], ["updated_at", "2015-02-07 23:22:40.700661"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.702663"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:22:40.702663"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:22:40.703663"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.703663"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:22:40.704665"], ["score", 10], ["updated_at", "2015-02-07 23:22:40.704665"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.711672"], ["password_digest", "$2a$04$WHqfRwSqKUzstu7mod92Bu.L5qJKhzyM9COdtOMwSy.tw8YR112vC"], ["updated_at", "2015-02-07 23:22:40.711672"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.718678"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:22:40.718678"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:22:40.719679"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.719679"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:22:40.720680"], ["score", 10], ["updated_at", "2015-02-07 23:22:40.720680"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.721681"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:22:40.721681"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 23:22:40.722682"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.722682"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 23:22:40.722682"], ["score", 20], ["updated_at", "2015-02-07 23:22:40.722682"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.723683"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:22:40.723683"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 23:22:40.724684"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.724684"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 23:22:40.725685"], ["score", 15], ["updated_at", "2015-02-07 23:22:40.725685"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.726686"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:22:40.726686"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 23:22:40.727687"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.727687"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 23:22:40.728688"], ["score", 7], ["updated_at", "2015-02-07 23:22:40.728688"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.729689"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:22:40.729689"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 23:22:40.729689"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.729689"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 23:22:40.730689"], ["score", 9], ["updated_at", "2015-02-07 23:22:40.730689"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.731691"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:22:40.731691"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 23:22:40.732691"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.732691"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 23:22:40.733692"], ["score", 25], ["updated_at", "2015-02-07 23:22:40.733692"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.740699"], ["password_digest", "$2a$04$lLKDpxyPQ3g6ulO56.7QVOeI2fKWPYbBqabPSDkgLnxw7qBI.xAzy"], ["updated_at", "2015-02-07 23:22:40.740699"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.747706"], ["password_digest", "$2a$04$rtmxQHv7c8ucYvcuaiHMvuxYqjmHXDJnB2R8HL9DtM4O6ON/4ROXu"], ["updated_at", "2015-02-07 23:22:40.747706"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.752710"], ["password_digest", "$2a$04$AnF6bEt44Zu5zHzyL/PEGeI.CQmvpc/LpDNZxLR0wvVv0lpUf.8Ry"], ["updated_at", "2015-02-07 23:22:40.752710"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.754713"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:22:40.754713"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:22:40.755713"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.755713"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:22:40.756715"], ["score", 10], ["updated_at", "2015-02-07 23:22:40.756715"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.763721"], ["password_digest", "$2a$04$8RqHbw1hcNMhrPeDa823IuH7ITdIsH2TyHgyjOUa2M2ldh6Pmyiqm"], ["updated_at", "2015-02-07 23:22:40.763721"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.768726"], ["password_digest", "$2a$04$6.xLyqKEYMF7VNLZI6xzWuZlsxD5S6zHbs3uVJLcPkzl4jMYnPSHy"], ["updated_at", "2015-02-07 23:22:40.768726"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:22:40.774732"], ["password_digest", "$2a$04$DouoEgCxkzWaEhyMVso7U.4lsySsNM.z/CLHRcrbZa9ZokXtvglZa"], ["updated_at", "2015-02-07 23:22:40.774732"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:22:40.776734"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:22:40.776734"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:22:40.777734"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:22:40.777734"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:22:40.779736"], ["score", 10], ["updated_at", "2015-02-07 23:22:40.779736"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (17.8ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:34.864046"], ["name", "Koff"], ["updated_at", "2015-02-07 23:28:34.864046"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:34.881847"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:28:34.881847"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:34.884849"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:28:34.884849"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:28:34 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (16.0ms)
  Rendered beers/new.html.erb within layouts/application (22.0ms)
Completed 200 OK in 66ms (Views: 55.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:28:34 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:28:34.971932"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:28:34.971932"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:28:34 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 15ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:34.993953"], ["name", "Koff"], ["updated_at", "2015-02-07 23:28:34.993953"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:34.995955"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:28:34.995955"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:34.996956"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:28:34.996956"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:28:34 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.020979"], ["name", "Koff"], ["updated_at", "2015-02-07 23:28:35.020979"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.022981"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:28:35.022981"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.023982"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:28:35.023982"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.034992"], ["name", "Koff"], ["updated_at", "2015-02-07 23:28:35.034992"], ["year", 1897]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.036994"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:28:35.036994"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.037995"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:28:35.037995"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (23.0ms)
Completed 200 OK in 25ms (Views: 24.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.074030"], ["name", "Koff"], ["updated_at", "2015-02-07 23:28:35.074030"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:28:35.076031"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.076031"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:28:35.077032"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.077032"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.082037"], ["password_digest", "$2a$04$R6kc5YDrGBhWQLsuikrtLuJ96pfvwLM8HPshzhMu4Sf/6hLazv4E2"], ["updated_at", "2015-02-07 23:28:35.082037"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 9ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 18.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:28:35.148100"], ["score", 15], ["updated_at", "2015-02-07 23:28:35.148100"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:28:35.151103"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.173124"], ["password_digest", "$2a$04$vCbsl5gOye7fR4NAJVkWY.TOAP1vYdqO4Q3bybiYECubESiQJM3U6"], ["updated_at", "2015-02-07 23:28:35.173124"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.189139"], ["name", "Koff"], ["updated_at", "2015-02-07 23:28:35.189139"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:28:35.191141"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.191141"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:28:35.201151"], ["score", 15], ["updated_at", "2015-02-07 23:28:35.201151"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:28:35.202152"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.229177"], ["password_digest", "$2a$04$2hd8aXNynipis/0wrBpWyemnbcXB92yB73TC3F2U647757tt6DOii"], ["updated_at", "2015-02-07 23:28:35.229177"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.244191"], ["name", "Koff"], ["updated_at", "2015-02-07 23:28:35.244191"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:28:35.247194"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.247194"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (2.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:28:35.257204"], ["score", 15], ["updated_at", "2015-02-07 23:28:35.257204"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:28:35.258205"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[36mCACHE (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 1.0ms)
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "ratings" WHERE "ratings"."id" = 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 1.0ms)
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.311256"], ["password_digest", "$2a$04$n.Lof1kDAmEuvalyWINSo.ZfCz4IECj.Y3S7bmX7Wk9UEd5T0wM8m"], ["updated_at", "2015-02-07 23:28:35.311256"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (7.0ms)
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.336280"], ["password_digest", "$2a$04$.hAWOfeS.s4P2hm3h81R4OLy0c1gtLkbsbwqMAzlYyxmR6A9N2cvO"], ["updated_at", "2015-02-07 23:28:35.336280"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (1.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (47.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.395335"], ["password_digest", "$2a$04$Ja5j5Tunhqwk4oqMGSBAG.1sojSVgiEWXZbF2m4j2kaSukM8.e7Nm"], ["updated_at", "2015-02-07 23:28:35.395335"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.421360"], ["password_digest", "$2a$04$9m88xsBfZnARtibMyu0Lh.pK9WbkYw8HzfthIknRg1eQ5tHs0F5m."], ["updated_at", "2015-02-07 23:28:35.421360"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:28:35 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.435374"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.435374"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.457395"], ["password_digest", "$2a$04$LfpHxZ68hi7mcOU5BCvKWOqoIhOV7PJlwWzKSBUWJsjas/S.m0xKu"], ["updated_at", "2015-02-07 23:28:35.457395"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.465402"], ["password_digest", "$2a$04$1sExfVB4/qhgyOSVpPnLM.tFOr0lvXKb/aV7iBokUlG9oGNhzL9Ge"], ["updated_at", "2015-02-07 23:28:35.465402"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.466403"], ["score", 10], ["updated_at", "2015-02-07 23:28:35.466403"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:28:35.468405"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.469406"], ["score", 20], ["updated_at", "2015-02-07 23:28:35.469406"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.475412"], ["password_digest", "$2a$04$r.s3/nDBGStPp/QOV0i6JuZYJIA3SyWr8Dl1qo5ghMqh043QjFQ9m"], ["updated_at", "2015-02-07 23:28:35.475412"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.482418"], ["password_digest", "$2a$04$be9.LszEHtBksHLcJxUc6uQeLMm6x2GcbUzBDRRTe0w/q/nkxaCt2"], ["updated_at", "2015-02-07 23:28:35.482418"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.489425"], ["password_digest", "$2a$04$kquzlENCATEbgIfBqAtlW.iSPrjAgBHQkq5t3itaBqCe6csdznp3i"], ["updated_at", "2015-02-07 23:28:35.489425"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.490426"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:28:35.490426"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:28:35.492428"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.492428"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:28:35.493429"], ["score", 10], ["updated_at", "2015-02-07 23:28:35.493429"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.499434"], ["password_digest", "$2a$04$OZ3nGZ7rucfrsvrB8QhPQOCQ1Zfy1WKOjgBwP9MwhD3ltdf57ETNG"], ["updated_at", "2015-02-07 23:28:35.499434"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.501437"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:28:35.501437"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:28:35.503438"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.503438"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:28:35.504439"], ["score", 10], ["updated_at", "2015-02-07 23:28:35.504439"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.505440"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:28:35.505440"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 23:28:35.506441"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.506441"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 23:28:35.507442"], ["score", 20], ["updated_at", "2015-02-07 23:28:35.507442"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.508443"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:28:35.508443"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 23:28:35.508443"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.508443"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 23:28:35.509444"], ["score", 15], ["updated_at", "2015-02-07 23:28:35.509444"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.510445"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:28:35.510445"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 23:28:35.511446"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.511446"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 23:28:35.512447"], ["score", 7], ["updated_at", "2015-02-07 23:28:35.512447"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.513448"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:28:35.513448"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 23:28:35.514449"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.514449"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 23:28:35.515450"], ["score", 9], ["updated_at", "2015-02-07 23:28:35.515450"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.516451"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:28:35.516451"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 23:28:35.516451"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.516451"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 23:28:35.517451"], ["score", 25], ["updated_at", "2015-02-07 23:28:35.517451"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.524458"], ["password_digest", "$2a$04$bMvgr4.kLSowrdLPlUV39ugu4mRB5gSF0r0KAMazWQlb7QeMwRl/W"], ["updated_at", "2015-02-07 23:28:35.524458"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.529463"], ["password_digest", "$2a$04$Qk5H3nWSvD2fe6.pVSaXVu0fxFzJbEXB5nuBiwgHTEDwQ3Q5K5i4W"], ["updated_at", "2015-02-07 23:28:35.529463"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.535469"], ["password_digest", "$2a$04$gTyUhHkU7IOEqlxgr1urg.2gg8wSaoddtsebfwiinFhUUEFSgqu2i"], ["updated_at", "2015-02-07 23:28:35.535469"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.539473"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:28:35.539473"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:28:35.541475"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.541475"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:28:35.542476"], ["score", 10], ["updated_at", "2015-02-07 23:28:35.542476"], ["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.548481"], ["password_digest", "$2a$04$L1yivNvb0BVrkuZSwhUGVOhXp9VkYlp9oiJpNfRiURMIzlajC8I.m"], ["updated_at", "2015-02-07 23:28:35.548481"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.554487"], ["password_digest", "$2a$04$CKInEwhhy9Aq94u46J76s..SCHndVp7BKA2TXHxwM9f.pdJIqZP1m"], ["updated_at", "2015-02-07 23:28:35.554487"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:28:35.559492"], ["password_digest", "$2a$04$xDPajUQKCZlCJufXkDx.oOaL9qJR58S8Uq28jz3sAsS.7jf23x4Bq"], ["updated_at", "2015-02-07 23:28:35.559492"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:28:35.561494"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:28:35.561494"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:28:35.562495"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:28:35.562495"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:28:35.563495"], ["score", 10], ["updated_at", "2015-02-07 23:28:35.563495"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.247484"], ["name", "Koff"], ["updated_at", "2015-02-07 23:29:55.247484"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.254491"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:29:55.254491"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.257494"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:29:55.257494"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (18.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 71ms (Views: 61.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:29:55.355587"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:29:55.355587"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (16.0ms)
Completed 200 OK in 19ms (Views: 18.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (5.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.388619"], ["name", "Koff"], ["updated_at", "2015-02-07 23:29:55.388619"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.390621"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:29:55.390621"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.394624"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:29:55.394624"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.420649"], ["name", "Koff"], ["updated_at", "2015-02-07 23:29:55.420649"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.421650"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:29:55.421650"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.423652"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:29:55.423652"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 1.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.435663"], ["name", "Koff"], ["updated_at", "2015-02-07 23:29:55.435663"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.437666"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:29:55.437666"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.438666"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:29:55.438666"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (28.0ms)
Completed 200 OK in 31ms (Views: 30.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.482708"], ["name", "Koff"], ["updated_at", "2015-02-07 23:29:55.482708"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:29:55.484710"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.484710"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:29:55.486712"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.486712"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.491717"], ["password_digest", "$2a$04$GuQOz4pbOcQ9LipO3.HUBup/blxnAEs0NPnVovbN70Vlgu.M4EhAu"], ["updated_at", "2015-02-07 23:29:55.491717"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 19.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:29:55.560783"], ["score", 15], ["updated_at", "2015-02-07 23:29:55.560783"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:29:55.562784"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.593814"], ["password_digest", "$2a$04$VzAJ4lc9HYHC7GQTJsU3BOOAvIzoWM/l9PeuDeXDB/qcQbRLsw5r."], ["updated_at", "2015-02-07 23:29:55.593814"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 2.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.613833"], ["name", "Koff"], ["updated_at", "2015-02-07 23:29:55.613833"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:29:55.615835"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.615835"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:29:55.625844"], ["score", 15], ["updated_at", "2015-02-07 23:29:55.625844"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:29:55.626845"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 10ms (Views: 10.0ms | ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 11ms (Views: 9.0ms | ActiveRecord: 1.0ms)
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.662880"], ["password_digest", "$2a$04$1gk4NPF1ddNXJs/ovAcf.u.nIcPqdWhRdH3iZtgqYrpQKeuBqlQ6W"], ["updated_at", "2015-02-07 23:29:55.662880"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.681898"], ["name", "Koff"], ["updated_at", "2015-02-07 23:29:55.681898"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:29:55.684901"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.684901"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (2.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:29:55.696912"], ["score", 15], ["updated_at", "2015-02-07 23:29:55.696912"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:29:55.698914"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.718933"], ["password_digest", "$2a$04$7AlerwOd9ixyTIxwiQGrue6toqUqKB3DEs8syII7nLLX9U2q5s/yq"], ["updated_at", "2015-02-07 23:29:55.718933"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (7.0ms)
Completed 200 OK in 9ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.738953"], ["password_digest", "$2a$04$.CdXPVbfcWtUA7f.ub6qEOyQuKele7JolWQn/vo0tkc6TMOZ.FF8C"], ["updated_at", "2015-02-07 23:29:55.738953"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 7ms (ActiveRecord: 3.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.754967"], ["password_digest", "$2a$04$ugE8lEFddhxcYEyOIpIziuKFllnO91EJTnAjCVw47cJKUQ3UYDRf6"], ["updated_at", "2015-02-07 23:29:55.754967"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.779991"], ["password_digest", "$2a$04$gBuwTiAda5PR0eDjVcI0/.VGKjCz65DWZiHVAm41s05XPqUgIWdU."], ["updated_at", "2015-02-07 23:29:55.779991"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:29:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.801012"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.801012"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.827036"], ["password_digest", "$2a$04$rSHCw7coa6SvvmfgE0yWxenj4c7H6Z5ktkQtwZzXVLGMJBjSd1W7O"], ["updated_at", "2015-02-07 23:29:55.827036"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.834043"], ["password_digest", "$2a$04$vNTvix4T03WlilPo92rheOvHzn3R39w90TxbMdUmqK8cERHJqwf1u"], ["updated_at", "2015-02-07 23:29:55.834043"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.836045"], ["score", 10], ["updated_at", "2015-02-07 23:29:55.836045"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:29:55.838047"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.839048"], ["score", 20], ["updated_at", "2015-02-07 23:29:55.839048"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.846054"], ["password_digest", "$2a$04$QGHLRu0EAM7Gg8w5NlIISe.QR00waLIssBcxQvjiuw3yiAFa5PL6u"], ["updated_at", "2015-02-07 23:29:55.846054"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.853061"], ["password_digest", "$2a$04$Fz2zPyKvEP2HE/vp8ea9G.CgHStJag2WeahvrYA7/IACMrEc5wcW6"], ["updated_at", "2015-02-07 23:29:55.853061"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (4.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.863070"], ["password_digest", "$2a$04$e6FjJo78RTq4oSIV9IU/Re7a7pe3Ufhiu.F0RNlqXJ2sEuX2kJ3rC"], ["updated_at", "2015-02-07 23:29:55.863070"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.865072"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:29:55.865072"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:29:55.866074"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.866074"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:29:55.867074"], ["score", 10], ["updated_at", "2015-02-07 23:29:55.867074"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.874081"], ["password_digest", "$2a$04$QeKYFR/40ZKu.YMKwz.ssuVZFmQIvv5vxOE816o21gd0v2dmgaDu2"], ["updated_at", "2015-02-07 23:29:55.874081"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.877084"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:29:55.877084"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:29:55.878085"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.878085"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:29:55.879086"], ["score", 10], ["updated_at", "2015-02-07 23:29:55.879086"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.880087"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:29:55.880087"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 23:29:55.881088"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.881088"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 23:29:55.883089"], ["score", 20], ["updated_at", "2015-02-07 23:29:55.883089"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.884090"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:29:55.884090"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 23:29:55.884090"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.884090"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 23:29:55.885092"], ["score", 15], ["updated_at", "2015-02-07 23:29:55.885092"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.886092"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:29:55.886092"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 23:29:55.887093"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.887093"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 23:29:55.888094"], ["score", 7], ["updated_at", "2015-02-07 23:29:55.888094"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.889095"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:29:55.889095"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 23:29:55.891098"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.891098"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 23:29:55.892098"], ["score", 9], ["updated_at", "2015-02-07 23:29:55.892098"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.893099"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:29:55.893099"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 23:29:55.894100"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.894100"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 23:29:55.895101"], ["score", 25], ["updated_at", "2015-02-07 23:29:55.895101"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (12.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.912117"], ["password_digest", "$2a$04$JCuXgdi5ORAu.P9DjaYdUuhERwsUV4fMJPPXMHWfRElyjL164.tvC"], ["updated_at", "2015-02-07 23:29:55.912117"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.918123"], ["password_digest", "$2a$04$QDjA9k2zYyexWdverH0fm.S00M3ye3bitSb9nsjoTFs9wRQzDyqHO"], ["updated_at", "2015-02-07 23:29:55.918123"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.924128"], ["password_digest", "$2a$04$qUPou4h7yVMN02nLhmpjpOFuzZ3uxr2ED8bCm18nNOHymP3ite6jq"], ["updated_at", "2015-02-07 23:29:55.924128"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.926131"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:29:55.926131"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:29:55.928132"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.928132"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:29:55.929133"], ["score", 10], ["updated_at", "2015-02-07 23:29:55.929133"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.936140"], ["password_digest", "$2a$04$VmjB0T7wvTr8LzHDBDwgR.OcToxD3ipa7VDZkVUP.VL8cXiO.8mCy"], ["updated_at", "2015-02-07 23:29:55.936140"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.944148"], ["password_digest", "$2a$04$diqlIzto3ls3Dy1M8FMVH.fJS35pVyTEcW4/zRt0lueg6WmOIl3QK"], ["updated_at", "2015-02-07 23:29:55.944148"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:29:55.950153"], ["password_digest", "$2a$04$GdfeJOqqjoNVnQQixHEzZOT8TWDr7ZxL7PItyuZHuweBhC3LDyX8e"], ["updated_at", "2015-02-07 23:29:55.950153"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:29:55.952155"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:29:55.952155"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:29:55.954157"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:29:55.954157"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:29:55.955158"], ["score", 10], ["updated_at", "2015-02-07 23:29:55.955158"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (30.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:31:02.368574"], ["name", "Koff"], ["updated_at", "2015-02-07 23:31:02.368574"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:31:02.403607"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:31:02.403607"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:31:02.405609"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:31:02.405609"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 66ms (Views: 55.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:31:02.492692"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:31:02.492692"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 16ms (Views: 16.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:31:02.516715"], ["name", "Koff"], ["updated_at", "2015-02-07 23:31:02.516715"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:31:02.517716"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:31:02.517716"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:31:02.519718"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:31:02.519718"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:31:02.542740"], ["name", "Koff"], ["updated_at", "2015-02-07 23:31:02.542740"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:31:02.544742"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:31:02.544742"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:31:02.546743"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:31:02.546743"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:31:02.556753"], ["name", "Koff"], ["updated_at", "2015-02-07 23:31:02.556753"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:31:02.557754"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:31:02.557754"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:31:02.559756"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:31:02.559756"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (23.0ms)
Completed 200 OK in 26ms (Views: 24.0ms | ActiveRecord: 2.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:31:02.595790"], ["name", "Koff"], ["updated_at", "2015-02-07 23:31:02.595790"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:31:02.597792"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:31:02.597792"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:31:02.598793"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:31:02.598793"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:31:02.603798"], ["password_digest", "$2a$04$HHbtnD6sF5yISz7dp6m6.Os7DzCv79Pj4PIEpFcU5R0Tjlv.6iiA2"], ["updated_at", "2015-02-07 23:31:02.603798"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 20ms (Views: 19.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (8.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 12.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:31:02.670862"], ["score", 15], ["updated_at", "2015-02-07 23:31:02.670862"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:31:02.672863"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (1.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 2.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:31:02.693883"], ["password_digest", "$2a$04$6mpUI2VqB3B/A710OgU2Pusu.loiGDHzrq2t4due3XhbnRIySEIvK"], ["updated_at", "2015-02-07 23:31:02.693883"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:31:02.710900"], ["name", "Koff"], ["updated_at", "2015-02-07 23:31:02.710900"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:31:02.711901"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:31:02.711901"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:31:02.721910"], ["score", 15], ["updated_at", "2015-02-07 23:31:02.721910"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:31:02.723912"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:31:02.750938"], ["password_digest", "$2a$04$CaffZvtYqL9e.6ex9/k.A.VWQ1c7HDm3HiD6BB6woVWQtcrL3qgLC"], ["updated_at", "2015-02-07 23:31:02.750938"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:31:02.766953"], ["name", "Koff"], ["updated_at", "2015-02-07 23:31:02.766953"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:31:02.768955"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:31:02.768955"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:31:02.778964"], ["score", 15], ["updated_at", "2015-02-07 23:31:02.778964"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:31:02.780966"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:31:02 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (4.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:24.178147"], ["password_digest", "$2a$04$LBl84IcSy2L0YIa5DVDD4.5SbP84mv4XZ33xhTlcz5B3aHbcC5qJ6"], ["updated_at", "2015-02-07 23:32:24.178147"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:32:24 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (11.0ms)
  Rendered users/new.html.erb within layouts/application (15.0ms)
Completed 200 OK in 21ms (Views: 20.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:32:24 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (41.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.237203"], ["password_digest", "$2a$04$i5XQCT.nYn9vGOrEDPif0eBQUQgxLbH80BSaRvn2uoMR9MvEJm0o."], ["updated_at", "2015-02-07 23:32:24.237203"], ["username", "Brian"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/users/2
Completed 302 Found in 55ms (ActiveRecord: 41.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:32:24 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  Rendered users/show.html.erb within layouts/application (24.0ms)
Completed 200 OK in 30ms (Views: 26.0ms | ActiveRecord: 1.0ms)
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (31.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.336298"], ["password_digest", "$2a$04$vIZSFLYeUeAdbxJ6dCoyu.owgEZRLeq0HBC02T9XoCjSzwy4I75jq"], ["updated_at", "2015-02-07 23:32:24.336298"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:32:24 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:32:24 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:32:24 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (20.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 37ms (Views: 31.0ms | ActiveRecord: 2.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.457413"], ["password_digest", "$2a$04$QTaefgtuLG5ydxFnwlxwB.SZeyyOyTRqXKLk687ByGK7eOQ9.7MUa"], ["updated_at", "2015-02-07 23:32:24.457413"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:32:24 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:32:24 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/signin
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:32:24 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.512466"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:24.512466"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (18.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.630578"], ["password_digest", "$2a$04$DxBJtuwCNO/Hs1Mfb8nmOO4RrZ30RexEGDWZuP9gDX7KYfRVxnXJ2"], ["updated_at", "2015-02-07 23:32:24.630578"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.649596"], ["password_digest", "$2a$04$/bTXSuNKfmhK8Ztd4wQOuOob.TWn6ggLem6HHs5riLHCBew5ztr7O"], ["updated_at", "2015-02-07 23:32:24.649596"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:32:24.659606"], ["score", 10], ["updated_at", "2015-02-07 23:32:24.659606"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:32:24.664610"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:32:24.669615"], ["score", 20], ["updated_at", "2015-02-07 23:32:24.669615"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 23:32:24.674620"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.692637"], ["password_digest", "$2a$04$GKFXaOnLxaDBIs2FM1fJFeHJhkxHS.D18mPGyiFrDm.x5Bp2nY/VK"], ["updated_at", "2015-02-07 23:32:24.692637"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.708652"], ["password_digest", "$2a$04$2KssHnQcO3Iig.HuIOHZquHOl/ruX2srT83PK0ZG57O39xijNh1O2"], ["updated_at", "2015-02-07 23:32:24.708652"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:24.726669"], ["password_digest", "$2a$04$JNH8r89xNymbS2bcH5qnGu.0tj818/7iYgMniGMhWPOM1OEEdqDzG"], ["updated_at", "2015-02-07 23:32:24.726669"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.734677"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:24.734677"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:24.740683"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:24.740683"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:32:24.747689"], ["score", 10], ["updated_at", "2015-02-07 23:32:24.747689"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (1.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:24.770712"], ["password_digest", "$2a$04$u6YZi.hNb0Q0j/NHNn1pROSDJuckk.438.TkLIc8sUk3Z2RKlQroO"], ["updated_at", "2015-02-07 23:32:24.770712"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.777718"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:24.777718"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:24.783724"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:24.783724"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:32:24.790730"], ["score", 10], ["updated_at", "2015-02-07 23:32:24.790730"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:24.797737"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:24.797737"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 23:32:24.802742"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:24.802742"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 23:32:24.809749"], ["score", 20], ["updated_at", "2015-02-07 23:32:24.809749"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.816755"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:24.816755"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 23:32:24.821760"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:24.821760"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 23:32:24.832771"], ["score", 15], ["updated_at", "2015-02-07 23:32:24.832771"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:24.839778"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:24.839778"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 23:32:24.844782"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:24.844782"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 23:32:24.851789"], ["score", 7], ["updated_at", "2015-02-07 23:32:24.851789"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.858795"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:24.858795"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 23:32:24.863800"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:24.863800"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 23:32:24.870807"], ["score", 9], ["updated_at", "2015-02-07 23:32:24.870807"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:24.876813"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:24.876813"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 23:32:24.881817"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:24.881817"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 23:32:24.888824"], ["score", 25], ["updated_at", "2015-02-07 23:32:24.888824"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (20.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.912847"], ["password_digest", "$2a$04$hJ6vbWgpM8w5hc2UJVi8l.0x/4K0UhTGq4h4tXSSGz9i5HOyhhA7i"], ["updated_at", "2015-02-07 23:32:24.912847"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.946879"], ["password_digest", "$2a$04$gS6LgpBLbMxkDcUeyPc7WOcyINmjh5A9f7ankjy6aUxqluI/fowAC"], ["updated_at", "2015-02-07 23:32:24.946879"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:24.961894"], ["password_digest", "$2a$04$7wnNa/bIIgwN68pHct4uIejF8zxVgwTF.7NYmct7O6.yjzv.258V2"], ["updated_at", "2015-02-07 23:32:24.961894"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:24.969901"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:24.969901"], ["year", 1900]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:24.975907"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:24.975907"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:32:24.982914"], ["score", 10], ["updated_at", "2015-02-07 23:32:24.982914"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:25.003934"], ["password_digest", "$2a$04$Y9SNfh/RCycS/RDT/ossGusSMCIfkXyHWSxvcWhLWclcf95joaIWi"], ["updated_at", "2015-02-07 23:32:25.003934"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:25.017947"], ["password_digest", "$2a$04$G5/AKGdYKyi2NpmUDqn21ORAW4uM3BGEBRQXpU40lR./PY88Z6C32"], ["updated_at", "2015-02-07 23:32:25.017947"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:25.033962"], ["password_digest", "$2a$04$ZijAT9PL9vdMM07ZKS4Wve9j/GPPqwllgf6ZSNCr7FmkDht5yizrC"], ["updated_at", "2015-02-07 23:32:25.033962"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:25.041970"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:25.041970"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:25.047975"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:25.047975"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:32:25.054982"], ["score", 10], ["updated_at", "2015-02-07 23:32:25.054982"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:35.998289"], ["name", "Koff"], ["updated_at", "2015-02-07 23:32:35.998289"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.003294"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:32:36.003294"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.004296"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:32:36.004296"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 66ms (Views: 55.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:36.092379"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:32:36.092379"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (15.0ms)
Completed 200 OK in 17ms (Views: 17.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (21.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.116402"], ["name", "Koff"], ["updated_at", "2015-02-07 23:32:36.116402"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (32.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.139424"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:32:36.139424"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.172455"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:32:36.172455"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (11.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.196478"], ["name", "Koff"], ["updated_at", "2015-02-07 23:32:36.196478"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (29.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.207489"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:32:36.207489"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.238519"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:32:36.238519"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.248528"], ["name", "Koff"], ["updated_at", "2015-02-07 23:32:36.248528"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.250530"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:32:36.250530"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.251531"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:32:36.251531"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (23.0ms)
Completed 200 OK in 26ms (Views: 25.0ms | ActiveRecord: 0.0ms)
  [1m[36m (5.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.290568"], ["name", "Koff"], ["updated_at", "2015-02-07 23:32:36.290568"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:36.292570"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.292570"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:36.294572"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.294572"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.299576"], ["password_digest", "$2a$04$/VlVanKOGT7nyyymwdBFDOHR2bDsWFXQfWCOX9.88ZRhBfIcdGrxC"], ["updated_at", "2015-02-07 23:32:36.299576"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 18.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:32:36.365640"], ["score", 15], ["updated_at", "2015-02-07 23:32:36.365640"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:32:36.368642"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 2.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.391664"], ["password_digest", "$2a$04$m5V6soAY83bEVro4JA9w8uRTfwPOK4wDHgbFPMkFfpl63VrfAHWIa"], ["updated_at", "2015-02-07 23:32:36.391664"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.407679"], ["name", "Koff"], ["updated_at", "2015-02-07 23:32:36.407679"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:36.409682"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.409682"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (2.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:32:36.419691"], ["score", 15], ["updated_at", "2015-02-07 23:32:36.419691"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:32:36.420692"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.447718"], ["password_digest", "$2a$04$OHcIbn0Rp0rw3ivO2qRSu.SQrgeMIl..fhTy4rFP3.BAOXZ6/enTK"], ["updated_at", "2015-02-07 23:32:36.447718"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.463733"], ["name", "Koff"], ["updated_at", "2015-02-07 23:32:36.463733"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:36.465735"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.465735"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:32:36.475744"], ["score", 15], ["updated_at", "2015-02-07 23:32:36.475744"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:32:36.477746"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "ratings" WHERE "ratings"."id" = 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.505773"], ["password_digest", "$2a$04$Mw2hYjEYn8sJzb1O8yY05uF0BB5x.A/d1uyvCQsCQks.tW/ptfDsG"], ["updated_at", "2015-02-07 23:32:36.505773"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.523791"], ["password_digest", "$2a$04$hWV0h0Q4XGLwkHLpNtn.N.hKy4sVMDButEfYf7p6j/eX9IhRr0hRO"], ["updated_at", "2015-02-07 23:32:36.523791"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.536802"], ["password_digest", "$2a$04$FzIrgRBeKj7CMNQnSSdJLOQqgo86tZU45p8cc7.GjowyCTpKRTbGG"], ["updated_at", "2015-02-07 23:32:36.536802"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.562866"], ["password_digest", "$2a$04$kcShuy4yxNJY2zHul4t8keKnJweKFZ.zZA2mHQApznYA4GKubKGyO"], ["updated_at", "2015-02-07 23:32:36.562866"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:32:36 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.576880"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.576880"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.598901"], ["password_digest", "$2a$04$5E1BAmTjg96LXPKXAaZlqOcmXa/E0w7FcvcOWA97ap3pbrUzfJMIu"], ["updated_at", "2015-02-07 23:32:36.598901"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.605907"], ["password_digest", "$2a$04$6DMjF/IPvnI72MPAHSBPNe/JdoWTLKyFpOk4iqR6tDS9Q/AEZ5r/S"], ["updated_at", "2015-02-07 23:32:36.605907"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.607909"], ["score", 10], ["updated_at", "2015-02-07 23:32:36.607909"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:32:36.608910"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.609911"], ["score", 20], ["updated_at", "2015-02-07 23:32:36.609911"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 23:32:36.610912"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.616918"], ["password_digest", "$2a$04$m4vujiveg3t/JyJ/wYeuM.hg0f.C4fQF.PU9eYo4ys2WUpypo3fRG"], ["updated_at", "2015-02-07 23:32:36.616918"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.623924"], ["password_digest", "$2a$04$3Xq05n2Z5YDz9cCYT0uCMOsIaOXzte46EU.P.WQs5Mz3ntdJmo4qW"], ["updated_at", "2015-02-07 23:32:36.623924"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (1.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.629930"], ["password_digest", "$2a$04$xO/uc8KpE7dnYGJlIQvkauuoFKyLBoz5Hw2mJf69.yT3CppJMAK0."], ["updated_at", "2015-02-07 23:32:36.629930"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.631932"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:36.631932"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:36.632933"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.632933"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:32:36.633934"], ["score", 10], ["updated_at", "2015-02-07 23:32:36.633934"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.640940"], ["password_digest", "$2a$04$FxU9cmi9AiAwH.9r5yzoIelJdx1sV2CYyH5VJ48cKRt31pccLrkS6"], ["updated_at", "2015-02-07 23:32:36.640940"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.642942"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:36.642942"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:36.643944"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.643944"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:32:36.644945"], ["score", 10], ["updated_at", "2015-02-07 23:32:36.644945"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.645945"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:36.645945"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 23:32:36.646946"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.646946"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 23:32:36.647947"], ["score", 20], ["updated_at", "2015-02-07 23:32:36.647947"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.648948"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:36.648948"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 23:32:36.649949"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.649949"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 23:32:36.650950"], ["score", 15], ["updated_at", "2015-02-07 23:32:36.650950"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.651951"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:36.651951"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 23:32:36.652952"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.652952"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 23:32:36.652952"], ["score", 7], ["updated_at", "2015-02-07 23:32:36.652952"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.653953"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:36.653953"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 23:32:36.654954"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.654954"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 23:32:36.655955"], ["score", 9], ["updated_at", "2015-02-07 23:32:36.655955"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.656956"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:36.656956"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 23:32:36.657957"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.657957"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 23:32:36.658958"], ["score", 25], ["updated_at", "2015-02-07 23:32:36.658958"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.665964"], ["password_digest", "$2a$04$9xNPf0/kj67xKEDRp9A//.v3qlNlNTwyj4oc7NkV8m5pLp6bah6eG"], ["updated_at", "2015-02-07 23:32:36.665964"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.670969"], ["password_digest", "$2a$04$tn5Jyw9SXQevU6lVf/qXWOVHvlaVwQRUMY5xrCm.YUrytqDVnmFxW"], ["updated_at", "2015-02-07 23:32:36.670969"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.677976"], ["password_digest", "$2a$04$mn5SimyGk3WEhTtk3zAZXuQeZ7xLs.vywAyMUVVe5pECSNON6yVMm"], ["updated_at", "2015-02-07 23:32:36.677976"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.678977"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:36.678977"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:36.680979"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.680979"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:32:36.681980"], ["score", 10], ["updated_at", "2015-02-07 23:32:36.681980"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.688987"], ["password_digest", "$2a$04$LOQTYeVqSdLCT4i/qxAnEuQNMhKCl7Ajgf1kL9WxVv.JiaZbDHTsi"], ["updated_at", "2015-02-07 23:32:36.688987"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.694992"], ["password_digest", "$2a$04$puyOudT9kkQvSoMygcHhy.TFF2y.n1qGWnSckBiyaRJawbNrxT/1K"], ["updated_at", "2015-02-07 23:32:36.694992"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:32:36.700998"], ["password_digest", "$2a$04$yPc.f1kAWF.WeS0GHxmBse7ZEbK7sDKyLFQ6qu2Yjp2dIPLxFJlDW"], ["updated_at", "2015-02-07 23:32:36.700998"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:32:36.701999"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:32:36.701999"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:32:36.704000"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:32:36.704000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:32:36.705001"], ["score", 10], ["updated_at", "2015-02-07 23:32:36.705001"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:41.655948"], ["name", "Koff"], ["updated_at", "2015-02-07 23:50:41.655948"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:41.662955"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:50:41.662955"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:41.665958"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:50:41.665958"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (23.0ms)
Completed 200 OK in 66ms (Views: 55.1ms | ActiveRecord: 1.0ms)
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:50:41.754042"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:50:41.754042"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 16ms (Views: 16.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:41.777064"], ["name", "Koff"], ["updated_at", "2015-02-07 23:50:41.777064"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:41.779066"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:50:41.779066"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:41.781068"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:50:41.781068"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.1ms)
  Rendered beers/new.html.erb within layouts/application (1.1ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:41.806639"], ["name", "Koff"], ["updated_at", "2015-02-07 23:50:41.806639"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:41.808640"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:50:41.808640"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:41.809641"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:50:41.809641"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:41.831663"], ["name", "Koff"], ["updated_at", "2015-02-07 23:50:41.831663"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:41.833664"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:50:41.833664"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:41.834665"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:50:41.834665"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (24.0ms)
Completed 200 OK in 27ms (Views: 27.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:41.878707"], ["password_digest", "$2a$04$5x0uImRnVfGujtDUeqzbx.1detf9ZOy9V3fmuzzl37nlp8PSyWCKW"], ["updated_at", "2015-02-07 23:50:41.878707"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (13.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 18ms (Views: 17.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:41.928754"], ["password_digest", "$2a$04$d9fOsh2MyGRagKC8rqTeKudwz4KAd76/0W8dWunLKU9.9mCPKQFCu"], ["updated_at", "2015-02-07 23:50:41.928754"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:41.949774"], ["password_digest", "$2a$04$eKK4FycLYN6Hp7vc2/zpX.WEnuMhxXeo.Cgpd/DyYHJDRu3u/RL/S"], ["updated_at", "2015-02-07 23:50:41.949774"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:41.966791"], ["password_digest", "$2a$04$0UWKX8dGSrSrD25Y4nDiku9Mvj16sJcDlnhFwUWl6oeAOCcY9wRVe"], ["updated_at", "2015-02-07 23:50:41.966791"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:41.979803"], ["password_digest", "$2a$04$pMblI62Hn4bhVwc95ozUxetLrz.0f.tHtPR0JrBdLvR/umhGNt1LC"], ["updated_at", "2015-02-07 23:50:41.979803"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:50:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:42.000823"], ["password_digest", "$2a$04$SN4p4mGIAXfvDthrIoQ6oOSWOoOrRjwCt/r9r6mA5WbSxO101hZym"], ["updated_at", "2015-02-07 23:50:42.000823"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:50:42 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:50:42 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:50:42 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:42.016839"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:50:42.016839"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:42.024846"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:50:42.024846"], ["year", 1674]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:42.041863"], ["password_digest", "$2a$04$E5gxyKW4cjklL2IFkeb4cuuBioSCQoVjJSrt1Zp9lq7vVwt/yicWa"], ["updated_at", "2015-02-07 23:50:42.041863"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (16.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:42.062882"], ["password_digest", "$2a$04$YNov2tDzuew/SVHCvn/W/OUOPmxoeNgpS9ocX6t8cxkUl/RdZzfGu"], ["updated_at", "2015-02-07 23:50:42.062882"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:50:42.066886"], ["score", 10], ["updated_at", "2015-02-07 23:50:42.066886"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:50:42.068888"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:50:42.070890"], ["score", 20], ["updated_at", "2015-02-07 23:50:42.070890"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "user_id" = ? WHERE "ratings"."id" = 2[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:42.076896"], ["password_digest", "$2a$04$RhgUUsPVykAdvauF2NKveOo0z30tdicczPxVS8vk4pGe.wdF.F2dq"], ["updated_at", "2015-02-07 23:50:42.076896"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:42.083902"], ["password_digest", "$2a$04$Gw4.d.yc7.IhAJhLnm8NmehYQDXhBHyrRkCdPyW/ktIB9v0D/06wK"], ["updated_at", "2015-02-07 23:50:42.083902"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:42.090909"], ["password_digest", "$2a$04$I9au7dx97RxvfRw6ufXscuVzolNJJSVDRMH12m14y4ld.q6FL961a"], ["updated_at", "2015-02-07 23:50:42.090909"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:42.098917"], ["password_digest", "$2a$04$GV9UgRI659AzHduNyGIQHOAt48S4XAjD17haXHfrNmiUvXMBfixVy"], ["updated_at", "2015-02-07 23:50:42.098917"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:42.106924"], ["password_digest", "$2a$04$WGz4jcOEmJyACDsHhmmIVO3tVLG.gR/YX2uMUeX7GyS2qFbKM.SK2"], ["updated_at", "2015-02-07 23:50:42.106924"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:42.111929"], ["password_digest", "$2a$04$mzw8rsuChbG6Gv24gemKD.FWC2drKGEmnOnxXKpNcJ.hiRrwJwgAa"], ["updated_at", "2015-02-07 23:50:42.111929"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:42.119937"], ["password_digest", "$2a$04$oIIzCobm93CtTZeCZSRwzOA3fdkDMZSNesQ.aCI8KtqGBPza..tHu"], ["updated_at", "2015-02-07 23:50:42.119937"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:42.126943"], ["password_digest", "$2a$04$05R/j3clisFWpcYKRnecLuOvyxh8x8UldkAoKbkNAXOvZpJNfeokm"], ["updated_at", "2015-02-07 23:50:42.126943"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:50:42.132949"], ["password_digest", "$2a$04$uhhHf3Fk0vBkCKUp.3xFPO5pE76UQKPOGsBVbJhsD2Ql2e4OMgIQG"], ["updated_at", "2015-02-07 23:50:42.132949"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:50:42.138955"], ["password_digest", "$2a$04$E3nvzKZR4k8Upw.GPrtCMezOiYdGvcb/MwPoUdb63P7mCOFNDSIOC"], ["updated_at", "2015-02-07 23:50:42.138955"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:47.712015"], ["name", "Koff"], ["updated_at", "2015-02-07 23:51:47.712015"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:47.718020"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:51:47.718020"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:47.721023"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:51:47.721023"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (17.0ms)
  Rendered beers/new.html.erb within layouts/application (22.0ms)
Completed 200 OK in 65ms (Views: 55.1ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:51:47.810108"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:51:47.810108"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (13.0ms)
Completed 200 OK in 16ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:47.832129"], ["name", "Koff"], ["updated_at", "2015-02-07 23:51:47.832129"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:47.834131"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:51:47.834131"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:47.835132"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:51:47.835132"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:47.859155"], ["name", "Koff"], ["updated_at", "2015-02-07 23:51:47.859155"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:47.861157"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:51:47.861157"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:47.862157"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:51:47.862157"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:47.873168"], ["name", "Koff"], ["updated_at", "2015-02-07 23:51:47.873168"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:47.874169"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:51:47.874169"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:47.876171"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:51:47.876171"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (23.2ms)
Completed 200 OK in 25ms (Views: 24.2ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:47.917338"], ["password_digest", "$2a$04$tu41YbvFX4Z4Rzj1BBC.Z.GrvEO0dFm6gvwo.Z3ayYj7cE6t4VvQy"], ["updated_at", "2015-02-07 23:51:47.917338"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (1.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (12.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 17ms (Views: 15.0ms | ActiveRecord: 2.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:47.966384"], ["password_digest", "$2a$04$OHju6IjF3BJm3Tn.98OWQebC8P4pJb1mq6gjMBs3sHn/F79UGCoSK"], ["updated_at", "2015-02-07 23:51:47.966384"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:47.986403"], ["password_digest", "$2a$04$7NbEipl41pbWkCKChIa9tOQ.RSevJ5nk2z9a3GM6ajaLvyuIM5ZlC"], ["updated_at", "2015-02-07 23:51:47.986403"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (3.0ms)
  Rendered users/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 7ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:51:47 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:48.003420"], ["password_digest", "$2a$04$Jq8PU1nzRUZ67I9dW4Ysfe.rTQyOhAoL6kkEM5IJW2FyhxyBSHoGm"], ["updated_at", "2015-02-07 23:51:48.003420"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:51:48 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:48.015431"], ["password_digest", "$2a$04$O6mcxQUi5OSTbj5wnnPTguGcKwrK3cGooMDv/MttsOQCu6h/oYa5O"], ["updated_at", "2015-02-07 23:51:48.015431"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:51:48 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:51:48 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:51:48 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (2.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:48.036451"], ["password_digest", "$2a$04$4ztW6a6PQpdcY7XYoQmTv.idAQX5a0KxzvqBJF6IUznLP/WcSv7jS"], ["updated_at", "2015-02-07 23:51:48.036451"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:51:48 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:51:48 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:51:48 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:48.051465"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:51:48.051465"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:48.059473"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:51:48.059473"], ["year", 1674]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:48.076489"], ["password_digest", "$2a$04$gafilAfZ7wqV4y4nf3VXpuidtY70LZtYUmg2eOqjUc669ocyCNDGm"], ["updated_at", "2015-02-07 23:51:48.076489"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:48.083496"], ["password_digest", "$2a$04$qEBz9m/vUwz6CVq190bZEOiiU.GqzMRf/iL7VlOOJlWL7vYYB7L4C"], ["updated_at", "2015-02-07 23:51:48.083496"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:51:48.087499"], ["score", 10], ["updated_at", "2015-02-07 23:51:48.087499"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:51:48.089501"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:51:48.091503"], ["score", 20], ["updated_at", "2015-02-07 23:51:48.091503"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 23:51:48.092504"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:48.098510"], ["password_digest", "$2a$04$JaJAIJMtTU6JHgYRpt1lh.p2RktNvWwPGm8lklxy3YzTxVNaIze.6"], ["updated_at", "2015-02-07 23:51:48.098510"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:48.107518"], ["password_digest", "$2a$04$pcZjt.Cm1tfy9N9jh45XAOj6x11e9A9ZwlPy04wxJDasQr32qINge"], ["updated_at", "2015-02-07 23:51:48.107518"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:48.114525"], ["password_digest", "$2a$04$3zjLJkO8.2rZB.h7Y61bPOCsLhHwfSq4QdBF0YAj5qIMojqZCJyvO"], ["updated_at", "2015-02-07 23:51:48.114525"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:48.121532"], ["password_digest", "$2a$04$BD9lxkUvEmEoOE6XGaE8dOC7TevlR.FG7oh76t8IQMzjJkxBjYMam"], ["updated_at", "2015-02-07 23:51:48.121532"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:48.129540"], ["password_digest", "$2a$04$DgDgzCGFaOpWKox28qAFAuruVLK1pRSrUUi8JEEZQC2BV2YB3aSOe"], ["updated_at", "2015-02-07 23:51:48.129540"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:48.135545"], ["password_digest", "$2a$04$bJzsOd/4JYY6wm3TZkDVeemT0iwEOm0k3DURnVTrEr.o2929KUGfO"], ["updated_at", "2015-02-07 23:51:48.135545"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:48.141551"], ["password_digest", "$2a$04$r4M9jaTuuoJokisdZWVezuDEDn.mTTLJCfIsDAEGjFsNP.9aInwZq"], ["updated_at", "2015-02-07 23:51:48.141551"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:48.149559"], ["password_digest", "$2a$04$gK46P65uZNzTVK0UipjNt.aGFOuzvWYKusUC3MbRcYKQs/H7moYSu"], ["updated_at", "2015-02-07 23:51:48.149559"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:51:48.154563"], ["password_digest", "$2a$04$vcf6MeqmuyQ84zon/Uu5nOItL.V64t9LNWEdcSSbrRm3axvXr4snO"], ["updated_at", "2015-02-07 23:51:48.154563"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:51:48.161570"], ["password_digest", "$2a$04$tq8JtNXWgfImctMniUea4.kwoxGkemaNAjX1Y1eGwEovyi/xVzoLO"], ["updated_at", "2015-02-07 23:51:48.161570"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.169231"], ["name", "Koff"], ["updated_at", "2015-02-07 23:53:19.169231"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.177238"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:53:19.177238"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.180241"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:53:19.180241"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (18.0ms)
  Rendered beers/new.html.erb within layouts/application (26.0ms)
Completed 200 OK in 72ms (Views: 60.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:53:19.275332"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:53:19.275332"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (1.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 17ms (Views: 15.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.299356"], ["name", "Koff"], ["updated_at", "2015-02-07 23:53:19.299356"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.301357"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:53:19.301357"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.303358"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:53:19.303358"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.328382"], ["name", "Koff"], ["updated_at", "2015-02-07 23:53:19.328382"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.330385"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:53:19.330385"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.332386"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:53:19.332386"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 1.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.343396"], ["name", "Koff"], ["updated_at", "2015-02-07 23:53:19.343396"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.344398"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:53:19.344398"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.346400"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:53:19.346400"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (25.0ms)
Completed 200 OK in 28ms (Views: 26.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.385436"], ["name", "Koff"], ["updated_at", "2015-02-07 23:53:19.385436"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:53:19.388440"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.388440"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:53:19.390442"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.390442"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.395447"], ["password_digest", "$2a$04$.SX.BR5yz3k0qPC/3Ap6OueERx.KlpfM9FSKGpyoPRHVLzQm7Ne3q"], ["updated_at", "2015-02-07 23:53:19.395447"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 9ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (17.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 23ms (Views: 21.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:53:19.469517"], ["score", 15], ["updated_at", "2015-02-07 23:53:19.469517"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:53:19.471518"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (5.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.508554"], ["password_digest", "$2a$04$guWKQyecICpAGYcsCUh74.HSjF0HVMvRMMKCfro83IE82Cejz9Lmi"], ["updated_at", "2015-02-07 23:53:19.508554"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.525570"], ["name", "Koff"], ["updated_at", "2015-02-07 23:53:19.525570"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:53:19.527572"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.527572"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (2.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:53:19.538582"], ["score", 15], ["updated_at", "2015-02-07 23:53:19.538582"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:53:19.539583"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.568610"], ["password_digest", "$2a$04$Wui9.ECD3Jt3KXxasB5ZNeR8kiJFl5GQWJLNhbV2TXOlQP2I0ynF."], ["updated_at", "2015-02-07 23:53:19.568610"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.584626"], ["name", "Koff"], ["updated_at", "2015-02-07 23:53:19.584626"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:53:19.586628"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.586628"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:53:19.596637"], ["score", 15], ["updated_at", "2015-02-07 23:53:19.596637"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:53:19.597639"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (1.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "ratings" WHERE "ratings"."id" = 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.628668"], ["password_digest", "$2a$04$uNyrKZW4g4LRfGz9mC53J.c7RIdzNEE410wtKUvHZ4V/K5TdruKhC"], ["updated_at", "2015-02-07 23:53:19.628668"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.646685"], ["password_digest", "$2a$04$eZqfeumh4sE6fira37wBY.PiNIDk5CFwr/x.9W/2lQO/YRtdA2tMC"], ["updated_at", "2015-02-07 23:53:19.646685"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 6ms (ActiveRecord: 2.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.661700"], ["password_digest", "$2a$04$btCugLJS7VI2FgtBq2tAEuO7mLQSjv4J8lkW/aWnfyqDWysl5EGai"], ["updated_at", "2015-02-07 23:53:19.661700"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (1.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.689726"], ["password_digest", "$2a$04$SjgTjBMdsemHP4ItRdCsduZgl46Noe4iZwJkOhuJ.P40EywbZQdHe"], ["updated_at", "2015-02-07 23:53:19.689726"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:53:19 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 0.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.703740"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.703740"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.728763"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:53:19.728763"], ["year", 1674]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.748002"], ["password_digest", "$2a$04$UWe7Eck7JOr58ZDE7izYCOBTUYqC1VhQP0rQE.R8TG0KyYXgGLx.i"], ["updated_at", "2015-02-07 23:53:19.748002"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.755009"], ["password_digest", "$2a$04$ZIDt4UIT2qtHffDomNYh4.NzBoplnETBo8wVdFvt/eT38f.a6aHxW"], ["updated_at", "2015-02-07 23:53:19.755009"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:53:19.757011"], ["score", 10], ["updated_at", "2015-02-07 23:53:19.757011"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:53:19.759013"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-07 23:53:19.759013"], ["score", 20], ["updated_at", "2015-02-07 23:53:19.759013"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-07 23:53:19.760013"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.766019"], ["password_digest", "$2a$04$DsugbzYdOQd3rKmQ23SEBO6zgGqS0zlwWxk8mB0QGYiis0gS74lLW"], ["updated_at", "2015-02-07 23:53:19.766019"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.774027"], ["password_digest", "$2a$04$xNyG.JPhkWc04wBSb2G1ZOgwyjXI6.njuRinQBULSYUuGYAmuzWV2"], ["updated_at", "2015-02-07 23:53:19.774027"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.780033"], ["password_digest", "$2a$04$V4O46SXwBvhZLbjlY0CE8OdZXblnSgjgVa4bzDwhdZy/MQzxL2TzO"], ["updated_at", "2015-02-07 23:53:19.780033"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.782035"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:53:19.782035"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:53:19.783036"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.783036"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:53:19.785038"], ["score", 10], ["updated_at", "2015-02-07 23:53:19.785038"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.791043"], ["password_digest", "$2a$04$SiX11T9gtt2dzyH3TeCIqeW0r9ZcClE7yDd94/qHmaZCVatm6BJAy"], ["updated_at", "2015-02-07 23:53:19.791043"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.794046"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:53:19.794046"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:53:19.795047"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.795047"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:53:19.796048"], ["score", 10], ["updated_at", "2015-02-07 23:53:19.796048"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.797049"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:53:19.797049"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-07 23:53:19.798050"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.798050"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-07 23:53:19.799051"], ["score", 20], ["updated_at", "2015-02-07 23:53:19.799051"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.800052"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:53:19.800052"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-07 23:53:19.801053"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.801053"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-07 23:53:19.802054"], ["score", 15], ["updated_at", "2015-02-07 23:53:19.802054"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.803054"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:53:19.803054"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-07 23:53:19.804055"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.804055"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-07 23:53:19.805056"], ["score", 7], ["updated_at", "2015-02-07 23:53:19.805056"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.806057"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:53:19.806057"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-07 23:53:19.806057"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.806057"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-07 23:53:19.807058"], ["score", 9], ["updated_at", "2015-02-07 23:53:19.807058"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.808059"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:53:19.808059"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-07 23:53:19.809060"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.809060"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-07 23:53:19.810061"], ["score", 25], ["updated_at", "2015-02-07 23:53:19.810061"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.817068"], ["password_digest", "$2a$04$rzJf.WyOIdZ94N6hpNLqvesii0J8516JB/lBeNT.US.wbcrG0WalK"], ["updated_at", "2015-02-07 23:53:19.817068"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.823074"], ["password_digest", "$2a$04$S2XXYf5ZPJ0gN9ekK6oci.G0Wlqp9V6LL4rneFId/vKSdYmel0fH."], ["updated_at", "2015-02-07 23:53:19.823074"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.829079"], ["password_digest", "$2a$04$KBB4kMYkAYJBPCe2ABMvT.ABEQQEg9A/sFa61K0UptDXjekkhksQS"], ["updated_at", "2015-02-07 23:53:19.829079"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.831081"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:53:19.831081"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:53:19.833083"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.833083"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:53:19.834084"], ["score", 10], ["updated_at", "2015-02-07 23:53:19.834084"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.840090"], ["password_digest", "$2a$04$wyGKgxQZGxgy2xOWxxaHzeBmQCKa3dIqNE3FPE6SCZwmtf9Dj1Wli"], ["updated_at", "2015-02-07 23:53:19.840090"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.845095"], ["password_digest", "$2a$04$tliaA61cMzcxGjObzf0v2.lZEApudcRYiF2bI4QJWWjUeixm4T9vi"], ["updated_at", "2015-02-07 23:53:19.845095"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:53:19.851100"], ["password_digest", "$2a$04$32.iyCyJSke0ClxC3eyNpu8hVde/xBcDQIf.D43midtdzua7lZW2i"], ["updated_at", "2015-02-07 23:53:19.851100"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:53:19.852102"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:53:19.852102"], ["year", 1900]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:53:19.854103"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:53:19.854103"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:53:19.855104"], ["score", 10], ["updated_at", "2015-02-07 23:53:19.855104"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:38.693253"], ["name", "Koff"], ["updated_at", "2015-02-07 23:59:38.693253"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:38.699259"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:59:38.699259"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:38.702262"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:59:38.702262"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (19.0ms)
  Rendered beers/new.html.erb within layouts/application (24.0ms)
Completed 200 OK in 68ms (Views: 58.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:59:38.794349"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-07 23:59:38.794349"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 15ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:38.817372"], ["name", "Koff"], ["updated_at", "2015-02-07 23:59:38.817372"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:38.819373"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:59:38.819373"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:38.821375"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:59:38.821375"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:38.847400"], ["name", "Koff"], ["updated_at", "2015-02-07 23:59:38.847400"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:38.849402"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:59:38.849402"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:38.851404"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:59:38.851404"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (4.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:38.864416"], ["name", "Koff"], ["updated_at", "2015-02-07 23:59:38.864416"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:38.866418"], ["name", "Karjala"], ["updated_at", "2015-02-07 23:59:38.866418"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:38.867419"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:59:38.867419"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (25.0ms)
Completed 200 OK in 27ms (Views: 25.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:38.905456"], ["name", "Koff"], ["updated_at", "2015-02-07 23:59:38.905456"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:59:38.907458"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:38.907458"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:59:38.909460"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:38.909460"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:38.914464"], ["password_digest", "$2a$04$Sb8p7BGypRbLWRdgqjFMIOg8fNdKWgcdKcbIoqFKawDW.8EpkCsQu"], ["updated_at", "2015-02-07 23:59:38.914464"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 7ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (16.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 21ms (Views: 18.0ms | ActiveRecord: 2.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (7.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:59:38.983530"], ["score", 15], ["updated_at", "2015-02-07 23:59:38.983530"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:59:38.986532"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:59:38 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.010555"], ["password_digest", "$2a$04$iBDWL/IaxzKj4nnvu0HzmOHJmVt6pq1XrmSBz7egccsTo4a6.Qbzm"], ["updated_at", "2015-02-07 23:59:39.010555"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.027572"], ["name", "Koff"], ["updated_at", "2015-02-07 23:59:39.027572"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:59:39.029574"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.029574"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (2.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:59:39.040584"], ["score", 15], ["updated_at", "2015-02-07 23:59:39.040584"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:59:39.041585"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 2.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 10ms (Views: 8.0ms | ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.071614"], ["password_digest", "$2a$04$LHxCZgm9Ytads2BN83DBmeEY0UI0ezE2LhX60JTuyxvCmt/RPE1Zy"], ["updated_at", "2015-02-07 23:59:39.071614"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.088630"], ["name", "Koff"], ["updated_at", "2015-02-07 23:59:39.088630"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:59:39.090631"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.090631"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (2.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:59:39.101642"], ["score", 15], ["updated_at", "2015-02-07 23:59:39.101642"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-07 23:59:39.102643"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "ratings" WHERE "ratings"."id" = 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (1.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 1.0ms)
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.134674"], ["password_digest", "$2a$04$IfzlYbaWkI0G666j/siv1.JB6gQrIlOHTc2flP4ZjYcz1ejrVrRri"], ["updated_at", "2015-02-07 23:59:39.134674"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.153692"], ["password_digest", "$2a$04$ULiItrQQ6pFOivMiD46DSusegWHNlkqKEs4DuHCdg9dkxRBauzCbS"], ["updated_at", "2015-02-07 23:59:39.153692"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.167705"], ["password_digest", "$2a$04$gm1DhKa6lBwBF.qdDWw.2.QqAEUR06PkNT5IlgMxUspSW1Ie0vmTi"], ["updated_at", "2015-02-07 23:59:39.167705"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.197734"], ["password_digest", "$2a$04$26JIk4qV79m1uXDZUKCpLOyWHmikMqsYSkA06cTdrQyXpHKwP9Z7m"], ["updated_at", "2015-02-07 23:59:39.197734"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 01:59:39 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.213749"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.213749"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.222758"], ["name", "Schlenkerla"], ["updated_at", "2015-02-07 23:59:39.222758"], ["year", 1674]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "updated_at", "year") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.227763"], ["updated_at", "2015-02-07 23:59:39.227763"], ["year", 1674]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.247781"], ["password_digest", "$2a$04$hMZZkCaQ5v4JKcZlhJLh0u9elzFMMTD5nxR5UZLbJnvShSqlRy7Yq"], ["updated_at", "2015-02-07 23:59:39.247781"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.254788"], ["password_digest", "$2a$04$.d3UO2No09VbbG4ZDn3Ehu9Cl4.1dHa.Ux4.8YZ.clPyY.USG3DDq"], ["updated_at", "2015-02-07 23:59:39.254788"], ["username", "Pekka"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.256790"], ["score", 10], ["updated_at", "2015-02-07 23:59:39.256790"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-07 23:59:39.258793"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.260794"], ["score", 20], ["updated_at", "2015-02-07 23:59:39.260794"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2  [["updated_at", "2015-02-07 23:59:39.261795"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.267800"], ["password_digest", "$2a$04$ceuEjcgX.RrrKthXZh5uleSadrSSPKB7jFm0pG0UUvK.ACnNfLjya"], ["updated_at", "2015-02-07 23:59:39.267800"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.275808"], ["password_digest", "$2a$04$HS7bAKdhC887x7NEcO4svehwYpXv6qFZvAw8Ydw4r3KvnQFw1Pwuy"], ["updated_at", "2015-02-07 23:59:39.275808"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.282815"], ["password_digest", "$2a$04$9uB3tgNbz4mP8vSc2/cpZOdwEOFcSH6yT077tTh0y0hfXh48sFlqS"], ["updated_at", "2015-02-07 23:59:39.282815"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.284817"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:59:39.284817"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:59:39.285818"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.285818"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:59:39.286818"], ["score", 10], ["updated_at", "2015-02-07 23:59:39.286818"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.294826"], ["password_digest", "$2a$04$pTNuAy0HhZe6MP2dEqCJVObpM6Lb0fdtApdz8zVa2UUx7mXrskEZ."], ["updated_at", "2015-02-07 23:59:39.294826"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.296828"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:59:39.296828"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:59:39.297829"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.297829"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:59:39.298830"], ["score", 10], ["updated_at", "2015-02-07 23:59:39.298830"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.299831"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:59:39.299831"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 2], ["created_at", "2015-02-07 23:59:39.300832"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.300832"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 2], ["created_at", "2015-02-07 23:59:39.301833"], ["score", 20], ["updated_at", "2015-02-07 23:59:39.301833"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.302834"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:59:39.302834"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 3], ["created_at", "2015-02-07 23:59:39.303835"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.303835"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 3], ["created_at", "2015-02-07 23:59:39.304836"], ["score", 15], ["updated_at", "2015-02-07 23:59:39.304836"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.306838"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:59:39.306838"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 4], ["created_at", "2015-02-07 23:59:39.307839"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.307839"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 4], ["created_at", "2015-02-07 23:59:39.309841"], ["score", 7], ["updated_at", "2015-02-07 23:59:39.309841"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.310841"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:59:39.310841"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 5], ["created_at", "2015-02-07 23:59:39.311842"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.311842"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 5], ["created_at", "2015-02-07 23:59:39.312843"], ["score", 9], ["updated_at", "2015-02-07 23:59:39.312843"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.313844"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:59:39.313844"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 6], ["created_at", "2015-02-07 23:59:39.314845"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.314845"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 6], ["created_at", "2015-02-07 23:59:39.315846"], ["score", 25], ["updated_at", "2015-02-07 23:59:39.315846"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.323855"], ["password_digest", "$2a$04$VH/v4Dcg3uV5tVMIb3YrR.HY/afCLS3p4pb7VocPyizoGsgeAeiD."], ["updated_at", "2015-02-07 23:59:39.323855"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.329860"], ["password_digest", "$2a$04$iTdxv9WgyJkDTk8qMHsaTuokm7rt6sLncuzWNx1aXA8n2LcqWGzne"], ["updated_at", "2015-02-07 23:59:39.329860"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.335865"], ["password_digest", "$2a$04$J8e.ixzU4dnL56lKLduxt.uhWSGW1vzA2wXDYbuAQZwKYZsUDIF4."], ["updated_at", "2015-02-07 23:59:39.335865"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.337868"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:59:39.337868"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-07 23:59:39.340870"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.340870"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-07 23:59:39.342872"], ["score", 10], ["updated_at", "2015-02-07 23:59:39.342872"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.349879"], ["password_digest", "$2a$04$azBfeUnEEYzdGr50quKiWe7VUFgjb5xu5y85i0kY0l4jCg4LRuBJq"], ["updated_at", "2015-02-07 23:59:39.349879"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.355885"], ["password_digest", "$2a$04$JyQqCq4BqVfwXOxiidfLBeVQlh6WXHPgI6GQEj2cYY0G1i2B28enm"], ["updated_at", "2015-02-07 23:59:39.355885"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-07 23:59:39.361890"], ["password_digest", "$2a$04$IazkVvp0TGtqCrX.kLaGfOxtRK5Xj0oJkt6rSSuMCQ6VFssgZ42rq"], ["updated_at", "2015-02-07 23:59:39.361890"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-07 23:59:39.363892"], ["name", "anonymous"], ["updated_at", "2015-02-07 23:59:39.363892"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-07 23:59:39.364893"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-07 23:59:39.364893"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-07 23:59:39.366895"], ["score", 10], ["updated_at", "2015-02-07 23:59:39.366895"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:54.670592"], ["name", "Koff"], ["updated_at", "2015-02-08 00:01:54.670592"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:54.677598"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:01:54.677598"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:54.680601"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:01:54.680601"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (18.0ms)
  Rendered beers/new.html.erb within layouts/application (24.0ms)
Completed 200 OK in 68ms (Views: 57.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:01:54.771688"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-08 00:01:54.771688"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (15.0ms)
Completed 200 OK in 17ms (Views: 16.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:54.796712"], ["name", "Koff"], ["updated_at", "2015-02-08 00:01:54.796712"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:54.798714"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:01:54.798714"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:54.800715"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:01:54.800715"], ["year", 1899]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:54.826740"], ["name", "Koff"], ["updated_at", "2015-02-08 00:01:54.826740"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:54.828742"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:01:54.828742"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:54.830744"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:01:54.830744"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:54.841754"], ["name", "Koff"], ["updated_at", "2015-02-08 00:01:54.841754"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:54.843756"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:01:54.843756"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:54.845759"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:01:54.845759"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (24.0ms)
Completed 200 OK in 27ms (Views: 27.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:54.883795"], ["name", "Koff"], ["updated_at", "2015-02-08 00:01:54.883795"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:01:54.885797"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:54.885797"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:01:54.887798"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:54.887798"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:54.892803"], ["password_digest", "$2a$04$Bg.sEWYXXt84io.jhvA/C.aMFdnAewtvh36WAY0rnS1AdHQk8xDEm"], ["updated_at", "2015-02-08 00:01:54.892803"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (16.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 22ms (Views: 20.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (7.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 10.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:01:54.963872"], ["score", 15], ["updated_at", "2015-02-08 00:01:54.963872"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:01:54.967875"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:54.990896"], ["password_digest", "$2a$04$76RvVqT3V5l3bHBstIKftuY563toDH6NUlPS4c3tVJVz1TWtCsoF6"], ["updated_at", "2015-02-08 00:01:54.990896"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:01:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.008914"], ["name", "Koff"], ["updated_at", "2015-02-08 00:01:55.008914"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:01:55.010916"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.010916"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (2.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-08 00:01:55.022998"], ["score", 15], ["updated_at", "2015-02-08 00:01:55.022998"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-08 00:01:55.023999"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 10ms (Views: 8.0ms | ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 2.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.054063"], ["password_digest", "$2a$04$OvSusNOQqVwwZfQAdDKsHeeJS4LeKZzzdi/A5XISSWfZUP0eDQ2Eq"], ["updated_at", "2015-02-08 00:01:55.054063"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.072080"], ["name", "Koff"], ["updated_at", "2015-02-08 00:01:55.072080"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:01:55.073081"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.073081"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (2.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 1.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:01:55.085092"], ["score", 15], ["updated_at", "2015-02-08 00:01:55.085092"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:01:55.086093"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "ratings" WHERE "ratings"."id" = 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.118124"], ["password_digest", "$2a$04$LKa46CV7O5YtHOhw/19lE.xzyr3z9L5Br4mjqQUVk1EfVn4j8dexe"], ["updated_at", "2015-02-08 00:01:55.118124"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.137142"], ["password_digest", "$2a$04$OzLmXFXzSiVVprGqn66i9ufAV.8zVrz7V5YzxG1nB33lXjhitq0yO"], ["updated_at", "2015-02-08 00:01:55.137142"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 6ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.150154"], ["password_digest", "$2a$04$I8jmgfHLVQqOESpRdj5GfuCyxtyUY0HH.FqL2p304fNnZWiVhJ1s2"], ["updated_at", "2015-02-08 00:01:55.150154"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.178181"], ["password_digest", "$2a$04$qVk8az.kWxySP1wmo49rHe6n6VnDBBQuSftCM4fS/ZDbRBuQCE8.G"], ["updated_at", "2015-02-08 00:01:55.178181"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:01:55 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.194196"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.194196"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.203205"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:01:55.203205"], ["year", 1674]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.224225"], ["password_digest", "$2a$04$3nesQRtT0zW7vIWsxYdnQOrQZopleDfSJCXL8tIMJ2HLp.kInK1GW"], ["updated_at", "2015-02-08 00:01:55.224225"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.231231"], ["password_digest", "$2a$04$EBP4ISzisYY1IV3kpQaflOeAqW19i7F633ncIGWVacJlGYpKjoacO"], ["updated_at", "2015-02-08 00:01:55.231231"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-08 00:01:55.233233"], ["score", 10], ["updated_at", "2015-02-08 00:01:55.233233"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:01:55.235235"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-08 00:01:55.236236"], ["score", 20], ["updated_at", "2015-02-08 00:01:55.236236"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-08 00:01:55.237237"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.243243"], ["password_digest", "$2a$04$3BEIVvj.lfi7FCYmk2paJeuI88YSUa7PrbcIMjXmy6DvBi7kwKtri"], ["updated_at", "2015-02-08 00:01:55.243243"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.250249"], ["password_digest", "$2a$04$h0Aezykn4fZfYEemPfrFt.pWYtyn095eECa/KOUdHp3MqwVlG2viS"], ["updated_at", "2015-02-08 00:01:55.250249"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.257256"], ["password_digest", "$2a$04$poaS1su7d.zz6/eWPPGiiOQPIv25spKZWaiMsInivTxA.nB0.Dngm"], ["updated_at", "2015-02-08 00:01:55.257256"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.260259"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:01:55.260259"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:01:55.262261"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.262261"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:01:55.263262"], ["score", 10], ["updated_at", "2015-02-08 00:01:55.263262"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.270269"], ["password_digest", "$2a$04$ty6gubsgnPZpPtrh4rJZ7ORm.FFTpxMzRdc4v46XUvtcVj8Ibnzr2"], ["updated_at", "2015-02-08 00:01:55.270269"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.273272"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:01:55.273272"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:01:55.274272"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.274272"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:01:55.275273"], ["score", 10], ["updated_at", "2015-02-08 00:01:55.275273"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.276275"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:01:55.276275"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-08 00:01:55.277275"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.277275"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-08 00:01:55.278276"], ["score", 20], ["updated_at", "2015-02-08 00:01:55.278276"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.279277"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:01:55.279277"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-08 00:01:55.280278"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.280278"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-08 00:01:55.281279"], ["score", 15], ["updated_at", "2015-02-08 00:01:55.281279"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.282280"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:01:55.282280"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-08 00:01:55.284282"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.284282"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-08 00:01:55.285283"], ["score", 7], ["updated_at", "2015-02-08 00:01:55.285283"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.286284"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:01:55.286284"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-08 00:01:55.287285"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.287285"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-08 00:01:55.288286"], ["score", 9], ["updated_at", "2015-02-08 00:01:55.288286"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.289287"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:01:55.289287"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-08 00:01:55.290288"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.290288"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-08 00:01:55.291289"], ["score", 25], ["updated_at", "2015-02-08 00:01:55.291289"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.297294"], ["password_digest", "$2a$04$2JkEUAxI52icFDqPQ4wkhuQ1.6H4nkSKDSzhxH.FpzBYn6LONuXB2"], ["updated_at", "2015-02-08 00:01:55.297294"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.304301"], ["password_digest", "$2a$04$LiO3uds7uHOWXcgJoPbmgufsaV1JN4nloqYXiAIEmU9bsv4XwzyaO"], ["updated_at", "2015-02-08 00:01:55.304301"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (4.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.313309"], ["password_digest", "$2a$04$D1JlmYwnaBgM7KPRjO0BJe5NjfptIB4RVoTYgN0Mq9EhMRR.RbI.y"], ["updated_at", "2015-02-08 00:01:55.313309"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.314310"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:01:55.314310"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:01:55.316313"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.316313"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:01:55.318315"], ["score", 10], ["updated_at", "2015-02-08 00:01:55.318315"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.325321"], ["password_digest", "$2a$04$i2uJaw6Fs62cIOD36to06eqC5xVbAjb.1gM.DHhT1LTYIEd9pgaeq"], ["updated_at", "2015-02-08 00:01:55.325321"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.331327"], ["password_digest", "$2a$04$G32tlRlKHcGL/wgi/p.bRu8D2hykSIr3uUeqjDe6ZkT2pifY6fbHS"], ["updated_at", "2015-02-08 00:01:55.331327"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:01:55.339334"], ["password_digest", "$2a$04$jEN6lLAR3rVJVLfYu.3pO.JgUGxfoinDmtMK5V.JRM/v8Hu4dEtwK"], ["updated_at", "2015-02-08 00:01:55.339334"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:01:55.341336"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:01:55.341336"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:01:55.342337"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:01:55.342337"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-08 00:01:55.344339"], ["score", 10], ["updated_at", "2015-02-08 00:01:55.344339"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.188742"], ["name", "Koff"], ["updated_at", "2015-02-08 00:04:54.188742"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (30.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.193747"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:04:54.193747"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.224777"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:04:54.224777"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (19.0ms)
  Rendered beers/new.html.erb within layouts/application (25.0ms)
Completed 200 OK in 71ms (Views: 61.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:04:54.320868"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-08 00:04:54.320868"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (1.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 17ms (Views: 15.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.345892"], ["name", "Koff"], ["updated_at", "2015-02-08 00:04:54.345892"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.349895"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:04:54.349895"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.351898"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:04:54.351898"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 5ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.378924"], ["name", "Koff"], ["updated_at", "2015-02-08 00:04:54.378924"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.380926"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:04:54.380926"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.382927"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:04:54.382927"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.394939"], ["name", "Koff"], ["updated_at", "2015-02-08 00:04:54.394939"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.396941"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:04:54.396941"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.397941"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:04:54.397941"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (24.0ms)
Completed 200 OK in 27ms (Views: 27.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.437979"], ["name", "Koff"], ["updated_at", "2015-02-08 00:04:54.437979"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:04:54.439981"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.439981"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:04:54.441983"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.441983"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.446988"], ["password_digest", "$2a$04$LjZQHy.echh2rEwnWazAau/mhzR2fSWSzgoURPwiNJpJUlRr1bXvW"], ["updated_at", "2015-02-08 00:04:54.446988"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (17.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 22ms (Views: 21.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (7.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:04:54.520058"], ["score", 15], ["updated_at", "2015-02-08 00:04:54.520058"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:04:54.523060"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (9.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 11.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.548084"], ["password_digest", "$2a$04$mbT9gBrjF4QNMOaiQDh0GOEzSYTt3A1uFvIT4o9EA4rYgrcGIxld2"], ["updated_at", "2015-02-08 00:04:54.548084"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.566103"], ["name", "Koff"], ["updated_at", "2015-02-08 00:04:54.566103"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:04:54.569104"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.569104"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-08 00:04:54.580115"], ["score", 15], ["updated_at", "2015-02-08 00:04:54.580115"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-08 00:04:54.581117"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 9ms (Views: 9.0ms | ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (1.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.611145"], ["password_digest", "$2a$04$kADrC/yN7f592aJClTXC1.1xgWHUtIqecOSnwRis9tNqciv6yevsW"], ["updated_at", "2015-02-08 00:04:54.611145"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 4.0ms | ActiveRecord: 2.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.628161"], ["name", "Koff"], ["updated_at", "2015-02-08 00:04:54.628161"], ["year", 1900]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:04:54.630163"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.630163"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:04:54.641173"], ["score", 15], ["updated_at", "2015-02-08 00:04:54.641173"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:04:54.642174"], ["user_id", 1]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 7.0ms | ActiveRecord: 2.0ms)
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "ratings" WHERE "ratings"."id" = 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.674204"], ["password_digest", "$2a$04$0F.MfmZRlALAVDJDgK7WxOtypbcH1FWeYU1jXr3Zw68fcpUvnww4q"], ["updated_at", "2015-02-08 00:04:54.674204"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.692222"], ["password_digest", "$2a$04$lYMWVVsM9sDdfZd7BYgQH.caTfxsYyA1B0uCCKczutfPMcjdyTFT2"], ["updated_at", "2015-02-08 00:04:54.692222"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 4.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.706235"], ["password_digest", "$2a$04$GOZETw.4rwr./mZ1HHc/CutrnP7/XxUgodSqetVqkJrQA1bnhuaHG"], ["updated_at", "2015-02-08 00:04:54.706235"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.712241"], ["password_digest", "$2a$04$0tdNEGbKIODtR2.vQmXqG.NxjhrlMGQaW8wUvtJ.MGY1nJ1scxwXG"], ["updated_at", "2015-02-08 00:04:54.712241"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:04:54 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.733261"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.733261"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.741268"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:04:54.741268"], ["year", 1674]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.762289"], ["password_digest", "$2a$04$zL8d7VytfZiNnq6KI0SxN.BdT0F8vtCIBQz86c0EJpDWsyNQbMIqO"], ["updated_at", "2015-02-08 00:04:54.762289"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (4.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.771297"], ["password_digest", "$2a$04$v1GpA1ndLDr9Odq.1LSok.4LrSSLgB7LLJsAomI21LTZF9/xWptj6"], ["updated_at", "2015-02-08 00:04:54.771297"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-08 00:04:54.773299"], ["score", 10], ["updated_at", "2015-02-08 00:04:54.773299"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:04:54.774300"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-08 00:04:54.775301"], ["score", 20], ["updated_at", "2015-02-08 00:04:54.775301"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-08 00:04:54.776302"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.782308"], ["password_digest", "$2a$04$nDAtuKvFTqU/S6e0DVvcU.xXBLyQPIWehGfbPEaofBe9Xiearu.Ra"], ["updated_at", "2015-02-08 00:04:54.782308"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.790315"], ["password_digest", "$2a$04$Jh3osInYblWYbzSuloIOkO6sEbcSNFaBbVewf.F40L9pvU6ZI.T5m"], ["updated_at", "2015-02-08 00:04:54.790315"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.796321"], ["password_digest", "$2a$04$D06DYu6rQf8x3kBoQ2MgAOjCEuotK/B8hGNNTqseusNAgjcIYUxJ2"], ["updated_at", "2015-02-08 00:04:54.796321"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.798323"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:04:54.798323"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:04:54.799324"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.799324"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:04:54.801325"], ["score", 10], ["updated_at", "2015-02-08 00:04:54.801325"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.808332"], ["password_digest", "$2a$04$UoG8uDDhZHzz/sr8Tec9rOio0lA/JZiyKGDSVpGRrhPsXbw9Vjcb."], ["updated_at", "2015-02-08 00:04:54.808332"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.810334"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:04:54.810334"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:04:54.811335"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.811335"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:04:54.812336"], ["score", 10], ["updated_at", "2015-02-08 00:04:54.812336"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.813337"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:04:54.813337"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-08 00:04:54.815339"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.815339"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-08 00:04:54.816340"], ["score", 20], ["updated_at", "2015-02-08 00:04:54.816340"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.817341"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:04:54.817341"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-08 00:04:54.818342"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.818342"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-08 00:04:54.819343"], ["score", 15], ["updated_at", "2015-02-08 00:04:54.819343"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.820344"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:04:54.820344"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-08 00:04:54.821345"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.821345"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-08 00:04:54.822346"], ["score", 7], ["updated_at", "2015-02-08 00:04:54.822346"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.823346"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:04:54.823346"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-08 00:04:54.824347"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.824347"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-08 00:04:54.825349"], ["score", 9], ["updated_at", "2015-02-08 00:04:54.825349"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.826350"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:04:54.826350"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-08 00:04:54.827351"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.827351"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-08 00:04:54.828351"], ["score", 25], ["updated_at", "2015-02-08 00:04:54.828351"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.835359"], ["password_digest", "$2a$04$RWcZlSbNrz/hJEAFYWf5z..6wyJhwyv9aVdmj2LQk9Wni72iCGfRW"], ["updated_at", "2015-02-08 00:04:54.835359"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.842364"], ["password_digest", "$2a$04$PWlkSOgYoNI7LbDpiC1XY.f3od/LWC6Pj0Jd/CTmbakLnrLB3.rN6"], ["updated_at", "2015-02-08 00:04:54.842364"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.847370"], ["password_digest", "$2a$04$MTExhaFw1.Qm5LMS73JXEenjL0J6XpUbiy2XpVpH.3HfLVpVvGjti"], ["updated_at", "2015-02-08 00:04:54.847370"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.849371"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:04:54.849371"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:04:54.851373"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.851373"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:04:54.852374"], ["score", 10], ["updated_at", "2015-02-08 00:04:54.852374"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.859381"], ["password_digest", "$2a$04$9Myz4QGPbDB.qMrbWIWvjeYTFK0rMnEuLuMTcoLqQHl5Pm0k9TgeG"], ["updated_at", "2015-02-08 00:04:54.859381"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.865387"], ["password_digest", "$2a$04$7POt8VFtZLg5xpj2oe.sTuNjkNezlF/iHfgmmk9jwUsgK7QLeSZZS"], ["updated_at", "2015-02-08 00:04:54.865387"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:04:54.871392"], ["password_digest", "$2a$04$7uk7gDBdQiYjKCu0ykJ6KeXoUnJV4yz6P4fWKRTUymcNMfAdPIv9y"], ["updated_at", "2015-02-08 00:04:54.871392"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:04:54.873394"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:04:54.873394"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:04:54.874395"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:04:54.874395"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-08 00:04:54.875396"], ["score", 10], ["updated_at", "2015-02-08 00:04:54.875396"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.439205"], ["name", "Koff"], ["updated_at", "2015-02-08 00:10:34.439205"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:34.444210"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:10:34.444210"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.445211"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:10:34.445211"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (18.0ms)
  Rendered beers/new.html.erb within layouts/application (25.0ms)
Completed 200 OK in 71ms (Views: 60.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:10:34.540302"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-08 00:10:34.540302"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 17ms (Views: 17.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:34.565326"], ["name", "Koff"], ["updated_at", "2015-02-08 00:10:34.565326"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.568329"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:10:34.568329"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:34.570330"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:10:34.570330"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 3.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.596355"], ["name", "Koff"], ["updated_at", "2015-02-08 00:10:34.596355"], ["year", 1897]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:34.598357"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:10:34.598357"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.600359"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:10:34.600359"], ["year", 1899]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:34.610369"], ["name", "Koff"], ["updated_at", "2015-02-08 00:10:34.610369"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.612370"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:10:34.612370"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:34.614372"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:10:34.614372"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (24.0ms)
Completed 200 OK in 27ms (Views: 25.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.651408"], ["name", "Koff"], ["updated_at", "2015-02-08 00:10:34.651408"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:10:34.653409"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:34.653409"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:10:34.655412"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:34.655412"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.660416"], ["password_digest", "$2a$04$ZsBh/A0KE5al57rLB5.tg.HJfbjOc/kPl9vz3CXdBsxCs6oybimVK"], ["updated_at", "2015-02-08 00:10:34.660416"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 17.0ms | ActiveRecord: 1.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (7.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 13ms (Views: 12.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:10:34.731484"], ["score", 15], ["updated_at", "2015-02-08 00:10:34.731484"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:10:34.734487"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 6ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 11ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.759510"], ["password_digest", "$2a$04$ic1m8DO.1GQiiZI4iHZriuXOSLbwMBRwjodUikMeqtdNZ3M743ARG"], ["updated_at", "2015-02-08 00:10:34.759510"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:34.776527"], ["name", "Koff"], ["updated_at", "2015-02-08 00:10:34.776527"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:10:34.778529"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:34.778529"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (1.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 1.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-08 00:10:34.789539"], ["score", 15], ["updated_at", "2015-02-08 00:10:34.789539"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-08 00:10:34.790540"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (1.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:34.820569"], ["password_digest", "$2a$04$Eo6/hJsVENg9gL1XsGJSiezu51.V9bRSdEHZoe6/gn.p5oB.m6oX6"], ["updated_at", "2015-02-08 00:10:34.820569"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.837585"], ["name", "Koff"], ["updated_at", "2015-02-08 00:10:34.837585"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:10:34.839587"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:34.839587"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (1.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (2.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 1.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:10:34.850597"], ["score", 15], ["updated_at", "2015-02-08 00:10:34.850597"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:10:34.852599"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 7.0ms | ActiveRecord: 2.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRating Load (1.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "ratings" WHERE "ratings"."id" = 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (1.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (1.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 6.0ms | ActiveRecord: 2.0ms)
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:34.886632"], ["password_digest", "$2a$04$Tsqb6owC6pMqJTFA.wZAZehIpGEqsfhEef8Vq0qfiaXh/rNXqLDTG"], ["updated_at", "2015-02-08 00:10:34.886632"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 8ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.905650"], ["password_digest", "$2a$04$u4R0hvzNU7jxVs.qaFH18e9X2qn.l2G27mCjU/3EZVEWl4fZVQE4u"], ["updated_at", "2015-02-08 00:10:34.905650"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (3.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.919663"], ["password_digest", "$2a$04$axs5DPIX5Ddb08Kx2G941eL4GPvsImt.3iJ0G3hDoxNmSdxN5Y.yi"], ["updated_at", "2015-02-08 00:10:34.919663"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.947690"], ["password_digest", "$2a$04$/WlghG/NOQqS/b0bWlCXDOVKTk.M9ZDxnXQj.DTy05LzBbJRYnlte"], ["updated_at", "2015-02-08 00:10:34.947690"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:10:34 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.962704"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:34.962704"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:34.971713"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:10:34.971713"], ["year", 1674]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:34.991731"], ["password_digest", "$2a$04$7XhVs88nx7fw4uvMzRzoHOyJOLKXnH2Q.zxeYy.O3tpbrorXsk/eS"], ["updated_at", "2015-02-08 00:10:34.991731"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:34.998738"], ["password_digest", "$2a$04$98o8nql8deZN9AHiGkeAb.5iuY5MHvxU/qfm3EDitEk8jUmjO/QWy"], ["updated_at", "2015-02-08 00:10:34.998738"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-08 00:10:35.000740"], ["score", 10], ["updated_at", "2015-02-08 00:10:35.000740"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:10:35.002742"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-08 00:10:35.003743"], ["score", 20], ["updated_at", "2015-02-08 00:10:35.003743"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-08 00:10:35.004744"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:35.010750"], ["password_digest", "$2a$04$cDRf7WiQkwOAw47vS5B3te1LU2GuFbJQspWS47j5gAxk1vhqkj99O"], ["updated_at", "2015-02-08 00:10:35.010750"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:35.017757"], ["password_digest", "$2a$04$K8v3YkmtlZVqKoepsmxf1OCWAnV8yaaFw92DmhDXoucRc0UFJ4Vaq"], ["updated_at", "2015-02-08 00:10:35.017757"], ["username", "Pekka"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:35.023762"], ["password_digest", "$2a$04$wDNOlF3JOS79Tb5Y7KiuSu2ztaGM/gyhPrIisickX.69mKFCHYAmC"], ["updated_at", "2015-02-08 00:10:35.023762"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:35.025764"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:10:35.025764"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:10:35.027766"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:35.027766"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:10:35.028767"], ["score", 10], ["updated_at", "2015-02-08 00:10:35.028767"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:35.035774"], ["password_digest", "$2a$04$YX5BjiQDEQ4Xprkyh5MMYey2ij05cDQMMeLA9JvUyp6lg7.jvwUnK"], ["updated_at", "2015-02-08 00:10:35.035774"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:35.037776"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:10:35.037776"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:10:35.039777"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:35.039777"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:10:35.040778"], ["score", 10], ["updated_at", "2015-02-08 00:10:35.040778"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:35.041779"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:10:35.041779"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-08 00:10:35.042780"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:35.042780"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-08 00:10:35.043781"], ["score", 20], ["updated_at", "2015-02-08 00:10:35.043781"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:35.044782"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:10:35.044782"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-08 00:10:35.044782"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:35.044782"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-08 00:10:35.045783"], ["score", 15], ["updated_at", "2015-02-08 00:10:35.045783"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:35.047785"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:10:35.047785"], ["year", 1900]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-08 00:10:35.048786"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:35.048786"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-08 00:10:35.049787"], ["score", 7], ["updated_at", "2015-02-08 00:10:35.049787"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:35.050788"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:10:35.050788"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-08 00:10:35.051789"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:35.051789"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-08 00:10:35.052790"], ["score", 9], ["updated_at", "2015-02-08 00:10:35.052790"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:35.053791"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:10:35.053791"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-08 00:10:35.054792"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:35.054792"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-08 00:10:35.055793"], ["score", 25], ["updated_at", "2015-02-08 00:10:35.055793"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:35.062799"], ["password_digest", "$2a$04$eXcZKLF7Ykv6KsZnnRqT7eEuYfy1N8c5f5fihGisjaQ6ux3cI3xkq"], ["updated_at", "2015-02-08 00:10:35.062799"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:35.068805"], ["password_digest", "$2a$04$eBfR8swMmF4XE2yLosgnaO2tP6o5cLCvfGJc18SwhE3orivfbSWuC"], ["updated_at", "2015-02-08 00:10:35.068805"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:35.074811"], ["password_digest", "$2a$04$TxsRy0GV2zMaQ3PhMbP9muWsek7.lz3K.OdgoE8nbnkhb94NNn.gS"], ["updated_at", "2015-02-08 00:10:35.074811"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:35.077814"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:10:35.077814"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:10:35.078815"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:35.078815"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:10:35.080817"], ["score", 10], ["updated_at", "2015-02-08 00:10:35.080817"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:35.087823"], ["password_digest", "$2a$04$yH3rrh.98tBJHgCNl.1W7eldx7sCt4S9dBaIdcsilB5tUCugX36E."], ["updated_at", "2015-02-08 00:10:35.087823"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:35.092828"], ["password_digest", "$2a$04$.bjCivqQ1Yv3yK3jdWKOdOTw0GHp7.jivcmvgkcBZ8K9TMm86vJBG"], ["updated_at", "2015-02-08 00:10:35.092828"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:10:35.101837"], ["password_digest", "$2a$04$q4cjdJOr2xHHii7/d2XMHOnWuktNadZpZU4RWhDjQHcyG/YQ0fNci"], ["updated_at", "2015-02-08 00:10:35.101837"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:10:35.105840"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:10:35.105840"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:10:35.107842"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:10:35.107842"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-08 00:10:35.108843"], ["score", 10], ["updated_at", "2015-02-08 00:10:35.108843"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.460611"], ["name", "Koff"], ["updated_at", "2015-02-08 00:12:41.460611"], ["year", 1897]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:41.465615"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:12:41.465615"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.467617"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:12:41.467617"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by BeersController#new as HTML
  [1m[35mBrewery Load (1.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered beers/_form.html.erb (27.0ms)
  Rendered beers/new.html.erb within layouts/application (32.0ms)
Completed 200 OK in 68ms (Views: 55.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
Started POST "/beers" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"testikalja", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:12:41.555701"], ["name", "testikalja"], ["style", "Weizen"], ["updated_at", "2015-02-08 00:12:41.555701"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://www.example.com/beers
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/beers" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by BeersController#index as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered beers/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 16ms (Views: 15.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:41.579724"], ["name", "Koff"], ["updated_at", "2015-02-08 00:12:41.579724"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.581726"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:12:41.581726"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:41.583728"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:12:41.583728"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/beers/new" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by BeersController#new as HTML
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (2.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
Started POST "/beers" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by BeersController#create as HTML
  Parameters: {"utf8"=>"✓", "beer"=>{"name"=>"", "style"=>"Weizen", "brewery_id"=>"1"}, "commit"=>"Create Beer"}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered beers/_form.html.erb (1.0ms)
  Rendered beers/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (1.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.609752"], ["name", "Koff"], ["updated_at", "2015-02-08 00:12:41.609752"], ["year", 1897]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:41.610753"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:12:41.610753"], ["year", 1898]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.612756"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:12:41.612756"], ["year", 1899]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by BreweriesController#index as HTML
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "breweries"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT "breweries".* FROM "breweries"[0m
  Rendered breweries/index.html.erb within layouts/application (1.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:41.623766"], ["name", "Koff"], ["updated_at", "2015-02-08 00:12:41.623766"], ["year", 1897]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.625768"], ["name", "Karjala"], ["updated_at", "2015-02-08 00:12:41.625768"], ["year", 1898]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:41.626769"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:12:41.626769"], ["year", 1899]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/breweries" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by BreweriesController#index as HTML
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "breweries"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT "breweries".* FROM "breweries"
  Rendered breweries/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
Started GET "/breweries/1" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by BreweriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"  WHERE "beers"."brewery_id" = ?  [["brewery_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"  WHERE "beers"."brewery_id" = ?[0m  [["brewery_id", 1]]
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings" INNER JOIN "beers" ON "ratings"."beer_id" = "beers"."id" WHERE "beers"."brewery_id" = ? LIMIT 1  [["brewery_id", 1]]
  Rendered breweries/show.html.erb within layouts/application (24.0ms)
Completed 200 OK in 27ms (Views: 26.0ms | ActiveRecord: 0.0ms)
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.664805"], ["name", "Koff"], ["updated_at", "2015-02-08 00:12:41.664805"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:12:41.666807"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:41.666807"]]
  [1m[35m (1.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:12:41.668809"], ["name", "Karhu"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:41.668809"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.673814"], ["password_digest", "$2a$04$ibBjamLUHuVmASungJOAMug3Q7kTxAQ/szTGhWJYA7vlUKwgbWjju"], ["updated_at", "2015-02-08 00:12:41.673814"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 8ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (14.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (Views: 18.0ms | ActiveRecord: 0.0ms)
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (6.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 12.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:12:41.741878"], ["score", 15], ["updated_at", "2015-02-08 00:12:41.741878"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:12:41.743880"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 5ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."beer_id" = ?  [["beer_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."beer_id" = ?[0m  [["beer_id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.767903"], ["password_digest", "$2a$04$FdUwNnrT1JS3jCxlIFu4GuHRzAZKKH/VxO1Noq0cfmB75S7BhSdWm"], ["updated_at", "2015-02-08 00:12:41.767903"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 7ms (Views: 6.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:41.784919"], ["name", "Koff"], ["updated_at", "2015-02-08 00:12:41.784919"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:12:41.786921"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:41.786921"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by RatingsController#new as HTML
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers".* FROM "beers"[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (1.0ms)
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-08 00:12:41.797932"], ["score", 15], ["updated_at", "2015-02-08 00:12:41.797932"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  UPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1  [["updated_at", "2015-02-08 00:12:41.798933"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (1.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (0.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 1.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mBrewery Load (1.0ms)[0m  SELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:41.828961"], ["password_digest", "$2a$04$6HZQcatcGuHyFVEp9NOKLuzELgtaItQBlWXFdldHSpUxUJX7s5J6m"], ["updated_at", "2015-02-08 00:12:41.828961"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.844976"], ["name", "Koff"], ["updated_at", "2015-02-08 00:12:41.844976"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:12:41.846979"], ["name", "iso 3"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:41.846979"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"   ORDER BY "users"."id" ASC LIMIT 1[0m
Started GET "/ratings/new" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by RatingsController#new as HTML
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers".* FROM "beers"
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered ratings/new.html.erb within layouts/application (2.0ms)
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (1.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 5ms (Views: 3.0ms | ActiveRecord: 1.0ms)
Started POST "/ratings" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by RatingsController#create as HTML
  Parameters: {"utf8"=>"✓", "rating"=>{"beer_id"=>"1", "score"=>"15"}, "commit"=>"Create Rating"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at") VALUES (?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:12:41.857989"], ["score", 15], ["updated_at", "2015-02-08 00:12:41.857989"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:12:41.859991"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to http://www.example.com/users/1
Completed 302 Found in 4ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
Started DELETE "/ratings/1" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by RatingsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "ratings" WHERE "ratings"."id" = 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."style" FROM "beers"  GROUP BY style[0m
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (5.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "ratings"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:41.891020"], ["password_digest", "$2a$04$8kI/8UwmPXM9nVHH751fV.pOFtabkDEJZgdju3gbhLxp.nQj1/0va"], ["updated_at", "2015-02-08 00:12:41.891020"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/signup" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#new as HTML
  Rendered users/_form.html.erb (4.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#create as HTML
  Parameters: {"utf8"=>"✓", "user"=>{"username"=>"Brian", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Create User"}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Brian' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.910039"], ["password_digest", "$2a$04$DYI.um2Qcno8vosoNxZYVOoDSosw4kuukS8mOWUXRSL1Ih.EtUOEG"], ["updated_at", "2015-02-08 00:12:41.910039"], ["username", "Brian"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users/2
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
Started GET "/users/2" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 2]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 2]]
  [1m[35mBeerclub Load (0.0ms)[0m  SELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?  [["user_id", 2]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.923051"], ["password_digest", "$2a$04$J1xKqiSE4XjrQceUoK/0rus7q4yC71QOoCxJCaLCTP/yR.FPkSak6"], ["updated_at", "2015-02-08 00:12:41.923051"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 6ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/users/1
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/users/1" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36mBeerclub Load (0.0ms)[0m  [1mSELECT "beerclubs".* FROM "beerclubs" INNER JOIN "memberships" ON "beerclubs"."id" = "memberships"."beerclub_id" WHERE "memberships"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Rendered users/show.html.erb within layouts/application (3.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users"  WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 6ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.951077"], ["password_digest", "$2a$04$YEQ9rFTFqz1H2mjN9Tz4cez4EiSo6VcWih9nYquwrNYBCXYdRP8b6"], ["updated_at", "2015-02-08 00:12:41.951077"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
Started POST "/session" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "username"=>"Pekka", "password"=>"[FILTERED]", "commit"=>"Log in"}
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Redirected to http://www.example.com/signin
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/signin" for 127.0.0.1 at 2015-02-08 02:12:41 +0200
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 2ms (Views: 0.0ms | ActiveRecord: 0.0ms)
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "beers" ("created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.966092"], ["name", "Test"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:41.966092"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "beers"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "beers"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:41.975100"], ["name", "Schlenkerla"], ["updated_at", "2015-02-08 00:12:41.975100"], ["year", 1674]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:41.996120"], ["password_digest", "$2a$04$d3KBJ1T7MMcBLSjmlbrG2OJgK8mPYv7chiEF06zkmySiPAq.uDtea"], ["updated_at", "2015-02-08 00:12:41.996120"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE ("users"."username" = 'Pekka' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:42.002126"], ["password_digest", "$2a$04$bkh2/pjX/ohDkoMuFtLbaOshbJd6p5StZqzbHEh58ao3lBoNzieDu"], ["updated_at", "2015-02-08 00:12:42.002126"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-08 00:12:42.004128"], ["score", 10], ["updated_at", "2015-02-08 00:12:42.004128"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 1[0m  [["updated_at", "2015-02-08 00:12:42.006130"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "ratings" ("created_at", "score", "updated_at") VALUES (?, ?, ?)  [["created_at", "2015-02-08 00:12:42.007131"], ["score", 20], ["updated_at", "2015-02-08 00:12:42.007131"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mUPDATE "ratings" SET "updated_at" = ?, "user_id" = ? WHERE "ratings"."id" = 2[0m  [["updated_at", "2015-02-08 00:12:42.008132"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT("ratings"."score") FROM "ratings"  WHERE "ratings"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = ?  [["user_id", 1]]
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:42.014137"], ["password_digest", "$2a$04$sCa/wLzoZGGf.M9aLbqNveeiAxLaU01zJrQ1OqpD8iGH1wjlZiBjy"], ["updated_at", "2015-02-08 00:12:42.014137"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:42.021145"], ["password_digest", "$2a$04$xsHzXef/koer1j1sz1T9nuLKQxoGrY.B7iLV20GT9QlQogDvgVqDi"], ["updated_at", "2015-02-08 00:12:42.021145"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:42.028151"], ["password_digest", "$2a$04$LEmynVjP/BDNqlJWVYUaYOOFt2FF26DDlF6524KXBOdvPOVIYAqKK"], ["updated_at", "2015-02-08 00:12:42.028151"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:42.030153"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:12:42.030153"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:12:42.031154"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:42.031154"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:12:42.032155"], ["score", 10], ["updated_at", "2015-02-08 00:12:42.032155"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mRating Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1[0m  [["user_id", 1]]
  [1m[35mRating Load (0.0ms)[0m  SELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1  [["user_id", 1]]
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (3.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:42.039161"], ["password_digest", "$2a$04$7tepO9SDiaxT.NONLzKzwe6s3l/v1C3LTlxrlNW9TQfAzfrE05mP2"], ["updated_at", "2015-02-08 00:12:42.039161"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:42.042164"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:12:42.042164"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:12:42.043165"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:42.043165"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:12:42.044166"], ["score", 10], ["updated_at", "2015-02-08 00:12:42.044166"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:42.046168"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:12:42.046168"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 2], ["created_at", "2015-02-08 00:12:42.046168"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:42.046168"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 2], ["created_at", "2015-02-08 00:12:42.047169"], ["score", 20], ["updated_at", "2015-02-08 00:12:42.047169"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:42.049171"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:12:42.049171"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 3], ["created_at", "2015-02-08 00:12:42.049171"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:42.049171"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 3], ["created_at", "2015-02-08 00:12:42.050172"], ["score", 15], ["updated_at", "2015-02-08 00:12:42.050172"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:42.051173"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:12:42.051173"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 4], ["created_at", "2015-02-08 00:12:42.052174"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:42.052174"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 4], ["created_at", "2015-02-08 00:12:42.053175"], ["score", 7], ["updated_at", "2015-02-08 00:12:42.053175"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:42.055177"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:12:42.055177"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 5], ["created_at", "2015-02-08 00:12:42.055177"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:42.055177"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 5], ["created_at", "2015-02-08 00:12:42.057178"], ["score", 9], ["updated_at", "2015-02-08 00:12:42.057178"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:42.058180"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:12:42.058180"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 6], ["created_at", "2015-02-08 00:12:42.059180"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:42.059180"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 6], ["created_at", "2015-02-08 00:12:42.060182"], ["score", 25], ["updated_at", "2015-02-08 00:12:42.060182"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mRating Exists (0.0ms)[0m  SELECT  1 AS one FROM "ratings"  WHERE "ratings"."user_id" = ? LIMIT 1  [["user_id", 1]]
  [1m[36mRating Load (0.0ms)[0m  [1mSELECT  "ratings".* FROM "ratings"  WHERE "ratings"."user_id" = ?  ORDER BY "ratings"."score" DESC LIMIT 1[0m  [["user_id", 1]]
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"  WHERE "beers"."id" = ? LIMIT 1  [["id", 6]]
  [1m[36m (3.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:42.067188"], ["password_digest", "$2a$04$VEZKhyAqUB/2p1N.61fwKeD2ji0Y7LEOhTR17u6OI0ElXWYh8Z7oK"], ["updated_at", "2015-02-08 00:12:42.067188"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:42.072193"], ["password_digest", "$2a$04$23BpGWp.mD7iPykPJvSg3.ojSWpGg2mddSfOiAD8oHLoH0tovxHgu"], ["updated_at", "2015-02-08 00:12:42.072193"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:42.080201"], ["password_digest", "$2a$04$W6pYu1ghCXQvTwHrng2PKu9IKQZzgWjtV5v8LA1F13L09dbOfrQCa"], ["updated_at", "2015-02-08 00:12:42.080201"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:42.082203"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:12:42.082203"], ["year", 1900]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)  [["brewery_id", 1], ["created_at", "2015-02-08 00:12:42.083203"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:42.083203"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)[0m  [["beer_id", 1], ["created_at", "2015-02-08 00:12:42.085205"], ["score", 10], ["updated_at", "2015-02-08 00:12:42.085205"], ["user_id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mBeer Load (1.0ms)[0m  [1mSELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT "beers"."style" FROM "beers"  GROUP BY style
  [1m[36m (1.0ms)[0m  [1mSELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."style" = 'Lager')[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:42.091211"], ["password_digest", "$2a$04$d.EXBPjrcGeJzTSQXqD6GemPN.NtaoodXyM1M0.8MqRuxiZZhUUNm"], ["updated_at", "2015-02-08 00:12:42.091211"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1[0m
Binary data inserted for `string` type on column `password_digest`
  [1m[35mSQL (82.1ms)[0m  INSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:42.097217"], ["password_digest", "$2a$04$86q3UZ8Mz/R9E..cI2vlZebJdsHL5/.6NvoayjnniI6FC0jrjoOQS"], ["updated_at", "2015-02-08 00:12:42.097217"], ["username", "Pekka"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users"  WHERE "users"."username" = 'Pekka' LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (28.0ms)[0m  [1mINSERT INTO "users" ("created_at", "password_digest", "updated_at", "username") VALUES (?, ?, ?, ?)[0m  [["created_at", "2015-02-08 00:12:42.185301"], ["password_digest", "$2a$04$QRaO4vK5CsjsdYhtzMOsEe0lBuQqv7K6IWHNvd0/eY1dbfbDL5YZq"], ["updated_at", "2015-02-08 00:12:42.185301"], ["username", "Pekka"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (29.0ms)[0m  INSERT INTO "breweries" ("created_at", "name", "updated_at", "year") VALUES (?, ?, ?, ?)  [["created_at", "2015-02-08 00:12:42.214328"], ["name", "anonymous"], ["updated_at", "2015-02-08 00:12:42.214328"], ["year", 1900]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "beers" ("brewery_id", "created_at", "name", "style", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["brewery_id", 1], ["created_at", "2015-02-08 00:12:42.243356"], ["name", "anonymous"], ["style", "Lager"], ["updated_at", "2015-02-08 00:12:42.243356"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  INSERT INTO "ratings" ("beer_id", "created_at", "score", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?)  [["beer_id", 1], ["created_at", "2015-02-08 00:12:42.245358"], ["score", 10], ["updated_at", "2015-02-08 00:12:42.245358"], ["user_id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mBeer Load (0.0ms)[0m  SELECT  "beers".* FROM "beers"   ORDER BY "beers"."id" ASC LIMIT 1
  [1m[36mBeer Load (0.0ms)[0m  [1mSELECT "beers"."brewery_id" FROM "beers"  GROUP BY brewery_id[0m
  [1m[35m (1.0ms)[0m  SELECT AVG("ratings"."score") AS avg_id FROM "ratings"  WHERE "ratings"."user_id" = 1 AND "ratings"."beer_id" IN (SELECT "beers"."id" FROM "beers"  WHERE "beers"."brewery_id" = 1)
  [1m[36mBrewery Load (0.0ms)[0m  [1mSELECT  "breweries".* FROM "breweries"  WHERE "breweries"."id" = 1 LIMIT 1[0m
  [1m[35m (2.0ms)[0m  rollback transaction
